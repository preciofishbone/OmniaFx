if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["b46f7161-e941-4240-b573-a9cd83e9d132"])throw new Error("Error, already loaded manifest b46f7161-e941-4240-b573-a9cd83e9d132 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["b46f7161-e941-4240-b573-a9cd83e9d132"]=function(){(()=>{var e={"./client/fx/ux/richtexteditor/editorextension.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{EditorExtension:()=>r});var o=n("./node_modules/tiptap/dist/tiptap.esm.js");class r extends o.Extension{}},"./client/fx/ux/richtexteditor/markextension.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{MarkExtension:()=>r});var o=n("./node_modules/tiptap/dist/tiptap.esm.js");class r extends o.Mark{}},"./client/fx/ux/richtexteditor/nodeextension.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{NodeExtension:()=>r});var o=n("./node_modules/tiptap/dist/tiptap.esm.js");class r extends o.Node{}},"./client/fx/ux/richtexteditor/richtextcontenthelper.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{RichTextContentExtensionData:()=>o,RichTextContentHelper:()=>r});class o{constructor(e){this.nodeName=e}}class r{constructor(e){this.data={},this.data=e}getAllContentData(){return this.data}getDataByExtention(e){new e;return this.data[(new e).nodeName]}}},"./client/fx/ux/richtexteditor/toolbarextension.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ToolbarExtension:()=>r});var o=n("8610c059-395a-45c2-804a-8c236f4d60d9");class r extends o.VueComponentBase{transformVSlot(e){const t=[];return Object.keys(e).forEach((n=>{let o=!1,r=n;0===r.indexOf("proxy-")&&(o=!0,r=r.replace("proxy-","")),t.push(o?{key:r,fn:e[n],proxy:!0}:{key:r,fn:e[n]})})),{scopedSlots:this._u(t)}}}},"./client/fx/ux/richtexteditor/extensions/blockquote/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{BlockquoteEditorExtension:()=>x});var o=n("./node_modules/tiptap-commands/dist/commands.esm.js"),r=n("./client/fx/ux/richtexteditor/nodeextension.js");class i extends r.NodeExtension{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",{},0]}}commands({type:e,schema:t}){return()=>(0,o.toggleWrap)(e,t.nodes.paragraph)}keys({type:e}){return{"Ctrl->":(0,o.toggleWrap)(e)}}inputRules({type:e}){return[(0,o.wrappingInputRule)(/^\s*>\s$/,e)]}compareNumber(e,t){return e>t?1:e<t?-1:0}}var s=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),a=n.n(s),l=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),c=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),d=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),u=n("./node_modules/typestyle/umd/typestyle.js"),h=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),p=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),f=n("./client/fx/ux/richtexteditor/toolbarextension.js"),m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?g(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&m(t,n,i),i};let y=class extends f.ToolbarExtension{constructor(){super(...arguments),this.isActive=!0}mounted(){}activeChange(e){if(e){const e=this.editor,{selection:t,doc:n}=e.state.tr,{$from:o,to:r}=t;o&&o.parent&&"table_cell"==o.parent.type.name?this.isActive=!1:this.isActive=!0}}render(){return(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{attrs:{disabled:!this.isActive,icon:!0,dark:this.theming.body.bg.dark},class:(0,u.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.blockquote())),on:{click:()=>{this.menubar.commands.blockquote()}}}]),[(0,l.h)("v-icon",{class:"mt-2"},["ms-Icon ms-Icon--RightDoubleQuote"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.Blockquote])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};v([(0,d.Prop)()],y.prototype,"menubar",2),v([(0,d.Prop)()],y.prototype,"editor",2),v([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],y.prototype,"loc",2),v([(0,d.Watch)("menubar.isActive.blockquote",{deep:!0})],y.prototype,"activeChange",1),y=v([c.default],y);var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class x{static get id(){return new b.Guid("ec6989e6-4cc1-4212-8862-9f35bf506402")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new i],toolbarItems:[{toolbar:y,configuration:{}}],id:x.id})}))}}},"./client/fx/ux/richtexteditor/extensions/bold/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{BoldEditorExtension:()=>x});var o=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),r=n.n(o),i=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),a=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),l=n("./node_modules/typestyle/umd/typestyle.js"),c=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),u=n("./client/fx/ux/richtexteditor/toolbarextension.js"),h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?p(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&h(t,n,i),i};let m=class extends u.ToolbarExtension{mounted(){}render(){return(0,i.h)("v-tooltip",r()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,i.h)("v-btn",r()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,l.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.bold())),on:{click:()=>{this.menubar.commands.bold()}}}]),[(0,i.h)("v-icon",["format_bold"])])]}})]),[(0,i.h)("span",[this.loc.Tooltip.Bold])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};f([(0,a.Prop)()],m.prototype,"menubar",2),f([(0,c.Localize)(d.RichTextEditorExtensionLocalization.namespace)],m.prototype,"loc",2),m=f([s.default],m);var g=n("./node_modules/tiptap-commands/dist/commands.esm.js"),v=n("./client/fx/ux/richtexteditor/markextension.js");class y extends v.MarkExtension{constructor(){super(...arguments),this.priority=202}get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null}],toDOM:()=>["strong",0]}}keys({type:e}){return{"Mod-b":(0,g.toggleMark)(e)}}commands({type:e}){return()=>(0,g.toggleMark)(e)}inputRules({type:e}){return[(0,g.markInputRule)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}pasteRules({type:e}){return[(0,g.markPasteRule)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}}var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class x{static get id(){return new b.Guid("d19c5a86-73c3-4d3a-8710-bc2acc35b6b2")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new y],toolbarItems:[{toolbar:m,configuration:{}}],id:x.id})}))}}},"./client/fx/ux/richtexteditor/extensions/bulletlist/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{BulletListEditorExtension:()=>w});var o=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),r=n.n(o),i=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),a=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),l=n("./node_modules/typestyle/umd/typestyle.js"),c=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),u=n("./client/fx/ux/richtexteditor/toolbarextension.js"),h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?p(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&h(t,n,i),i};let m=class extends u.ToolbarExtension{mounted(){}render(){return(0,i.h)("v-tooltip",r()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,i.h)("v-btn",r()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,l.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.bullet_list())),on:{click:()=>{this.menubar.commands.bullet_list()}}}]),[(0,i.h)("v-icon",["format_list_bulleted"])])]}})]),[(0,i.h)("span",[this.loc.Tooltip.BulletList])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};f([(0,a.Prop)()],m.prototype,"menubar",2),f([(0,c.Localize)(d.RichTextEditorExtensionLocalization.namespace)],m.prototype,"loc",2),m=f([s.default],m);var g=n("./node_modules/tiptap-commands/dist/commands.esm.js"),v=n("./client/fx/ux/richtexteditor/nodeextension.js");class y extends v.NodeExtension{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:e,schema:t}){return()=>(0,g.toggleList)(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-8":(0,g.toggleList)(e,t.nodes.list_item)}}inputRules({type:e}){return[(0,g.wrappingInputRule)(/^\s*([-+*])\s$/,e)]}}var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),x=n("./client/fx/ux/richtexteditor/extensions/listitem/listitemnode.js");class w{static get id(){return new b.Guid("504b380a-9009-448b-9eec-f69de57adc4e")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new y,new x.default],toolbarItems:[{toolbar:m,configuration:{}}],id:w.id})}))}}},"./client/fx/ux/richtexteditor/extensions/codeblock/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{CodeBlockEditorExtension:()=>x});var o=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),r=n.n(o),i=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),a=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),l=n("./node_modules/typestyle/umd/typestyle.js"),c=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),u=n("./client/fx/ux/richtexteditor/toolbarextension.js"),h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?p(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&h(t,n,i),i};let m=class extends u.ToolbarExtension{mounted(){}render(){return(0,i.h)("v-tooltip",r()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,i.h)("v-btn",r()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,l.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.code_block())),on:{click:()=>{this.menubar.commands.code_block()}}}]),[(0,i.h)("v-icon",["developer_mode"])])]}})]),[(0,i.h)("span",[this.loc.Tooltip.CodeBlock])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};f([(0,a.Prop)()],m.prototype,"menubar",2),f([(0,c.Localize)(d.RichTextEditorExtensionLocalization.namespace)],m.prototype,"loc",2),m=f([s.default],m);var g=n("./node_modules/tiptap-commands/dist/commands.esm.js"),v=n("./client/fx/ux/richtexteditor/nodeextension.js");class y extends v.NodeExtension{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:e,schema:t}){return()=>(0,g.toggleBlockType)(e,t.nodes.paragraph)}keys({type:e}){return{"Shift-Ctrl-\\":(0,g.setBlockType)(e)}}inputRules({type:e}){return[(0,g.textblockTypeInputRule)(/^```$/,e)]}}var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class x{static get id(){return new b.Guid("7889eef8-3db1-45a6-b131-ec3176b6f924")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new y],toolbarItems:[{toolbar:m,configuration:{}}],id:x.id})}))}}},"./client/fx/ux/richtexteditor/extensions/extendedelements/hardbreak/hardbreaknode.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n("./node_modules/tiptap-commands/dist/commands.esm.js"),r=n("./client/fx/ux/richtexteditor/nodeextension.js");class i extends r.NodeExtension{get name(){return"hard_break"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}keys({type:e}){const t=(0,o.chainCommands)(o.exitCode,((t,n)=>(n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)));return{"Mod-Enter":t,"Shift-Enter":t}}commands({type:e}){return()=>(t,n)=>n(t.tr.replaceSelectionWith(e.create()))}}},"./client/fx/ux/richtexteditor/extensions/heading/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{HeadingEditorExtension:()=>x});var o=n("./client/fx/ux/richtexteditor/nodeextension.js");class r extends o.NodeExtension{constructor(e={}){super(),this.options=Object.assign(this.defaultOptions,e)}get name(){return"heading"}get defaultOptions(){return{headings:[]}}get schema(){return{attrs:{level:{default:0},container:{default:""},containerid:{default:""},header:{default:null,hasDefault:!0},style:{default:null},class:{default:""}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.headings.filter((e=>e.enabled&&!e.isHiddenStyle)).map(((e,t)=>{const n="p"!==e.containerElement?e.containerElement:`p[class="${e.class}"]`;return{priority:51,tag:n,getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t.container=e.tagName.toLowerCase(),t.tagName=n,t}}})),toDOM:e=>{e.attrs.header&&e.attrs.header.containerElement;const t=e.attrs.container||(e.attrs.header?e.attrs.header.containerElement:"");let n={};e.attrs.class&&(n={class:e.attrs.class});let o=Object.assign({},n);return e.attrs.style&&(o={...o,style:e.attrs.style}),[t,o,0]}}}commands({type:e,schema:t}){const n=t.marks.textcolor;return t=>(o,r,i)=>{const{selection:s,tr:a}=o,{from:l,to:c}=s,d=i.domAtPos(l);if(d&&d.node){const o={};if(d.node.attributes)for(let e=0;e<d.node.attributes.length;e++){const t=d.node.attributes[e];o[t.name]=t.value}t={...o,...t},a.removeMark(s.from,s.to,n).setBlockType(l,c,e,t).scrollIntoView()}return r(a)}}}var i=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),s=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),a=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),l=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),c=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),d=n("./client/fx/ux/richtexteditor/toolbarextension.js"),u=n("5e618f4d-d014-414e-a681-89e34cbeda0f"),h=n("./client/fx/ux/uxdefaultrichtextstyle.js"),p=n("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),f=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?m(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&f(t,n,i),i};let v=class extends d.ToolbarExtension{constructor(){super(...arguments),this.editorDefaultStyle=p.StyleFlow.use(h.DefaultRichtextStyles),this.headingClients=[],this.model=null,this.headingSelected=null}activeChange(e){if(e)if(e()){const e=this.editor,t=e.view.domAtPos(e.selection.from);if(t)if(3===t.node.nodeType){let e=t.node.parentNode;"span"===e.tagName.toLowerCase()&&(e=e.parentNode),this.setModel(e)}else this.setModel(t.node)}else this.model=p.HeadingConstants.Normal}setModel(e){const t=e.tagName.toLowerCase();if("p"===t){const t=e.getAttribute("class"),n=this.headings.find((e=>t===e.class));this.model=n?n.id:p.HeadingConstants.Normal}else{const e=this.headings.find((e=>t===e.containerElement));e&&(this.model=e.id)}}created(){this.headingClients=this.headings.filter((e=>e.enabled&&!e.isHiddenStyle)).map((e=>({...e,multilingualTitleDisplay:this.multilingualStore.getters.stringValue(e.title)})))}handleSelectHeading(e){this.menubar.commands.heading({header:e,class:e.builtin?"":`p-${e.id}`}),this.headingSelected=e}mounted(){}render(){return(0,a.h)("v-select",{class:"d-inline-block",style:{maxWidth:"160px",width:"100%"},attrs:{placeholder:this.loc.SelectHeading,items:this.headingClients,dark:this.theming.body.bg.dark,"item-value":"id","item-text":"multilingualTitleDisplay","hide-details":!0},scopedSlots:{item:e=>[(0,a.h)("v-list-item-content",{attrs:{"data-omwc":!0},on:{click:()=>{this.handleSelectHeading(e.item)}}},[(0,a.h)("v-list-item-title",{class:this.editorDefaultStyle.defaultStyle},[this.createHeadingItem(e.item)])])],selection:e=>[(0,a.h)("span",[e.item.multilingualTitleDisplay])]},model:{value:this.model,callback:e=>{this.model=e}}})}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}createHeadingItem(e){const t=e.containerElement||"p",n=e.multilingualTitleDisplay,o=p.HeadingConfigurationFactory.getHeadingStyle(e);return(0,a.h)(t,{style:o},[n])}};g([(0,s.Prop)()],v.prototype,"editor",2),g([(0,s.Prop)()],v.prototype,"menubar",2),g([(0,s.Prop)({default:{}})],v.prototype,"headings",2),g([(0,l.Localize)(c.RichTextEditorExtensionLocalization.namespace)],v.prototype,"loc",2),g([(0,l.Inject)(u.MultilingualStore)],v.prototype,"multilingualStore",2),g([(0,s.Watch)("menubar.isActive.heading",{deep:!0})],v.prototype,"activeChange",1),v=g([i.default],v);var y=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),b=n("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac");class x{constructor(e){this.configuration=[],this.settings={headings:[]},this.headingIds=[],this.settingsService=null,this.settingsService=l.ServiceContainer.createInstance(b.SettingsService),this.configuration=[{toolbar:v,configuration:{headings:[]}}],this.headingIds=e&&e.headings?e.headings:this.getDefaultHeading()}static get id(){return new y.Guid("f02d2e47-2994-4843-be6e-d02eccdd1054")}getDefition(){return new Promise(((e,t)=>{this.settingsService.getValue(y.Constants.ux.components.textStyles.settingsKey).then((t=>{t||(t={headings:p.HeadingConfigurationFactory.create()});const n=t.headings.filter((e=>e.enabled&&this.headingIds.indexOf(e.id)>=0));this.configuration.forEach((e=>{e.configuration.headings=n}));const o={nodes:[new r({headings:n})],toolbarItems:this.configuration,id:x.id};e(o)}))}))}getDefaultHeading(){return p.HeadingConfigurationFactory.create().map((e=>e.id))}}},"./client/fx/ux/richtexteditor/extensions/history/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{HistoryEditorExtension:()=>y});var o=n("./node_modules/tiptap-extensions/dist/extensions.esm.js"),r=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),i=n.n(r),s=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),a=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),l=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),c=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),u=n("./client/fx/ux/richtexteditor/toolbarextension.js"),h=n("./node_modules/prosemirror-history/dist/history.js"),p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?f(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&p(t,n,i),i};let g=class extends u.ToolbarExtension{constructor(){super(...arguments),this.isUndoActive=!1,this.isRedoActive=!1}mounted(){this.editor.on("update",(()=>{this.isUndoActive=(0,h.undoDepth)(this.editor.state)>0,this.isRedoActive=(0,h.redoDepth)(this.editor.state)>0}))}render(){return(0,s.h)("span",[(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,disabled:!this.isUndoActive,icon:!0},class:"ma-0",on:{click:()=>{this.menubar.commands.undo()}}}]),[(0,s.h)("v-icon",["undo"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.Undo])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{class:"ma-0",attrs:{icon:!0,dark:this.theming.body.bg.dark,disabled:!this.isRedoActive},on:{click:()=>{this.menubar.commands.redo()}}}]),[(0,s.h)("v-icon",["redo"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.Redo])])])}};m([(0,l.Prop)()],g.prototype,"editor",2),m([(0,l.Prop)()],g.prototype,"menubar",2),m([(0,c.Localize)(d.RichTextEditorExtensionLocalization.namespace)],g.prototype,"loc",2),g=m([a.default],g);var v=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class y{static get id(){return new v.Guid("23457892-b187-416c-bf7b-c417cbe4eea8")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new o.History],toolbarItems:[{toolbar:g,configuration:{}}],id:y.id})}))}}},"./client/fx/ux/richtexteditor/extensions/horizontalrule/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{HorizontalRuleEditorExtension:()=>x});var o=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),r=n.n(o),i=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),a=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),l=n("./node_modules/typestyle/umd/typestyle.js"),c=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),u=n("./client/fx/ux/richtexteditor/toolbarextension.js"),h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?p(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&h(t,n,i),i};let m=class extends u.ToolbarExtension{mounted(){}render(){return(0,i.h)("v-tooltip",r()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,i.h)("v-btn",r()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,l.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.horizontal_rule())),on:{click:()=>{this.menubar.commands.horizontal_rule()}}}]),[(0,i.h)("v-icon",["fal fa-grip-lines"])])]}})]),[(0,i.h)("span",[this.loc.Tooltip.HorizontalRule])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};f([(0,a.Prop)()],m.prototype,"menubar",2),f([(0,c.Localize)(d.RichTextEditorExtensionLocalization.namespace)],m.prototype,"loc",2),m=f([s.default],m);var g=n("./node_modules/tiptap-commands/dist/commands.esm.js"),v=n("./client/fx/ux/richtexteditor/nodeextension.js");class y extends v.NodeExtension{get name(){return"horizontal_rule"}get schema(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]}}commands({type:e}){return()=>(t,n)=>n(t.tr.replaceSelectionWith(e.create()))}inputRules({type:e}){return[(0,g.nodeInputRule)(/^(?:---|___\s|\*\*\*\s)$/,e)]}}var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class x{static get id(){return new b.Guid("637a9548-1487-4c90-9ee8-5e425674efb4")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new y],toolbarItems:[{toolbar:m,configuration:{}}],id:x.id})}))}}},"./client/fx/ux/richtexteditor/extensions/html/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{HtmlEditorExtension:()=>x});var o=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),r=n.n(o),i=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),a=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),l=n("./client/fx/ux/dialog/index.js"),c=n("./node_modules/typestyle/umd/typestyle.js"),d=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),u=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),h=n("./client/fx/ux/richtexteditor/toolbarextension.js"),p=n("./client/fx/ux/omniatheming.js"),f=n("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?g(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&m(t,n,i),i};let y=class extends h.ToolbarExtension{constructor(){super(...arguments),this.showHtmlScript=!1,this.content="",this.htmlContent=""}mounted(){this.content=this.editor.getHTML()}onCloseHtmlScript(){this.showHtmlScript=!1}onHtmlScriptSave(){this.content=this.htmlContent,this.onContentChanged&&this.onContentChanged(this.htmlContent),this.showHtmlScript=!1}render(){return(0,i.h)("span",[(0,i.h)("v-tooltip",r()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,i.h)("v-btn",r()([{attrs:{dark:this.theming.body.bg.dark},class:"ma-0",style:"min-width:40px"},t,{attrs:{small:!0,text:!0},on:{click:()=>{this.showHtmlScript=!0}}}]),["Html"])]}})]),[(0,i.h)("span",[this.loc.Tooltip.Html])]),this.renderHtmlScriptDialog(this.showHtmlScript)])}renderHtmlScriptDialog(e){return e&&(this.content=this.editor.getHTML()),this.htmlContent=this.content,e?(0,i.h)("v-dialog",{attrs:{"content-class":`${(0,f.getVuetifyAppClasses)()}`,position:l.DialogPositions.Center},on:{close:this.onCloseHtmlScript},model:{value:this.showHtmlScript,callback:e=>{this.showHtmlScript=e}}},[(0,i.h)("v-app-bar",{attrs:{short:!0,flat:!0,color:this.omniaTheming.promoted.header.primary.base,dark:this.omniaTheming.promoted.header.dark,tabs:!0}},[(0,i.h)("v-toolbar-title",[this.loc.Html]),(0,i.h)("v-spacer"),(0,i.h)("v-btn",{attrs:{icon:!0},on:{click:this.onCloseHtmlScript}},[(0,i.h)("v-icon",["close"])])]),(0,i.h)("v-divider"),(0,i.h)("v-layout",{attrs:{"align-center":!0,row:!0,wrap:!0,"ma-0":!0}},[(0,i.h)("v-flex",{attrs:{xs12:!0}},[(0,i.h)("monaco-editor",{class:(0,c.classes)((0,c.style)({height:"calc((100vh - 240px) - 30px)"})),attrs:{theme:"vs-dark",language:"html"},on:{change:e=>{this.htmlContent=e}},model:{value:this.content,callback:e=>{this.content=e}}})]),(0,i.h)("v-flex",{attrs:{xs12:!0},class:"text-right"},[(0,i.h)("v-btn",{class:"shrink ml-2",attrs:{text:!0},on:{click:this.onHtmlScriptSave}},[this.omniaUxLoc.Common.Buttons.Save]),(0,i.h)("v-btn",{class:"shrink ml-2",attrs:{text:!0},on:{click:this.onCloseHtmlScript}},[this.omniaUxLoc.Common.Buttons.Cancel])])])]):null}};v([(0,a.Prop)()],y.prototype,"menubar",2),v([(0,a.Prop)()],y.prototype,"editor",2),v([(0,a.Prop)()],y.prototype,"onContentChanged",2),v([(0,d.Inject)(p.OmniaTheming)],y.prototype,"omniaTheming",2),v([(0,d.Localize)(u.RichTextEditorExtensionLocalization.namespace)],y.prototype,"loc",2),v([(0,d.Localize)("Omnia.Ux")],y.prototype,"omniaUxLoc",2),y=v([s.default],y);var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class x{static get id(){return new b.Guid("573baa66-d35a-4ac0-b765-65e37f40bba9")}getDefition(){return new Promise(((e,t)=>{e({nodes:[],toolbarItems:[{toolbar:y,configuration:{}}],id:x.id})}))}}},"./client/fx/ux/richtexteditor/extensions/italic/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{ItalicEditorExtension:()=>x});var o=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),r=n.n(o),i=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),a=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),l=n("./node_modules/typestyle/umd/typestyle.js"),c=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),u=n("./client/fx/ux/richtexteditor/toolbarextension.js"),h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?p(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&h(t,n,i),i};let m=class extends u.ToolbarExtension{mounted(){}render(){return(0,i.h)("v-tooltip",r()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,i.h)("v-btn",r()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,l.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.italic())),on:{click:()=>{this.menubar.commands.italic()}}}]),[(0,i.h)("v-icon",["format_italic"])])]}})]),[(0,i.h)("span",[this.loc.Tooltip.Italic])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};f([(0,a.Prop)()],m.prototype,"menubar",2),f([(0,c.Localize)(d.RichTextEditorExtensionLocalization.namespace)],m.prototype,"loc",2),m=f([s.default],m);var g=n("./node_modules/tiptap-commands/dist/commands.esm.js"),v=n("./client/fx/ux/richtexteditor/markextension.js");class y extends v.MarkExtension{constructor(){super(...arguments),this.priority=203}get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"}],toDOM:()=>["em",0]}}keys({type:e}){return{"Mod-i":(0,g.toggleMark)(e)}}commands({type:e}){return()=>(0,g.toggleMark)(e)}inputRules({type:e}){return[(0,g.markInputRule)(/(?:^|[^_])(_([^_]+)_)$/,e),(0,g.markInputRule)(/(?:^|[^*])(\*([^*]+)\*)$/,e)]}pasteRules({type:e}){return[(0,g.markPasteRule)(/_([^_]+)_/g,e),(0,g.markPasteRule)(/\*([^*]+)\*/g,e)]}}var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class x{static get id(){return new b.Guid("817bddfe-6579-43f9-9327-650d71abe3de")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new y],toolbarItems:[{toolbar:m,configuration:{}}],id:x.id})}))}}},"./client/fx/ux/richtexteditor/extensions/listitem/listitemnode.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n("./node_modules/tiptap-commands/dist/commands.esm.js"),r=n("./client/fx/ux/richtexteditor/nodeextension.js");class i extends r.NodeExtension{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:e}){return{Enter:(0,o.splitListItem)(e),Tab:(0,o.sinkListItem)(e),"Shift-Tab":(0,o.liftListItem)(e)}}}},"./client/fx/ux/richtexteditor/extensions/mediapicker/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{MediaPickerEditorExtension:()=>V});var o=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),r=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),i=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),s=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),a=n("./client/fx/ux/richtexteditor/toolbarextension.js"),l=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),c=n("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),u=n("./client/fx/ux/messaging/internaltopics.js"),h=Object.defineProperty,p=Object.getOwnPropertyDescriptor,f=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?p(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&h(t,n,i),i};let m=class extends a.ToolbarExtension{constructor(){super(...arguments),this.showAddMedia=!1,this.isPastingMedia=!1}created(){this.mediaPicker&&(this.selectedMedia.selectedMedia=this.mediaPicker.selectedMedia,this.editor.on("paste",((e,t)=>this.onRTEPastingImage(t))))}mounted(){}beforeDestroy(){}isImageContent(e){return!(e&&!e.value)&&!(!e||!e.value.imageSrc)}dispatchHandler(e){this.menubar.commands.mediaPicker({mediaWidth:this.selectedMedia?.mediaWidth,media:e,replacePosition:this.selectedMedia?this.selectedMedia.position:null}),this.onContentChanged&&this.onContentChanged(this.editor.getHTML()),this.showAddMedia=!1,this.selectedMedia.selectedMedia=null,this.selectedMedia.position=null}insertMediaCmd(e,t=!1){this.isPastingMedia=t,this.showAddMedia=!0}closed(){this.showAddMedia=!1,this.selectedMedia.selectedMedia=null,this.mediaPicker&&this.mediaPicker.closed&&this.mediaPicker.closed()}saveSelectedMedia(e){this.dispatchHandler(e),this.mediaPicker&&this.mediaPicker.saved&&this.mediaPicker.saved(e)}configureProviders(e){let t=e;if(this.mediaPicker.providerConfiguration&&(t=this.mediaPicker.providerConfiguration(e)),this.isPastingMedia){const e=o.Constants.ux.components.mediaPicker.providerIds.myComputer.toString();if(t.length>1){if(t[0].id.toString()===e)return t;const n=t.findIndex((t=>t.id.toString()==e));-1!==n&&t.splice(n,1)}t.unshift(new o.MediaPickerMyComputerProvider)}return t}onRTEPastingImage(e){e.clipboardData.files.length>0&&(this.insertMediaCmd(this.menubar.commands,!0),u.InternalTopics.MediaPicker.PastingImagetoProvider.publish(e.clipboardData.files[0]))}render(){return(0,r.h)("span",[(0,r.h)("omfx-button",{domProps:{onClick:()=>{this.insertMediaCmd(this.menubar.commands)},icon:{iconType:new o.FontAwesomeIcon("insert_photo")},preset:c.ButtonPresets.base.smallIcon,tooltip:{text:this.loc.Tooltip.Image,position:o.ButtonTooltipPosition.Bottom}},attrs:{contentClass:"ma-0"}}),this.mediaPicker&&(this.showAddMedia||this.selectedMedia.selectedMedia)&&(0,r.h)("omfx-dialog",{attrs:{valueBind:{visible:!0},position:c.DialogPositions.FullScreen}},[(0,r.h)("omfx-media-picker",{attrs:{providerContext:this.mediaPicker.providerContext,selectedMedia:this.selectedMedia.selectedMedia,providerConfiguration:this.configureProviders,imageSettings:this.mediaPicker.imageSettings,saved:this.saveSelectedMedia,closed:this.closed,selectableMediaTypes:this.mediaPicker.selectableMediaTypes}})])])}};f([(0,s.Prop)()],m.prototype,"menubar",2),f([(0,s.Prop)()],m.prototype,"onContentChanged",2),f([(0,s.Prop)()],m.prototype,"editor",2),f([(0,s.Prop)()],m.prototype,"selectedMedia",2),f([(0,s.Prop)()],m.prototype,"mediaPicker",2),f([(0,d.Localize)(l.RichTextEditorExtensionLocalization.namespace)],m.prototype,"loc",2),m=f([i.default],m);var g=n("./client/fx/ux/richtexteditor/nodeextension.js"),v=n("./node_modules/tiptap-commands/dist/commands.esm.js");class y extends g.NodeExtension{get name(){return"mediaimagenode"}get schema(){return{attrs:{src:{default:null},alt:{default:null},width:{default:null},height:{default:null},style:{default:null},class:{default:null}},inline:!0,group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["img",e.attrs]}}commands({type:e}){return()=>(0,v.setBlockType)(e)}}var b=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),x=n.n(b),w=n("./node_modules/prosemirror-model/dist/index.js"),k=n("./node_modules/prosemirror-state/dist/index.js"),S=n("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac");n("./client/fx/ux/richtexteditor/extensions/mediapicker/images/tight.svg"),n("./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-align-around-center.svg"),n("./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-behind-center.svg"),n("./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-inline-center.svg"),n("./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-infront-center.svg");class M{constructor(e){this.svgHtml=e,this.omniaImageId=-1,this.omniaServiceId=null,this.fileName=null,this.altText=null,this.omniaMediaType=o.MediaPickerEnums.OmniaMediaTypes.Image}}class C{constructor(e){this.html=e,this.omniaMediaType=o.MediaPickerEnums.OmniaMediaTypes.Video,this.thumbnailUrl=null,this.autoPlay=!1,this.startTime=null,this.mute=!1,this.youtubeUrl="https://www.youtube.com",this.microsoftStreamUrl="https://web.microsoftstream.com",this.html=e.replace(/<p>/g,"<div>").replace(/<\/\p>/g,"</div>");const t=document.createElement("div");t.innerHTML=this.html;const n=t.getElementsByTagName("iframe")[0].src;n&&n.startsWith(this.youtubeUrl)?this.initDataForYouTubeProvider(n):n&&n.startsWith(this.microsoftStreamUrl)&&this.initDataForMicrosoftStreamProvider(n)}initDataForYouTubeProvider(e){const t=e.split("/").pop().split("?").shift();this.thumbnailUrl="https://img.youtube.com/vi/"+t+"/maxresdefault.jpg",this.videoUrl=`${this.youtubeUrl}/watch?v=${t}`}initDataForMicrosoftStreamProvider(e){const t=e.split("/").pop().split("?").shift();this.thumbnailUrl="",this.videoUrl=`${this.microsoftStreamUrl}/video/${t}`}}class E extends g.NodeExtension{constructor(e){super(),this.onMediaSelected=e,this.mediaPickerService=d.ServiceContainer.createInstance(S.MediaPickerService)}get name(){return"mediaPicker"}get schema(){return{attrs:{style:{default:null},imageStyle:{default:null},videoStyle:{default:null},omfxmpc:{default:""},contenteditable:{default:"false"},id:{default:null},class:{default:""},omfxdata:{default:""},imagedata:{default:null},videodata:{default:null},link:{default:null},legacysvghtml:{default:null},wrapperclass:{default:null}},content:"block*",group:"block",isolating:!0,draggable:!0,atom:!0,parseDOM:[{tag:"div[omfxmpc]",getAttrs:e=>{let t={};const n=e.getAttribute("omfxdata");if(n){const r=JSON.parse(n);t=r.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?{imagedata:n,imageStyle:e.getAttribute(I.imageStyle)||e.getElementsByTagName("img")[0].getAttribute("style"),style:e.getAttribute("style"),class:e.getAttribute("class")}:r.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Video||r.videoUrl?{videodata:n,videoStyle:e.getAttribute(I.videoStyle)||e.getElementsByTagName("iframe")[0].getAttribute("style"),style:e.getAttribute("style"),class:e.getAttribute("class")}:{imagedata:JSON.stringify(new M(e.innerHTML)),style:e.getAttribute("style"),class:e.getAttribute("class")}}else{t=e.getElementsByTagName("image")[0]?{imagedata:JSON.stringify(new M(e.innerHTML)),style:e.getAttribute("style"),class:e.getAttribute("class")}:{videodata:JSON.stringify(new C(e.innerHTML)),videoStyle:e.getAttribute(I.videoStyle),style:e.getAttribute("style"),class:e.getAttribute("class")}}return t}},{tag:"a > omfx-media-picker-image",getAttrs:e=>{const t=e.parentElement;let n={};return t&&(n={imagedata:e.getAttribute("imagedata"),imageStyle:e.getAttribute("imageStyle"),class:e.getAttribute("class"),style:e.getAttribute("style"),link:{url:t.getAttribute("href"),openInNewWindow:"_blank"==t.getAttribute("target"),title:t.getAttribute("title")}}),n}},{tag:"omfx-media-picker-image",getAttrs:e=>({imagedata:e.getAttribute("imagedata"),imageStyle:e.getAttribute(I.imageStyle),class:e.getAttribute("class"),style:e.getAttribute("style")})},{tag:"omfx-media-picker-video",getAttrs:e=>({videodata:e.getAttribute("videodata"),videoStyle:e.getAttribute(I.videoStyle),class:e.getAttribute("class"),style:e.getAttribute("style")})}],toDOM:e=>{let t,n,o;return e.attrs.imagedata&&(n="omfx-media-picker-image",o={imagedata:e.attrs.imagedata,imageStyle:e.attrs.imageStyle,style:e.attrs.style,class:e.attrs.class},e.attrs.link&&(t=["div",{class:e.attrs.wrapperclass},["a",{href:e.attrs.link.url,target:e.attrs.link.openInNewWindow?"_blank":"_self",title:e.attrs.link.title},[n,o]]])),e.attrs.videodata?(n="omfx-media-picker-video",o={videodata:e.attrs.videodata,videoStyle:e.attrs.videoStyle,style:e.attrs.style,class:e.attrs.class}):e.attrs.legacysvghtml&&(n="omfx-media-picker-image",o={legacysvghtml:e.attrs.legacysvghtml,style:e.attrs.style,class:e.attrs.class}),t||(t=["div",{class:e.attrs.wrapperclass},[n,o]]),t}}}commands({type:e}){return t=>(n,r)=>{const{selection:i}=n,s=i.$cursor?i.$cursor.pos:i.$to.pos,a=document.createElement("div");if(t.media&&t.media.omniaMediaType==o.MediaPickerEnums.OmniaMediaTypes.Image){d.MigrationUtils.migrateMediaPickerMedia(t.media);const e=document.createElement("omfx-media-picker-image");e.setAttribute("imagedata",JSON.stringify(t.media)),a.appendChild(e)}else if(t.media&&t.media.omniaMediaType==o.MediaPickerEnums.OmniaMediaTypes.Video){const e=document.createElement("omfx-media-picker-video");e.setAttribute("videodata",JSON.stringify(t.media)),a.appendChild(e)}else{let e;a.hasChildNodes()&&(e=a.firstChild);const o=a.getElementsByTagName("svg").length>0?a.getElementsByTagName("svg"):a.getElementsByTagName("img");if(o.length>0){const r=o[0];if(t.replacePosition>=0){const o=n.tr.doc.resolve(t.replacePosition),i=new k.NodeSelection(o);e.style.cssText=i.node.attrs.style,e.classList.value=i.node.attrs.class,r.style.cssText=i.node.content.content[0].attrs.style,r.classList.value=i.node.content.content[0].attrs.class}}}if(t.replacePosition){const o=n.tr.doc.resolve(t.replacePosition.pos),i=new k.NodeSelection(o),s=w.DOMParser.fromSchema(e.schema).parse(a);r(n.tr.deleteRange(i.$from.pos,i.$to.pos).insert(o.pos,s))}else{const t=w.DOMParser.fromSchema(e.schema).parse(a);if(t){r(n.tr.insert(s,t))}}}}get view(){const e=this;return{props:["node","updateAttrs","view","getPos","editor"],data:()=>({isInitNode:!1,leftPosition:0,isShowMenu:!1,widthOptions:T.Reponsive,textFlowOption:O.TopAndBottomText,mediaAlignmentOption:A.LeftMedia,mediaWidth:0,mediaWidthModel:{show:!1},textFlowModel:{show:!1},localizeText:{mediaWidth:"",alignLeft:"",reponsive:"",fixedWidth:"",alignCenter:"",alignRight:"",textFlow:"",textFlowOption:"",square:"",tight:"",topbottom:"",behind:"",above:"",buttons:{cancel:"",save:""}},omniaUrlEndpoint:"",isAllowAddLinkToMediaPickerNode:!1,subscriptionHandler:null}),methods:{transformVSlot(e){const t=[];return Object.keys(e).forEach((n=>{let o=!1,r=n;0===r.indexOf("proxy-")&&(o=!0,r=r.replace("proxy-","")),t.push(o?{key:r,fn:e[n],proxy:!0}:{key:r,fn:e[n]})})),{scopedSlots:this._u(t)}},handleDelete(e){e.preventDefault();const t=this.view.state.tr,n=t.doc.resolve(this.getPos()),o=new k.NodeSelection(n),r=t.deleteRange(o.$from.pos,o.$to.pos);this.view.dispatch(r)},handleEdit(t){t.preventDefault();const n=this.view.state.tr.doc.resolve(this.getPos()),o={selectedMedia:d.Utils.clone(this.content),position:n,mediaWidth:this.mediaWidth};e.onMediaSelected(o)},addLink(e){e.preventDefault(),c.Topics.MediaPickerRTEHandler.doAction.publish({nodeId:this.content.omniaImageId,editorId:this.editor.omniaRTFId})},removeLink(e){e.preventDefault();const t={nodeId:this.content.omniaImageId};c.Topics.MediaPickerRTEHandler.onCompleteAction.publish(t)},setMediaWidth(e){e&&e.nodeType||(e=this.getDomFromNode());const t=this.getImageElementFromDomNode(e),n=this.getVideoElementFromDomNode(e);if(e){if(this.widthOptions===T.Reponsive)this.mediaWidth=0,this.textFlowOption=O.TopAndBottomText,this.textFlowOption=O.TopAndBottomText,t.style.width="100%",t.style.paddingLeft="0",n.style.paddingLeft="0",e.removeAttribute("class");else switch(t.style.width="0px",n.style.width="0px",this.mediaAlignmentOption){case A.LeftMedia:this.initAlignClassAndPadding(e,R.LeftMedia);break;case A.CenterMedia:this.initAlignClassAndPadding(e,R.CenterMedia);break;case A.RightMedia:this.initAlignClassAndPadding(e,R.RightMedia)}this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?(t.style.width=this.widthOptions===T.Reponsive||0===this.mediaWidth?"100%":`${this.mediaWidth}px`,t.style.height="auto",e.setAttribute(I.imageStyle,t.getAttribute("style"))):(e.style.padding="0",n.style.width=this.widthOptions===T.Reponsive?"100%":`${this.mediaWidth}px`,n.style.height=this.widthOptions===T.Reponsive?"100%":this.mediaWidth/(16/9)+"px",n.style.paddingBottom=this.widthOptions===T.Reponsive?"56.25%":this.mediaWidth/(16/9)+"px",n.style.position="relative",e.setAttribute(I.videoStyle,n.getAttribute("style"))),this.applyStyleChanges(e)}this.getMediaLeftPosition(),this.mediaWidthModel.show=!1},initOption(){if(this.content){this.isInitNode=!0;let e="",t="",n="100%";const r=this.getDomFromNode();if(this.removeIncorrectStyleInLegacyMedia(r),r&&r.classList&&r.classList.forEach((n=>{n.includes("media-")?e=n.trim():t=n.trim()})),this.content.omniaMediaType==o.MediaPickerEnums.OmniaMediaTypes.Image){n=this.getImageElementFromDomNode(r).style.width}else{n=this.getVideoElementFromDomNode(r).style.width}switch(n&&"100%"!==n?(this.widthOptions=T.FixedWidth,this.mediaWidth=n.replace("px","")):this.widthOptions=T.Reponsive,t){case N.SquareText:this.textFlowOption=O.SquareText;break;case N.TightText:this.textFlowOption=O.TightText;break;case N.TopAndBottomText:this.textFlowOption=O.TopAndBottomText;break;case N.BehindText:this.textFlowOption=O.BehindText;break;case N.AboveText:this.textFlowOption=O.AboveText}switch(e){case R.LeftMedia:this.mediaAlignmentOption=A.LeftMedia;break;case R.CenterMedia:this.mediaAlignmentOption=A.CenterMedia;break;case R.RightMedia:this.mediaAlignmentOption=A.RightMedia}return this.setMediaWidth(r),this.applyMediaAlignChanges(r),this.applyTextFlowChanges(r),this.isInitNode=!1,r}},removeIncorrectStyleInLegacyMedia(e){e.style.height=null;const t=e.getElementsByTagName("svg")[0];t&&(t.style.position=null)},closeWidthSelection(){this.mediaWidthModel.show=!1},closeTextFlowSelection(){this.textFlowModel.show=!1},setLeftAlignment(e){this.mediaAlignmentOption=A.LeftMedia,e&&e.nodeType||(e=this.getDomFromNode()),this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?this.initAlignClassAndPadding(e,R.LeftMedia):this.initAlignClassAndPadding(e,R.LeftMedia,!1),this.applyStyleChanges(e),this.applyTextFlowChanges(e),this.getMediaLeftPosition()},setCenterAlignment(e){this.mediaAlignmentOption=A.CenterMedia,e&&e.nodeType||(e=this.getDomFromNode()),this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?this.initAlignClassAndPadding(e,R.CenterMedia):this.initAlignClassAndPadding(e,R.CenterMedia,!1),this.applyStyleChanges(e),this.applyTextFlowChanges(e),this.getMediaLeftPosition()},setRightAlignment(e){this.mediaAlignmentOption=A.RightMedia,e&&e.nodeType||(e=this.getDomFromNode()),this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?this.initAlignClassAndPadding(e,R.RightMedia):this.initAlignClassAndPadding(e,R.RightMedia,!1),this.applyStyleChanges(e),this.applyTextFlowChanges(e),this.getMediaLeftPosition()},setSquareText(e){if(this.textFlowOption=O.SquareText,this.widthOptions===T.Reponsive)return;e&&e.nodeType||(e=this.getDomFromNode());const t=this.getImageElementFromDomNode(e),n=this.getVideoElementFromDomNode(e);this.initTextFlowClassAndPadding(e,N.SquareText),e.classList.contains(R.LeftMedia)?e.style.paddingRight="14px":e.classList.contains(R.RightMedia)&&(e.style.paddingLeft="14px"),e.style.width="unset",this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?(t.style.zIndex="unset",t.style.position="relative",t.style.maxWidth="100%",e.setAttribute(I.imageStyle,t.getAttribute("style"))):(n.style.zIndex="unset",n.style.position="relative",e.setAttribute(I.videoStyle,n.getAttribute("style"))),this.applyStyleChanges(e),this.getMediaLeftPosition(),this.textFlowModel.show=!1},setTightText(e){if(this.textFlowOption=O.TightText,this.widthOptions===T.Reponsive)return;e&&e.nodeType||(e=this.getDomFromNode());const t=this.getImageElementFromDomNode(e),n=this.getVideoElementFromDomNode(e);this.initTextFlowClassAndPadding(e,N.TightText),e.style.width="unset",this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?(t.style.zIndex="unset",t.style.position="relative",t.style.maxWidth="100%",e.setAttribute(I.imageStyle,t.getAttribute("style"))):(e.style.padding="0",n.style.zIndex="unset",n.style.position="relative",e.setAttribute(I.videoStyle,n.getAttribute("style"))),this.applyStyleChanges(e),this.getMediaLeftPosition(),this.textFlowModel.show=!1},setTopAndBottomText(e){this.textFlowOption=O.TopAndBottomText,e&&e.nodeType||(e=this.getDomFromNode());const t=this.getImageElementFromDomNode(e),n=this.getVideoElementFromDomNode(e);this.initTextFlowClassAndPadding(e,N.TopAndBottomText),e.style.width="100%",this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?(t.style.zIndex="unset",t.style.position="relative",t.style.maxWidth="100%",e.setAttribute(I.imageStyle,t.getAttribute("style"))):(e.style.padding="0",n.style.zIndex="unset",n.style.position="relative",e.setAttribute(I.videoStyle,n.getAttribute("style"))),this.applyStyleChanges(e),this.getMediaLeftPosition(),this.textFlowModel.show=!1},setBehindText(e){if(this.textFlowOption=O.BehindText,this.widthOptions===T.Reponsive)return;e&&e.nodeType||(e=this.getDomFromNode());const t=this.getImageElementFromDomNode(e),n=this.getVideoElementFromDomNode(e);this.initTextFlowClassAndPadding(e,N.BehindText),e.style.paddingRight="0px",e.style.paddingLeft="0px",e.style.paddingBottom=`${this.getMediaClientRect().height}px`,e.style.width="unset",this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?(t.style.zIndex="-1",t.style.position="absolute",t.style.maxWidth="unset",e.setAttribute(I.imageStyle,t.getAttribute("style"))):(n.style.position="absolute",n.style.zIndex="-1",e.setAttribute(I.videoStyle,n.getAttribute("style"))),this.applyStyleChanges(e),this.getMediaLeftPosition(),this.textFlowModel.show=!1},setAboveText(e){if(this.textFlowOption=O.AboveText,this.widthOptions===T.Reponsive)return;e&&e.nodeType||(e=this.getDomFromNode());const t=this.getImageElementFromDomNode(e),n=this.getVideoElementFromDomNode(e);this.initTextFlowClassAndPadding(e,N.AboveText),e.style.paddingRight="0px",e.style.paddingLeft="0px",e.style.paddingBottom=`${this.getMediaClientRect().height}px`,e.style.width="unset",this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?(t.style.zIndex="unset",t.style.position="absolute",t.style.maxWidth="unset",e.setAttribute(I.imageStyle,t.getAttribute("style"))):(n.style.position="absolute",n.style.zIndex="1",e.setAttribute(I.videoStyle,n.getAttribute("style"))),this.applyStyleChanges(e),this.getMediaLeftPosition(),this.textFlowModel.show=!1},removeAlignClasses(e,t){const n=[R.LeftMedia,R.CenterMedia,R.RightMedia].filter((e=>e!==t));this.removeClassProperties(e,n)},removeTextFlowClasses(e,t){const n=[N.InlineText,N.SquareText,N.TightText,N.ThroughText,N.TopAndBottomText,N.BehindText,N.AboveText].filter((e=>e!==t));this.removeClassProperties(e,n)},removeClassProperties(e,t){for(let n=0;n<t.length;n++)e.classList.remove(t[n])},getDomFromNode(){const e=w.DOMSerializer.fromSchema(this.node.type.schema).serializeNode(this.node),t=this.node.attrs.imageStyle||(this.node.content.content[0]?this.node.content.content[0].attrs.style:"");t&&e.setAttribute(I.imageStyle,t);const n=this.node.attrs.videoStyle||(this.node.content.content[0]?this.node.content.content[0].attrs.style:"");n&&e.setAttribute(I.videoStyle,n);const o=this.node.attrs.class||(this.node.content.content[0]?this.node.content.content[0].attrs.class:"");return o&&e.setAttribute("class",o),e},getImageElementFromDomNode(e){const t=document.createElement("div"),n=e.getAttribute(I.imageStyle);return e&&n&&t.setAttribute("style",n),t},getVideoElementFromDomNode(e){const t=document.createElement("div"),n=e.getAttribute(I.videoStyle);return e&&n&&t.setAttribute("style",n),t},applyStyleChanges(e){this.isInitNode||(this.updateAttrs({class:e.className,style:e.getAttribute("style"),imageStyle:e.getAttribute(I.imageStyle),videoStyle:e.getAttribute(I.videoStyle),wrapperclass:this.widthOptions===T.Reponsive||this.textFlowOption==O.TopAndBottomText?"omfx-medianode-allow-paragraph-bellow":null}),this.isShowMenu=!1)},applyTextFlowChanges(e){switch(this.textFlowOption){case O.SquareText:this.setSquareText(e);break;case O.TightText:this.setTightText(e);break;case O.TopAndBottomText:this.setTopAndBottomText(e);break;case O.BehindText:this.setBehindText(e);break;case O.AboveText:this.setAboveText(e)}},applyMediaAlignChanges(e){switch(this.mediaAlignmentOption){case A.LeftMedia:this.setLeftAlignment(e);break;case A.CenterMedia:this.setCenterAlignment(e);break;case A.RightMedia:this.setRightAlignment(e)}},getMediaClientRect(){return this.$el?this.$el.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0}},getMediaLeftPosition(){let e=null;if(this.$el&&this.widthOptions!==T.Reponsive){const t=setInterval((()=>{if(e=this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image?this.$el.getElementsByTagName("img")[0]:this.$el.getElementsByTagName("iframe")[0],e){if(this.leftPosition=e.getBoundingClientRect().left-this.$el.getBoundingClientRect().left,this.mediaAlignmentOption==A.RightMedia)switch(this.textFlowOption){case O.SquareText:case O.TightText:this.leftPosition=0;break;case O.AboveText:case O.BehindText:this.leftPosition=-e.getBoundingClientRect().width}clearInterval(t)}}),100)}else this.leftPosition=0},getMediaWidth(){let e=parseInt(this.mediaWidth);return 0==e&&(e=this.getMediaClientRect().width),e},resetStyle(e){this.resetPadding(e)},resetPadding(e){e.style.paddingTop="0px",e.style.paddingRight="0px",e.style.paddingBottom="0px",e.style.paddingLeft="0px"},initTextFlowClassAndPadding(e,t){e.classList.add(t),this.removeTextFlowClasses(e,t),this.resetStyle(e)},initAlignClassAndPadding(e,t,n=!0){e.classList.add(t),this.removeAlignClasses(e,t),n&&this.resetStyle(e)},renderOptions(){const e=e=>{e.preventDefault()};let t=null;if(this.content){const n=null!=this.content.svgHtml;t=(0,r.h)("div",{class:"omfx-medianode media-toolbar",style:`left: ${this.leftPosition}px`},[this.isAllowAddLinkToMediaPickerNode&&this.content.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image&&(0,r.h)("v-btn",{on:{click:this.link?this.removeLink:this.addLink},class:"mt-2 ml-2",attrs:{dark:!0,small:!0,depressed:!0,fab:!0,color:"rgba(0,0,0,0.5)"}},[(0,r.h)("v-icon",[this.link?"far fa-unlink":"far fa-link"])]),(0,r.h)("v-btn",{on:{click:this.handleEdit},class:"mt-2 ml-2",attrs:{dark:!0,small:!0,depressed:!0,fab:!0,color:"rgba(0,0,0,0.5)"}},[(0,r.h)("v-icon",["edit"])]),(0,r.h)("v-btn",{on:{click:this.handleDelete},class:"mt-2 ml-2",attrs:{dark:!0,small:!0,depressed:!0,fab:!0,color:"rgba(0,0,0,0.5)"}},[(0,r.h)("v-icon",["delete"])]),n?(0,r.h)("v-tooltip",x()([{attrs:{top:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:e},class:"mt-2 ml-2",attrs:{dark:!0,small:!0,depressed:!0,fab:!0,color:"rgba(0,0,0,0.5)"}}]),[(0,r.h)("v-icon",["fa fa-exclamation"])])]}})]),[(0,r.h)("span",[this.localizeText.stopSupportSVG])]):(0,r.h)("v-menu",x()([{attrs:{"close-on-content-click":!1,"close-on-click":!1,transition:"slide-x-transition",right:!0,"content-class":"omfx-medianode-menu-group",attach:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:e},class:"mt-2 ml-2",attrs:{dark:!0,small:!0,depressed:!0,fab:!0,color:"rgba(0,0,0,0.5)"},style:{opacity:this.isShowMenu?0:1}}]),[(0,r.h)("v-icon",["more_vert"])])]}}),{model:{value:this.isShowMenu,callback:e=>{this.isShowMenu=e}}}]),[(0,r.h)("v-menu",x()([{attrs:{"close-on-content-click":!1,"nudge-width":"170","nudge-left":"-10","min-width":"170","close-on-click":!1,"offset-x":!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const o={on:t.on};return[(0,r.h)("v-btn",x()([{},o,{},n,{on:{click:e},attrs:{icon:!0,dark:!0,small:!0},class:"ml-0"}]),[(0,r.h)("v-icon",{attrs:{small:!0}},["fal fa-arrows-h"])])]}})]),[(0,r.h)("span",[this.localizeText.mediaWidth])])]}}),{model:{value:this.mediaWidthModel.show,callback:e=>{this.$set(this.mediaWidthModel,"show",e)}}}]),[(0,r.h)("v-card",{class:"text-option"},[(0,r.h)("div",{class:"text-option-title"},[this.localizeText.mediaWidth]),(0,r.h)("v-radio-group",{attrs:{dense:!0},on:{change:e=>{this.widthOptions=e}},model:{value:this.widthOptions,callback:e=>{this.widthOptions=e}}},[(0,r.h)("v-radio",{attrs:{label:this.localizeText.reponsive,value:T.Reponsive}}),(0,r.h)("v-radio",{attrs:{label:this.localizeText.fixedWidth,value:T.FixedWidth}})]),this.widthOptions===T.FixedWidth&&(0,r.h)("v-text-field",{attrs:{suffix:"px",type:"number",dense:!0},model:{value:this.mediaWidth,callback:e=>{this.mediaWidth=e}}}),(0,r.h)("v-card-actions",[(0,r.h)("v-spacer"),(0,r.h)("v-btn",{attrs:{depressed:!0,small:!0},on:{click:t=>{e(t),this.closeWidthSelection()}}},[this.localizeText.buttons.cancel]),(0,r.h)("v-btn",{attrs:{depressed:!0,small:!0,disabled:this.widthOptions===T.FixedWidth&&0===parseInt(this.mediaWidth)},on:{click:t=>{e(t),this.setMediaWidth()}}},[this.localizeText.buttons.save])])])]),(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{directives:[{name:"show",value:this.widthOptions===T.FixedWidth}],on:{click:t=>{e(t),this.setLeftAlignment()}},attrs:{icon:!0,dark:!0,small:!0},class:"ml-0"}]),[(0,r.h)("v-icon",{attrs:{small:!0}},["format_align_left"])])]}})]),[(0,r.h)("span",[this.localizeText.alignLeft])]),(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{directives:[{name:"show",value:this.widthOptions===T.FixedWidth}],on:{click:t=>{e(t),this.setCenterAlignment()}},attrs:{icon:!0,dark:!0,small:!0},class:"ml-0"}]),[(0,r.h)("v-icon",{attrs:{small:!0}},["format_align_center"])])]}})]),[(0,r.h)("span",[this.localizeText.alignCenter])]),(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{directives:[{name:"show",value:this.widthOptions===T.FixedWidth}],on:{click:t=>{e(t),this.setRightAlignment()}},attrs:{icon:!0,dark:!0,small:!0},class:"ml-0"}]),[(0,r.h)("v-icon",{attrs:{small:!0}},["format_align_right"])])]}})]),[(0,r.h)("span",[this.localizeText.alignRight])]),(0,r.h)("v-menu",x()([{directives:[{name:"show",value:this.widthOptions===T.FixedWidth}],attrs:{"close-on-content-click":!1,"close-on-click":!1,"nudge-width":"170","nudge-left":"-10","min-width":"170","offset-x":!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const o={on:t.on};return[(0,r.h)("v-btn",x()([{},o,{},n,{on:{click:e},directives:[{name:"show",value:this.widthOptions===T.FixedWidth}],attrs:{icon:!0,dark:!0,small:!0},class:"ml-0"}]),[(0,r.h)("v-icon",{attrs:{small:!0}},["ms-Icon ms-Icon--ContactCard"])])]}})]),[(0,r.h)("span",[this.localizeText.textFlow])])]}}),{model:{value:this.textFlowModel.show,callback:e=>{this.$set(this.textFlowModel,"show",e)}}}]),[(0,r.h)("v-card",{class:"text-option"},[(0,r.h)("div",{class:"text-option-title"},[this.localizeText.textFlowOption]),(0,r.h)("v-row",{attrs:{"no-gutters":!0}},[(0,r.h)("v-col",{attrs:{cols:"4"}},[(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:t=>{e(t),this.setSquareText()}},attrs:{icon:!0},class:"ml-0"}]),[(0,r.h)("v-avatar",{attrs:{size:"24"}},[(0,r.h)("v-img",{attrs:{tabindex:"-1",src:`${this.omniaUrlEndpoint}/omnia/images/left-inline-center.svg`}})])])]}})]),[(0,r.h)("span",[this.localizeText.square])])]),(0,r.h)("v-col",{attrs:{cols:"4"}},[(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:t=>{e(t),this.setTightText()}},attrs:{icon:!0},class:"ml-0"}]),[(0,r.h)("v-avatar",{attrs:{size:"24"}},[(0,r.h)("v-img",{attrs:{tabindex:"-1",src:`${this.omniaUrlEndpoint}/omnia/images/tight.svg`}})])])]}})]),[(0,r.h)("span",[this.localizeText.tight])])]),(0,r.h)("v-col",{attrs:{cols:"4"}},[(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:t=>{e(t),this.setTopAndBottomText()}},attrs:{icon:!0},class:"ml-0"}]),[(0,r.h)("v-avatar",{attrs:{size:"24"}},[(0,r.h)("v-img",{attrs:{tabindex:"-1",src:`${this.omniaUrlEndpoint}/omnia/images/left-align-around-center.svg`}})])])]}})]),[(0,r.h)("span",[this.localizeText.topbottom])])])]),(0,r.h)("v-row",{attrs:{"no-gutters":!0}},[(0,r.h)("v-col",{attrs:{cols:"4"}},[(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:t=>{e(t),this.setBehindText()}},attrs:{icon:!0},class:"ml-0"}]),[(0,r.h)("v-avatar",{attrs:{size:"24"}},[(0,r.h)("v-img",{attrs:{tabindex:"-1",src:`${this.omniaUrlEndpoint}/omnia/images/left-behind-center.svg`}})])])]}})]),[(0,r.h)("span",[this.localizeText.behind])])]),(0,r.h)("v-col",{attrs:{cols:"4"}},[(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:t=>{e(t),this.setAboveText()}},attrs:{icon:!0},class:"ml-0"}]),[(0,r.h)("v-avatar",{attrs:{size:"24"}},[(0,r.h)("v-img",{attrs:{tabindex:"-1",src:`${this.omniaUrlEndpoint}/omnia/images/left-infront-center.svg`}})])])]}})]),[(0,r.h)("span",[this.localizeText.above])])])])])]),(0,r.h)("v-tooltip",x()([{attrs:{bottom:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,r.h)("v-btn",x()([{},n,{on:{click:t=>{e(t),this.isShowMenu=!1}},attrs:{icon:!0,dark:!0,small:!0},class:"ml-0"}]),[(0,r.h)("v-icon",{attrs:{small:!0}},["close"])])]}})]),[(0,r.h)("span",[this.localizeText.buttons.cancel])])])])}return t}},watch:{content:function(e){const t=this.initOption();t&&this.$nextTick((()=>{this.applyStyleChanges(t)}))}},computed:{content:{get(){let e=null;return this.node.attrs.imagedata?e=JSON.parse(this.node.attrs.imagedata):this.node.attrs.videodata&&(e=JSON.parse(this.node.attrs.videodata)),e}},link:{get(){let e=null;return this.node.attrs.link&&(e=this.node.attrs.link),e}}},created(){const e=d.ServiceContainer.createInstance(S.LocalizationService);this.localizeText={mediaWidth:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.MediaWidth"),alignLeft:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.Left"),reponsive:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.Reponsive"),fixedWidth:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.FixedWidth"),alignCenter:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.Center"),alignRight:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.Right"),textFlow:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.TextFlow"),textFlowOption:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.TextFlowOption"),square:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.Square"),tight:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.Tight"),topbottom:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.TopAndBottom"),behind:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.BehindText"),above:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.InFrontOfText"),stopSupportSVG:e.get("Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Node.StopSupportSVG"),buttons:{cancel:e.get("Omnia.Ux.Common.Buttons.Cancel"),save:e.get("Omnia.Ux.Common.Buttons.Save")}},this.omniaUrlEndpoint=d.ServiceLocator.getUrl(o.OmniaService.Id,!0),this.isAllowAddLinkToMediaPickerNode=!1,this.subscriptionHandler=c.Topics.MediaPickerRTEHandler.allowAction.subscribe((e=>{this.isAllowAddLinkToMediaPickerNode=e})),this.subscriptionHandler.add(c.Topics.MediaPickerRTEHandler.onCompleteAction.subscribe((e=>{if(e){const t=JSON.parse(this.node.attrs.imagedata);if(t&&e.nodeId==t.omniaImageId){const t=document.createElement("div");if(e.url){const n=document.createElement("a");n.setAttribute("href",e.url),n.setAttribute("target",e.openInNewWindow?"_blank":"_self"),n.setAttribute("title",e.title);const o=document.createElement("omfx-media-picker-image");o.setAttribute("imagedata",this.node.attrs.imagedata),o.setAttribute("imageStyle",this.node.attrs.imageStyle),o.setAttribute("style",this.node.attrs.style),o.setAttribute("class",this.node.attrs.class),n.appendChild(o),t.appendChild(n)}else{const e=document.createElement("omfx-media-picker-image");e.setAttribute("imagedata",this.node.attrs.imagedata),e.setAttribute("imageStyle",this.node.attrs.imageStyle),e.setAttribute("style",this.node.attrs.style),e.setAttribute("class",this.node.attrs.class),t.appendChild(e)}const n=this.view.state.tr,o=n.doc.resolve(this.getPos()),r=new k.NodeSelection(o),i=w.DOMParser.fromSchema(this.node.type.schema).parse(t),s=n.deleteRange(r.$from.pos,r.$to.pos).insert(o.pos,i);this.view.dispatch(s)}}c.Topics.MediaPickerRTEHandler.onCompleteAction.clearMessageCache()})))},mounted(){const e=this.initOption();e&&this.$nextTick((()=>{this.applyStyleChanges(e)}))},beforeDestroy(){this.subscriptionHandler&&this.subscriptionHandler.unsubscribe(),c.Topics.MediaPickerRTEHandler.doAction.clearMessageCache()},render(){const e=this.content,t=this.link;let n=null;if(e)if(e.omniaMediaType===o.MediaPickerEnums.OmniaMediaTypes.Image){const o=(0,r.h)("omfx-media-picker-image",{class:this.node.attrs.class,style:this.node.attrs.style,domProps:{imageStyle:this.node.attrs.imageStyle,image:e}},[this.renderOptions()]);n=t?(0,r.h)("a",{attrs:{href:t.url,target:t.openInNewWindow?"_blank":"_self",title:t.title}},[o]):o}else n=(0,r.h)("omfx-media-picker-video",{class:this.node.attrs.class,style:this.node.attrs.style,attrs:{videoStyle:this.node.attrs.videoStyle},domProps:{video:e}},[this.renderOptions()]);return(0,r.h)("div",{class:this.node.attrs.wrapperclass},[" ",n," "])}}}}var T=(e=>(e[e.Reponsive=0]="Reponsive",e[e.FixedWidth=1]="FixedWidth",e))(T||{}),O=(e=>(e[e.SquareText=0]="SquareText",e[e.TightText=1]="TightText",e[e.TopAndBottomText=2]="TopAndBottomText",e[e.BehindText=3]="BehindText",e[e.AboveText=4]="AboveText",e))(O||{}),A=(e=>(e[e.LeftMedia=0]="LeftMedia",e[e.CenterMedia=1]="CenterMedia",e[e.RightMedia=2]="RightMedia",e))(A||{});const R={LeftMedia:"media-left",CenterMedia:"media-centered",RightMedia:"media-right"},N={InlineText:"inline",SquareText:"square",TightText:"tight",ThroughText:"through",TopAndBottomText:"topbottom",BehindText:"behind",AboveText:"above"},I={imageStyle:"imageStyle",videoStyle:"videoStyle"};class _ extends g.NodeExtension{get name(){return"scalablevectorgraphics"}get schema(){return{attrs:{"xmlns:xlink":{default:"http://www.w3.org/1999/xlink"},viewBox:{default:"0 0 150 100"},id:{default:"16a2b11690b"},xmlns:{default:"http://www.w3.org/2000/svg"},style:{default:"position: absolute; top: 0; left: 0; width: 100%;"},class:{default:null}},content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"svg",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["svg",e.attrs,0]}}}class P extends g.NodeExtension{get name(){return"feColorMatrix"}get schema(){return{attrs:{type:{default:null},values:{default:null}},atom:!0,content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"feColorMatrix",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["feColorMatrix",e.attrs,0]}}}class j extends g.NodeExtension{get name(){return"feComponentTransfer"}get schema(){return{attrs:{},atom:!0,content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"feComponentTransfer",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["feComponentTransfer",e.attrs,0]}}}class D extends g.NodeExtension{get name(){return"defs"}get schema(){return{attrs:{xmlns:{default:"http://www.w3.org/2000/svg"}},content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"defs",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["defs",e.attrs,0]}}get view(){return{props:["node","updateAttrs","editable"],template:'<defs xmlns="http://www.w3.org/2000/svg"></defs>'}}}class z extends g.NodeExtension{get name(){return"svgfilter"}get schema(){return{attrs:{xmlns:{default:"http://www.w3.org/2000/svg"},id:{default:null}},atom:!0,content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"filter",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["filter",e.attrs,0]}}}class B extends g.NodeExtension{get name(){return"feFuncB"}get schema(){return{attrs:{type:{default:null},slope:{default:null},intercept:{default:null}},atom:!0,content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"feFuncB",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["feFuncB",e.attrs,0]}}}class L extends g.NodeExtension{get name(){return"feFuncG"}get schema(){return{attrs:{type:{default:null},slope:{default:null},intercept:{default:null}},atom:!0,content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"feFuncG",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["feFuncG",e.attrs,0]}}}class $ extends g.NodeExtension{get name(){return"feFuncR"}get schema(){return{attrs:{type:{default:null},slope:{default:null},intercept:{default:null}},atom:!0,content:"block*",group:"block",draggable:!1,parseDOM:[{tag:"feFuncR",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["feFuncR",e.attrs,0]}}}class F extends g.NodeExtension{get name(){return"svgimage"}get schema(){return{isLeaf:!0,attrs:{"xlink:href":{default:null},href:{default:null},xmlns:{default:"http://www.w3.org/2000/svg"},x:{default:"0%"},y:{default:"0%"},width:{default:"100%"},height:{default:"100%"},preserveAspectRatio:{default:"xMidYMid slice"},alt:{default:""},filter:{default:null}},group:"block",draggable:!1,selectable:!0,parseDOM:[{tag:"image",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["image",e.attrs]}}}class V{constructor(e){this.mediaPickerSettings=e,this.editingMedia={selectedMedia:null,mediaWidth:0,position:null}}static get id(){return new o.Guid("be03f388-95e1-4d56-97ac-6f9b3f8edf28")}getDefition(){return this.mediaPickerSettings||console.error("Missing configuration on init MediaPickerExtension, for example use Fx.RichTextEditorUtils.configureMediaPickerExtension to configure!"),new Promise(((e,t)=>{e({nodes:[new y,new E((e=>{this.editingMedia.mediaWidth=e.mediaWidth,this.editingMedia.position=e.position,this.editingMedia.selectedMedia=e.selectedMedia})),new _,new D,new F,new z,new P,new j,new $,new L,new B],toolbarItems:[{toolbar:m,configuration:{selectedMedia:this.editingMedia,mediaPicker:this.mediaPickerSettings}}]})}))}}},"./client/fx/ux/richtexteditor/extensions/orderedlist/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{OrderedListEditorExtension:()=>w});var o=n("./node_modules/tiptap-commands/dist/commands.esm.js"),r=n("./client/fx/ux/richtexteditor/nodeextension.js");class i extends r.NodeExtension{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1},style:{default:null},class:{default:null}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1})}],toDOM:e=>1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}}commands({type:e,schema:t}){return()=>(0,o.toggleList)(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-9":(0,o.toggleList)(e,t.nodes.list_item)}}inputRules({type:e}){return[(0,o.wrappingInputRule)(/^(\d+)\.\s$/,e,(e=>({order:+e[1]})),((e,t)=>t.childCount+t.attrs.order===+e[1]))]}}var s=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),a=n.n(s),l=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),c=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),d=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),u=n("./node_modules/typestyle/umd/typestyle.js"),h=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),p=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),f=n("./client/fx/ux/richtexteditor/toolbarextension.js"),m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?g(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&m(t,n,i),i};let y=class extends f.ToolbarExtension{mounted(){}render(){return(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,u.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.ordered_list())),on:{click:()=>{this.menubar.commands.ordered_list()}}}]),[(0,l.h)("v-icon",["format_list_numbered"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.OrderedList])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};v([(0,d.Prop)()],y.prototype,"menubar",2),v([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],y.prototype,"loc",2),y=v([c.default],y);var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),x=n("./client/fx/ux/richtexteditor/extensions/listitem/listitemnode.js");class w{static get id(){return new b.Guid("ead3918c-1f9b-4fa4-b321-635d2fc357c7")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new i,new x.default],toolbarItems:[{toolbar:y,configuration:{}}],id:w.id})}))}}},"./client/fx/ux/richtexteditor/extensions/strike/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{StrikeEditorExtension:()=>x});var o=n("./node_modules/tiptap-commands/dist/commands.esm.js"),r=n("./client/fx/ux/richtexteditor/markextension.js");class i extends r.MarkExtension{constructor(){super(...arguments),this.priority=201}get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:e=>"line-through"===e}],toDOM:()=>["s",0]}}keys({type:e}){return{"Mod-d":(0,o.toggleMark)(e)}}commands({type:e}){return()=>(0,o.toggleMark)(e)}inputRules({type:e}){return[(0,o.markInputRule)(/~([^~]+)~$/,e)]}pasteRules({type:e}){return[(0,o.markPasteRule)(/~([^~]+)~/g,e)]}}var s=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),a=n.n(s),l=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),c=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),d=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),u=n("./node_modules/typestyle/umd/typestyle.js"),h=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),p=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),f=n("./client/fx/ux/richtexteditor/toolbarextension.js"),m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?g(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&m(t,n,i),i};let y=class extends f.ToolbarExtension{mounted(){}render(){return(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,u.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.strike())),on:{click:()=>{this.menubar.commands.strike()}}}]),[(0,l.h)("v-icon",["format_strikethrough"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.Strike])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};v([(0,d.Prop)()],y.prototype,"menubar",2),v([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],y.prototype,"loc",2),y=v([c.default],y);var b=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class x{static get id(){return new b.Guid("c2858ce8-bc5b-43f2-8806-42fc816f41a1")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new i],toolbarItems:[{toolbar:y,configuration:{}}],id:x.id})}))}}},"./client/fx/ux/richtexteditor/extensions/table/tablenode.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R,setAttr:()=>_,setCellStyleAttr:()=>I,setTableClass:()=>N});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=n("./node_modules/prosemirror-tables/dist/index.js"),i=n("./node_modules/prosemirror-utils/dist/index.js"),s=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablenodes.js"),a=n("./client/fx/ux/richtexteditor/nodeextension.js"),l=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tableview.js");class c extends l.TableView{constructor(e,t,n){super(e,t),this._updateMargin(e)}update(e){const t=super.update(e);return t&&this._updateMargin(e),t}_updateMargin(e){const t=e.attrs&&e.attrs.marginLeft||0;this.table.style.marginLeft=t?`${t}px`:""}}var d=n("./node_modules/prosemirror-view/dist/index.js"),u=n("./client/fx/ux/richtexteditor/extensions/table/nodes/index.js"),h=n("./client/fx/ux/richtexteditor/extensions/table/nodes/ulti.js"),p=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablemap.js");const f=new o.PluginKey("tableColumnResizing"),m=25;let g=0;let v=null;class y{constructor(e,t,n){this.cellPos=e,this.draggingInfo=n,this.forMarginLeft=t}apply(e){let t=this;const n=e.getMeta(f);if(n&&"number"==typeof n.setCellPos)return new y(n.setCellPos,n.setForMarginLeft,null);if(n&&void 0!==n.setDraggingInfo)return new y(t.cellPos,t.forMarginLeft,n.setDraggingInfo);if(t.cellPos&&t.cellPos>-1&&e.docChanged){let n=e.mapping.map(t.cellPos,-1);(0,h.pointsAtCell)(e.doc.resolve(n))||(n=null),t=new y(n,!!n&&t.forMarginLeft,t.draggingInfo)}return t}}function b(e,t){const n=f.getState(e.state);if(n.draggingInfo)return;const o=function(e){for(;e&&"TD"!==e.nodeName&&"TH"!==e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentElement;return e}(t.target);let r=!1,i=-1;if(o instanceof HTMLElement){const{left:n,right:s}=o.getBoundingClientRect();t.clientX-n<=20?0===o.cellIndex?(r=!0,i=M(e,t,"right")):i=M(e,t,"left"):s-t.clientX<=20&&(i=M(e,t,"right"))}if(i!==n.cellPos||r!==n.forMarginLeft){if(-1!==i){if(!e.state.doc.resolve(i))return}C(e,i,r)}}function x(e){const t=f.getState(e.state),{cellPos:n,draggingInfo:o}=t;n>-1&&!o&&C(e,-1,!1)}function w(e,t){v&&v(t);const n=f.getState(e.state);if(-1===n.cellPos||n.draggingInfo)return!1;let o=!1,r=null;const s=t=>{window.removeEventListener("mouseup",s,!0),window.removeEventListener("mousemove",a,!0),o&&function(e,t){const n=f.getState(e.state),{cellPos:o,draggingInfo:r}=n;if(!r)return;const{columnElements:s,tableElement:a}=r,l=s.map((e=>parseFloat(e.style.width))),c=e.state.doc.resolve(o),d=c.start(-1),u=c.node(-1),m=p.TableMap.get(u);let v=e.state.tr,y=0;const b=[];for(let e=0;e<m.height;e++){y=0;for(let t=0;t<l.length;t++){const n=e*m.width+t;if(e&&m.map[n]==m.map[n-m.width])continue;const o=m.map[n],{attrs:r}=u.nodeAt(o),i=r.colspan||1,s=l.slice(t,t+i);i>1&&(t+=i-1),s.length>0&&(b.push({pos:o,width:s,attrs:r}),y+=s[0]),!r.colwidth||O(r.colwidth,s)}}b.map((e=>{v=v.setNodeMarkup(d+e.pos,null,(0,h.setAttr)((0,h.setAttr)(e.attrs,"colwidth",e.width),"tableWitdh",y))}));const x=parseFloat(a.style.marginLeft)||null;if(u.attrs.marginLeft!==x){const t=u.type,n={...u.attrs,marginLeft:x},o=(0,i.findParentNodeOfTypeClosestToPos)(c,e.state.schema.nodes[t.name]),r=function(e,t){if(null!=e)return e;const n=new Error(void 0!==t?t:"Got unexpected "+e);throw n.framesToPop=1,n}(o&&o.pos);0==g&&(g=y),v=v.setNodeMarkup(r,t,(0,h.setAttr)((0,h.setAttr)(n,"style",`width :${100*y/g}%`),"percenWith",100*y/g))}v.docChanged&&e.dispatch(v);e.dispatch(e.state.tr.setMeta(f,{setDraggingInfo:null}))}(e),v=null},a=t=>{t.which?(o||(!function(e,t){const n=f.getState(e.state);if(-1===n.cellPos||n.draggingInfo)return console.log("resizeState.cellPos",n.cellPos),void console.log("resizeState.draggingInfo",n.draggingInfo);e.dispatch(e.state.tr.setMeta(f,{setDraggingInfo:S(e,t,n)}))}(e,t),o=!0),r=r||T(k),r(e,t)):s(t)};return v=s,window.addEventListener("mouseup",s,!0),window.addEventListener("mousemove",a,!0),t.preventDefault(),!0}function k(e,t){const n=f.getState(e.state),{draggingInfo:o,forMarginLeft:r}=n;if(!o)return void console.log("!draggingInfo",o);const{startX:i,columnWidths:s,taregtColumnIndex:a,columnElements:l,tableElement:c,tableMarginLeft:d,tableMarginRight:u}=o;let h=0,p=d;const v=t.clientX-i,y=s.length-1,b=s.map(((e,t)=>{let n;return r?0===t?(n=Math.min(Math.max(m,e-v),e+d),p=Math.max(0,d+e-n)):n=e:n=t===a&&t===y?Math.min(e+u,Math.max(m,e+v)):t===a?Math.min(Math.max(m,e+v),e+(s[t+1]||0)-m):t===a+1?Math.min(Math.max(m,e-v),e+(s[t-1]||0)-m):e,h+=n,n}));let x=!1;if(0!=g&&c.clientWidth>g){const e=c.clientWidth-g;l[y].style.width=Math.round(b[y]-e)+"px",x=!0}const w=c.style;w.marginLeft=`${p}px`,w.width=Math.round(h)+"px",w.minWidth="";for(let e=0;e<l.length;e++)x&&e==y||(l[e].style.width=Math.round(b[e])+"px")}function S(e,t,n){const{cellPos:o,forMarginLeft:r}=n,i=e.domAtPos(o),s=i.node.closest("table"),a=i.node.closest("div");g=a.clientWidth;const l=s.closest(".tableWrapper"),c=s.querySelector("colgroup"),d=c?Array.from(c.querySelectorAll("col")):[],u=s?Array.from(s.rows[0].cells):[],h=l.getBoundingClientRect(),p=s.getBoundingClientRect(),f=h.width/d.length,v=t.clientX,y=v-p.left;let b=0,x=-1;const w=s.style.marginLeft,k=w&&/\d+px/.test(w)?parseFloat(w):0,S=h.right-p.right,M=Array.from(u).map(((e,t)=>{const n=e.clientWidth;let o=Math.max(m,n&&parseFloat(n)||f);b+o>h.width-5&&(o-=b+o-h.width+5);return y>=b+o-10&&y<=b+o+10&&(x=t),b+=o,o}));return b<p.width-5&&(M[M.length-1]+=p.width-b-5,b=p.width),r&&(x=0),{columnElements:d,taregtColumnIndex:x,columnWidths:M,startX:v,tableElement:s,tableMarginLeft:k,tableMarginRight:S,tableWidth:b,tableWrapperWidth:h.width}}function M(e,t,n){const{pos:o}=e.posAtCoords({left:t.clientX,top:t.clientY}),r=(0,h.cellAround)(e.state.doc.resolve(o));if(!r)return-1;if("right"==n)return r.pos;const i=p.TableMap.get(r.node(-1)),s=r.start(-1),a=i.map.indexOf(r.pos-s);return a%i.width==0?-1:s+i.map[a-1]}function C(e,t,n){e.dispatch(e.state.tr.setMeta(f,{setCellPos:t,setForMarginLeft:n}))}function E(e,t){return new c(e,m,t)}function T(e){let t=null,n=0,o=0,r=null;const i=()=>{if(r&&t){e(r,{target:t,clientX:n,clientY:o})}};return function(e,s){t=s.target,n=s.clientX,o=s.clientY,r=e,requestAnimationFrame(i)}}function O(e,t){return e.length===t.length&&!e.some(((e,n)=>t[n]!==e))}class A extends o.Plugin{constructor(){super({key:f,state:{init(e,t){return this.spec.props.nodeViews[(0,u.tableNodeTypes)(t.schema).table.name]=E,new y(-1,null)},apply:(e,t)=>t.apply(e)},props:{attributes:e=>f.getState(e).cellPos>-1?{class:"resize-cursor"}:null,handleDOMEvents:{mousemove:T(b),mouseleave:x,mousedown:w},decorations(e){const t=f.getState(e);return t.cellPos>-1?function(e,t){if(!t.cellPos)return d.DecorationSet.create(e.doc,[]);const n=[],o=e.doc.resolve(t.cellPos),r=o.node(-1),i=p.TableMap.get(r),s=o.start(-1),a=i.colCount(o.pos-s)+o.nodeAfter.attrs.colspan;for(let e=0;e<i.height;e++){const o=a+e*i.width-1;if(!(a!==i.width&&i.map[o]===i.map[o+1]||0!==e&&i.map[o-1]===i.map[o-1-i.width])){const e=i.map[o],a=s+e+r.nodeAt(e).nodeSize-1,l=document.createElement("div");let c="column-resize-handle";t.forMarginLeft&&(c+=" for-margin-left"),l.className=c,n.push(d.Decoration.widget(a,l))}}return d.DecorationSet.create(e.doc,n)}(e,t):void 0},nodeViews:{}}})}}class R extends a.NodeExtension{get name(){return"table"}get defaultOptions(){return{resizable:!0}}get schema(){return s.default.table}commands({schema:e}){return{createTable:({rowsCount:e,colsCount:t,withHeaderRow:n})=>(r,s)=>{const{tr:a,schema:l}=r,c=(0,i.createTable)(l,e,t,n),d=o.TextSelection.create(a.doc,r.selection.anchor-1);a.setSelection(d),s&&s(a.replaceSelectionWith(c).scrollIntoView())},addColumnBefore:()=>r.addColumnBefore,addColumnAfter:()=>r.addColumnAfter,deleteColumn:()=>r.deleteColumn,addRowBefore:()=>r.addRowBefore,addRowAfter:()=>r.addRowAfter,deleteRow:()=>r.deleteRow,deleteTable:()=>r.deleteTable,toggleCellMerge:()=>(e,t)=>{(0,r.mergeCells)(e,t)||(0,r.splitCell)(e,t)},mergeCells:()=>r.mergeCells,splitCell:()=>r.splitCell,toggleHeaderColumn:()=>r.toggleHeaderColumn,toggleHeaderRow:()=>r.toggleHeaderRow,toggleHeaderCell:()=>r.toggleHeaderCell,setCellAttr:e=>(t,n)=>{(0,r.setCellAttr)(e)(t,n)},setCellStyleAttr:e=>(t,n)=>{I(e)(t,n)},setTableClass:e=>(t,n)=>{N(e)(t,n)},fixTables:()=>r.fixTables}}keys(){return{Tab:(0,r.goToNextCell)(1),"Shift-Tab":(0,r.goToNextCell)(-1)}}get plugins(){return[new A,(0,r.tableEditing)({allowTableNodeSelection:!0})]}}function N(e){return function(t,n){if(!(0,r.isInTable)(t))return!1;const o=(0,i.findTable)(t.tr.selection);if(n){const r=t.tr;r.setNodeMarkup(o.pos,null,{class:e}),n(r)}return!0}}function I(e){return function(t,n){if(!(0,r.isInTable)(t))return!1;const o=(0,r.selectionCell)(t);if(n){const i=t.tr;t.selection instanceof r.CellSelection?t.selection.forEachCell(((t,n)=>{i.setNodeMarkup(n,null,_(t.attrs,e))})):i.setNodeMarkup(o.pos,null,_(o.nodeAfter.attrs,e)),n(i)}return!0}}function _(e,t){const n={};for(const t in e)n[t]=e[t];let o="";const r=document.createElement("div");e.style&&(r.style.cssText=e.style);for(const e in t)r.style[e]=t[e],n[e]=t[e];return o=r.style.cssText,n.style=o,r.remove(),n}},"./client/fx/ux/richtexteditor/extensions/table/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TableEditorExtension:()=>_,TableView:()=>P.TableView,tableNodeTypes:()=>P.tableNodeTypes,tableNodes:()=>P.tableNodes,updateColumns:()=>P.updateColumns});var o=n("./client/fx/ux/richtexteditor/extensions/table/tablenode.js"),r=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),i=n.n(r),s=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),a=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),l=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),c=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),d=n("./node_modules/typestyle/umd/typestyle.js"),u=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),h=n("./client/fx/ux/richtexteditor/toolbarextension.js"),p=n("./client/fx/ux/styleflow.js"),f=n("./client/fx/ux/models/index.js"),m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?g(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&m(t,n,i),i};let y=class extends h.ToolbarExtension{constructor(){super(...arguments),this.tableMenuClasses=p.StyleFlow.use(f.TableMenuStyles),this.iconStyle=(0,d.style)({fontSize:"21px !important"}),this.borderThickness=[1,2,3,4,5,6,7,8,9],this.backgroundColorModel="",this.borderColorModel="",this.tableStylesModel={className:"",component:null}}mounted(){}renderMainButton(){return(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{class:"ma-0"},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},on:{click:()=>{this.menubar.commands.createTable({rowsCount:3,colsCount:3,withHeaderRow:!1})}}}]),[(0,s.h)("v-icon",["ms-Icon ms-Icon--Table"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.Table])])}render(){return(0,s.h)("span",[this.renderMainButton()])}};v([(0,l.Prop)()],y.prototype,"menubar",2),v([(0,l.Prop)()],y.prototype,"editor",2),v([(0,c.Localize)(u.RichTextEditorExtensionLocalization.namespace)],y.prototype,"loc",2),y=v([a.default],y);var b=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablecell.js"),x=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tableheader.js"),w=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablerow.js"),k=n("./client/fx/ux/richtexteditor/extensions/extendedelements/hardbreak/hardbreaknode.js"),S=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),M=n("97786ea9-4861-48bd-8a57-eae9bbdb4892"),C=n("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),E=n("./node_modules/prosemirror-tables/dist/index.js"),T=n("./client/fx/ux/richtexteditor/extensions/table/nodes/ulti.js"),O=n("./node_modules/csx/lib.es2015/index.js");p.StyleFlow.define(C.TableMenuStyles,{thicknessWraper:{width:"200px",fontSize:"16px",verticalAlign:"middle"},subToolBar:{marginTop:"5px",borderTop:"1px solid #d6d4d4",paddingTop:"5px"},cellStyleMenu:{position:"absolute",borderRadius:"2px",maxWidth:"80%",backgroundColor:"white",padding:"10px",zIndex:5,boxShadow:"0px 5px 5px -3px rgba(0,0,0,.2), 0px 8px 10px 1px rgba(0,0,0,.14), 0px 3px 14px 2px rgba(0,0,0,.12)"},thicknessItem:e=>({margin:"5px 0 0 10px",borderTop:`${e}px solid`}),thicknessSelection:{display:"flex",width:"100%",fontSize:"16px"},colorSelection:{width:"170px",$nest:{".v-select.v-text-field":{marginTop:"0px"},".v-select .v-select__selections":{paddingTop:(0,O.important)("0"),paddingLeft:"3px",fontSize:"16px",$nest:{span:{fontSize:(0,O.important)("16px")}}}}},tableStyleWrapper:{width:"150px",verticalAlign:"middle"},tableStyleItemWrapper:{marginLeft:"40px",height:"40px"},tableStyleItemContent:{width:"40px",height:"40px"},tableItemSelection:{height:"20px",$nest:{svg:{width:"20px",height:"20px"}}},setBlackWhiteIcon:e=>{const t="#000";return{$nest:{".neutralPrimaryIcon":{fill:t},".neutralRows":{opacity:"0.2"},".neutralLeftColumn":{opacity:"0.5",fill:t}}}},setThemingPrimaryIcon:e=>{const t=e.colors.primary.base;return{$nest:{".themePrimaryIcon":{fill:t},".themeRows":{opacity:"0.2",fill:t},".themeLeftColumn":{opacity:"0.5",fill:t}}}}});var A=Object.defineProperty,R=Object.getOwnPropertyDescriptor,N=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?R(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&A(t,n,i),i};let I=class extends h.ToolbarExtension{constructor(){super(...arguments),this.tableMenuClasses=p.StyleFlow.use(f.TableMenuStyles),this.iconStyle=(0,d.style)({fontSize:"21px !important"}),this.borderThickness=[1,2,3,4,5,6,7,8,9],this.viewGridlinesClass="dottedBorder",this.noneStyleClass="noneStyle",this.isViewGridlline=!0,this.backgroundColorModel="",this.borderColorModel="",this.borderThicknessModel=1,this.showMenu=!1,this.disableViewGridline=!1,this.tableStylesModel={className:"",invisible:!1,component:null},this.tableStyles=[{className:"rtfSimpleTableStyle",component:this.renderSimpleTableStyle},{className:"rtfBorderHeaderTableStyle",component:this.renderBorderHeaderTableStyle},{className:"rtfFilledHeaderTableStyle",component:this.renderFilledHeaderTableStyle},{className:"rtfBandedRowTableStyle",component:this.renderBandedRowTableStyle},{className:"rtfBandedRowColumnTableStyle",component:this.renderBandedRowColumnTableStyle},{className:"rtfSimpleTableStyleTheme",component:this.renderSimpleTableStyleTheme},{className:"rtfBorderHeaderTableStyleTheme",component:this.renderBorderHeaderTableStyleTheme},{className:"rtfFilledHeaderTableStyleTheme",component:this.renderFilledHeaderTableStyleTheme},{className:"rtfBandedRowTableStyleTheme",component:this.renderBandedRowTableStyleTheme},{className:"rftBandedRowColumnTableStyleTheme",component:this.renderBandedRowColumnTableStyleTheme},{className:"",component:this.renderNoneStyleTable},{className:this.viewGridlinesClass,invisible:!0,component:this.renderNoneStyleTable},{className:this.noneStyleClass,invisible:!0,component:this.renderNoneStyleTable}]}activeChange(e){if(e){this.tableStylesModel={className:"",invisible:!1,component:null};for(let t=0;t<this.tableStyles.length;t++)if(""!=this.tableStyles[t].className&&e({class:this.tableStyles[t].className})){this.tableStylesModel={...this.tableStyles[t]};break}this.tableStylesModel.className==this.viewGridlinesClass||""==this.tableStylesModel.className||this.tableStylesModel.className==this.noneStyleClass?(this.disableViewGridline=!1,this.tableStylesModel.className==this.viewGridlinesClass?this.isViewGridlline=!0:this.isViewGridlline=!1):(this.disableViewGridline=!0,this.isViewGridlline=!1);const t=this.editor,n=t.state;t.state.tr;let o;n.selection instanceof E.CellSelection?n.selection.forEachCell(((e,t)=>{this.backgroundColorModel=e.attrs.backgroundColor,this.borderColorModel=e.attrs.borderColor,this.borderThicknessModel=e.attrs.borderWidth,this.borderThicknessModel=e.attrs.borderWidth?parseInt(e.attrs.borderWidth):1})):(o=(0,T.cellWrapping)(n.selection.$from),o&&o.attrs&&(this.backgroundColorModel=o.attrs.backgroundColor,this.borderColorModel=o.attrs.borderColor,this.borderThicknessModel=o.attrs.borderWidth?parseInt(o.attrs.borderWidth):1))}}mounted(){this.showMenu=!1}beforeDestroy(){this.showMenu=!1}onBackgroundColorChange(e){M.Utils.timewatch("onBackgroundColorChange",(()=>{this.backgroundColorModel=e.color,this.menubar.commands.setCellAttr({name:"backgroundColor",value:e.color}),this.menubar.commands.setCellStyleAttr({background:e.color,backgroundColor:e.color})}),100)}onBorderColorChange(e){this.borderColorModel=e.color,this.menubar.commands.setCellAttr({name:"borderColor",value:e.color}),this.menubar.commands.setCellStyleAttr({borderColor:`${e.color}`,borderStyle:"solid"})}onBorderThicknessChange(e){this.borderThicknessModel=e,this.menubar.commands.setCellAttr({name:"borderWidth",value:e}),this.menubar.commands.setCellStyleAttr({borderWidth:`${e}px`,borderStyle:"solid"})}onTableStyleChange(e){""==e.className&&(e.className=this.viewGridlinesClass),this.menubar.commands.setTableClass(e.className)}onTableViewGridLineChange(){const e=this.tableStylesModel.className==this.viewGridlinesClass||""==this.tableStylesModel.className?this.noneStyleClass:this.viewGridlinesClass;this.menubar.commands.setTableClass(e)}renderEditButtons(){(0,C.ClickOutDirective)({onClickOut:()=>{this.showMenu=!1}});return this.menubar.isActive.table()?(0,s.h)("div",{class:this.tableMenuClasses.subToolBar},[(0,s.h)("div",{class:["d-inline-block"]},[(0,s.h)("v-select",{class:(0,d.classes)("d-inline-block pt-0",this.tableMenuClasses.tableStyleWrapper),attrs:{dark:this.theming.body.bg.dark,items:this.tableStyles.filter((e=>!e.invisible)),placeholder:this.loc.Extensions.TableMenu.TableStyle,"hide-details":!0},scopedSlots:{item:e=>[(0,s.h)("v-list-item",{on:{click:()=>{this.onTableStyleChange(e.item)}}},[(0,s.h)("v-list-item-content",[e.item.component(this.theming)])])],selection:e=>[(0,s.h)("div",{class:["pl-2",this.tableMenuClasses.tableItemSelection]},[(0,s.h)("span",[e.item.component(this.theming)])])]},model:{value:this.tableStylesModel,callback:e=>{this.tableStylesModel=e}}})]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{attrs:{dark:this.theming.body.bg.dark,disabled:this.disableViewGridline}},t,{class:"ma-0 "+(this.isViewGridlline?"v-btn--active":" "),attrs:{icon:!0},on:{click:()=>{this.onTableViewGridLineChange()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--BorderDash"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.ViewGridlines])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,icon:!0},class:"ma-0",on:{click:()=>{this.menubar.commands.deleteTable()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--DeleteTable"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.DeleteTable])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,icon:!0},class:"ma-0",on:{click:()=>{this.menubar.commands.addColumnBefore()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--InsertColumnsLeft"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.InsertColumnsLeft])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,icon:!0},class:"ma-0",on:{click:()=>{this.menubar.commands.addColumnAfter()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--InsertColumnsRight"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.InsertColumnsRight])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{class:"ma-0",attrs:{dark:this.theming.body.bg.dark,icon:!0},on:{click:()=>{this.menubar.commands.deleteColumn()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--DeleteColumns"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.DeleteColumns])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{class:"ma-0",attrs:{dark:this.theming.body.bg.dark,icon:!0},on:{click:()=>{this.menubar.commands.addRowBefore()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--InsertRowsAbove"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.InsertRowsAbove])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,icon:!0},class:"ma-0",on:{click:()=>{this.menubar.commands.addRowAfter()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--InsertRowsBelow"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.InsertRowsBelow])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,icon:!0},class:"ma-0",on:{click:()=>{this.menubar.commands.deleteRow()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--DeleteRows"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.DeleteRows])]),(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,icon:!0},class:"ma-0",on:{click:()=>{this.menubar.commands.toggleCellMerge()}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--Combine"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.Combine])]),(0,s.h)("div",{class:["d-inline-block"]},[(0,s.h)("v-tooltip",i()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,s.h)("v-btn",i()([{},t,{attrs:{dark:this.theming.body.bg.dark,icon:!0},class:"ma-0",on:{click:()=>{this.showMenu=!this.showMenu}}}]),[(0,s.h)("v-icon",{class:this.iconStyle},["ms-Icon ms-Icon--SingleColumnEdit"])])]}})]),[(0,s.h)("span",[this.loc.Tooltip.CellStyle])]),this.showMenu&&(0,s.h)("div",{class:this.tableMenuClasses.cellStyleMenu},[this.renderCellStyleMenu()])])]):null}render(){return(0,s.h)("span",[this.renderEditButtons()])}renderCellStyleMenu(){return(0,s.h)("div",[(0,s.h)("v-list-item-group",{attrs:{color:"primary"}},[(0,s.h)("v-list-item",[(0,s.h)("v-list-item-content",{style:"padding: 7px 0;min-width:150px; overflow :initial!important;"},[(0,s.h)("v-list-item-title",{style:"display:flex!important; overflow :initial!important;"},[(0,s.h)("span",{style:{"font-size":"16px",paddingTop:"13px",paddingRight:"10px",width:"150px"}},[this.loc.Extensions.TableMenu.BackgroundColor]),(0,s.h)("div",{style:"width:200px; text-align:right;"},[(0,s.h)("omfx-color-picker",{attrs:{slim:!0,placeholder:this.loc.Extensions.TableMenu.BackgroundColor},domProps:{display:{filled:!1},valueBind:{color:this.backgroundColorModel},onValueChanged:e=>{this.onBackgroundColorChange(e)}}})])])]),""!=this.backgroundColorModel&&(0,s.h)("v-list-item-avatar",{style:"margin-bottom:0px"},[(0,s.h)("v-avatar",{attrs:{size:"25"},style:{"background-color":this.backgroundColorModel}})])]),(0,s.h)("v-list-item",[(0,s.h)("v-list-item-content",{style:"padding: 7px 0;min-width:150px; overflow :initial!important;"},[(0,s.h)("v-list-item-title",{style:"display:flex!important; overflow :initial!important;"},[(0,s.h)("span",{style:{"font-size":"16px",paddingTop:"13px",paddingRight:"10px",width:"150px"}},[this.loc.Extensions.TableMenu.BorderColor.Label]),(0,s.h)("div",{style:"width:200px; text-align:right;"},[(0,s.h)("omfx-color-picker",{attrs:{placeholder:this.loc.Extensions.TableMenu.BorderColor.Label,slim:!0},domProps:{display:{filled:!1},valueBind:{color:this.borderColorModel},onValueChanged:e=>{this.onBorderColorChange(e)}}})])])]),""!=this.borderColorModel&&(0,s.h)("v-list-item-avatar",{style:"margin-bottom:0px"},[(0,s.h)("v-avatar",{attrs:{size:"25"},style:{"background-color":this.borderColorModel}})])]),(0,s.h)("v-list-item",[(0,s.h)("v-list-item-content",{style:"padding: 7px 0;min-width:150px"},[(0,s.h)("v-list-item-title",{style:"display:flex!important;"},[(0,s.h)("span",{style:{"font-size":"16px",paddingTop:"5px",paddingRight:"10px",width:"150px"}},[this.loc.Extensions.TableMenu.BorderThickness.Label]),(0,s.h)("div",{style:"text-align:right;"},[(0,s.h)("v-select",{class:(0,d.classes)("d-inline-block pt-0",this.tableMenuClasses.thicknessWraper),attrs:{items:this.borderThickness,placeholder:this.loc.Extensions.TableMenu.BorderThickness.Label,"hide-details":!0},scopedSlots:{item:e=>[(0,s.h)("v-list-item-content",{on:{click:()=>{this.onBorderThicknessChange(e.item)}}},[(0,s.h)("v-list-item-title",{style:"display:flex;"},[(0,s.h)("span",[e.item," px"]),(0,s.h)("div",{style:"width:100%;"},[(0,s.h)("div",{class:this.tableMenuClasses.thicknessItem(e.item)})])])])],selection:e=>[(0,s.h)("div",{class:[this.tableMenuClasses.thicknessSelection]},[(0,s.h)("span",[e.item,"px"]),(0,s.h)("div",{style:"width:100%;"},[(0,s.h)("div",{class:this.tableMenuClasses.thicknessItem(e.item)})])])]},model:{value:this.borderThicknessModel,callback:e=>{this.borderThicknessModel=e}}})])])])])]),(0,s.h)("div",{style:{textAlign:"right"}},[(0,s.h)("omfx-button",{domProps:{onClick:()=>this.showMenu=!1,preset:C.ButtonPresets.text.close}})])])}renderSimpleTableStyle(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setBlackWhiteIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("g",[(0,s.h)("path",{class:"neutralPrimaryIcon",attrs:{d:"M0,0v11.5v1v11v1v11v1V48h48V36.5v-1v-11v-1v-11v-1V0H0z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32zM17,23.5v-11h15v11H17z M17,11.5V1h15v10.5H17z M1,1h15v10.5H1V1z M1,12.5h15v11H1V12.5z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M47,23.5H33v-11h14V23.5z M33,11.5V1h14v10.5H33z"}})])])])}renderBorderHeaderTableStyle(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setBlackWhiteIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("g",[(0,s.h)("path",{class:"neutralPrimaryIcon",attrs:{d:"M33,0h-1H17h-1H0v12v11.5v1v11v1V48h48V36.5v-1v-11v-1V12V0H33z M47,1v10H33V1H47z M32,1v10H17V1H32z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,1h15v10H1V1z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5zM1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderFilledHeaderTableStyle(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setBlackWhiteIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("g",[(0,s.h)("path",{class:"neutralPrimaryIcon",attrs:{d:"M48,12V0H0v12h0v11.5v1v11v1V48h48V36.5v-1v-11v-1L48,12L48,12z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderBandedRowTableStyle(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setBlackWhiteIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("rect",{attrs:{x:"1",y:"36.5",width:"46",height:"11"},class:"neutralRows"}),(0,s.h)("rect",{attrs:{x:"1",y:"13",width:"46",height:"11"},class:"neutralRows"}),(0,s.h)("g",[(0,s.h)("path",{class:"neutralPrimaryIcon",attrs:{d:"M48,12V0H0v12h0v11.5v1v11v1V48h48V36.5v-1v-11v-1L48,12L48,12z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderBandedRowColumnTableStyle(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setBlackWhiteIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("rect",{attrs:{x:"16.9",y:"36.5",width:"30.1",height:"10.5"},class:"neutralRows"}),(0,s.h)("rect",{attrs:{x:"17",y:"13",width:"30",height:"11"},class:"neutralRows"}),(0,s.h)("rect",{attrs:{x:"1",y:"13",width:"15",height:"34"},class:"neutralLeftColumn"}),(0,s.h)("g",[(0,s.h)("path",{class:"neutralPrimaryIcon",attrs:{d:"M48,12V0H0v12h0v11.5v1v11v1V48h48V36.5v-1v-11v-1L48,12L48,12z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderSimpleTableStyleTheme(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setThemingPrimaryIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("g",[(0,s.h)("path",{class:"themePrimaryIcon",attrs:{d:"M0,0v11.5v1v11v1v11v1V48h48V36.5v-1v-11v-1v-11v-1V0H0z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32zM17,23.5v-11h15v11H17z M17,11.5V1h15v10.5H17z M1,1h15v10.5H1V1z M1,12.5h15v11H1V12.5z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M47,23.5H33v-11h14V23.5z M33,11.5V1h14v10.5H33z"}})])])])}renderBorderHeaderTableStyleTheme(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setThemingPrimaryIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("g",[(0,s.h)("path",{class:"themePrimaryIcon",attrs:{d:"M33,0h-1H17h-1H0v12v11.5v1v11v1V48h48V36.5v-1v-11v-1V12V0H33z M47,1v10H33V1H47z M32,1v10H17V1H32z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,1h15v10H1V1z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5zM1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderFilledHeaderTableStyleTheme(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setThemingPrimaryIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("g",[(0,s.h)("path",{class:"themePrimaryIcon",attrs:{d:"M48,12V0H0v12h0v11.5v1v11v1V48h48V36.5v-1v-11v-1L48,12L48,12z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderBandedRowTableStyleTheme(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setThemingPrimaryIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("rect",{attrs:{x:"1",y:"36.5",width:"46",height:"11"},class:"themeRows"}),(0,s.h)("rect",{attrs:{x:"1",y:"13",width:"46",height:"11"},class:"themeRows"}),(0,s.h)("g",[(0,s.h)("path",{class:"themePrimaryIcon",attrs:{d:"M48,12V0H0v12h0v11.5v1v11v1V48h48V36.5v-1v-11v-1L48,12L48,12z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderBandedRowColumnTableStyleTheme(e){return(0,s.h)("div",{class:[this.tableMenuClasses.tableStyleItemWrapper,this.tableMenuClasses.setThemingPrimaryIcon(e)]},[(0,s.h)("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 48 48"},class:[this.tableMenuClasses.tableStyleItemContent]},[(0,s.h)("rect",{attrs:{x:"16.9",y:"36.5",width:"30.1",height:"10.5"},class:"themeRows"}),(0,s.h)("rect",{attrs:{x:"17",y:"13",width:"30",height:"11"},class:"themeRows"}),(0,s.h)("rect",{attrs:{x:"1",y:"13",width:"15",height:"34"},class:"themeLeftColumn"}),(0,s.h)("g",[(0,s.h)("path",{class:"themePrimaryIcon",attrs:{d:"M48,12V0H0v12h0v11.5v1v11v1V48h48V36.5v-1v-11v-1L48,12L48,12z M17,35.5v-11h15v11H17z M32,36.5V47H17V36.5H32z M17,23.5V13h15v10.5H17z M1,13h15v10.5H1V13z M1,24.5h15v11H1V24.5z M1,36.5h15V47H1V36.5z M47,47H33V36.5h14V47z M47,35.5H33v-11h14V35.5z M33,23.5V13h14v10.5H33z"}})])])])}renderNoneStyleTable(e){return(0,s.h)("div",{style:{marginLeft:"40px"}},[this.loc.Extensions.TableMenu.RemoveTableStyle])}};N([(0,l.Prop)()],I.prototype,"menubar",2),N([(0,l.Prop)()],I.prototype,"editor",2),N([(0,c.Localize)(u.RichTextEditorExtensionLocalization.namespace)],I.prototype,"loc",2),N([(0,l.Watch)("menubar.isActive.table",{deep:!0})],I.prototype,"activeChange",1),I=N([a.default],I);class _{static get id(){return new S.Guid("6b464896-faa0-45f8-a59d-59c1112a84d3")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new o.default,new x.default,new b.default,new w.default,new k.default],toolbarItems:[{toolbar:y,configuration:{}},{toolbar:I,configuration:{},isSubToolBar:!0}],bubbleMenuItems:[],id:_.id})}))}}var P=n("./client/fx/ux/richtexteditor/extensions/table/nodes/index.js")},"./client/fx/ux/richtexteditor/extensions/table/nodes/tablecell.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablenodes.js"),r=n("./client/fx/ux/richtexteditor/nodeextension.js");class i extends r.NodeExtension{get name(){return"table_cell"}get schema(){return o.default.table_cell}}},"./client/fx/ux/richtexteditor/extensions/table/nodes/tableheader.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablenodes.js"),r=n("./client/fx/ux/richtexteditor/nodeextension.js");class i extends r.NodeExtension{get name(){return"table_header"}get schema(){return o.default.table_header}}},"./client/fx/ux/richtexteditor/extensions/table/nodes/tablenodes.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o,tableNodeTypes:()=>l,tableNodes:()=>a});const o=a({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:e=>e.style.backgroundColor||null}}});function r(e,t){const n=e.getAttribute("data-colwidth"),o=e.getAttribute("data-tableWitdh"),r=e.getAttribute("data-bordercolor"),i=e.getAttribute("data-borderwidth"),s=e.getAttribute("data-backgroundcolor"),a=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((e=>Number(e))):null,l=o&&/^\d+(,\d+)*$/.test(o)?o.split(",").map((e=>Number(e))):null,c=Number(e.getAttribute("colspan")||1),d={colspan:c,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:a&&a.length==c?a:null,tableWitdh:l,borderColor:r,borderWidth:i,backgroundColor:s};e.getAttribute("style")&&(d.style=e.getAttribute("style")),d.colwidth&&d.colwidth.length>0&&(d.width=`${d.colwidth[0]}px`);for(const n in t){const o=t[n].getFromDOM,r=o&&o(e);null!=r&&(d[n]=r)}return d}function i(e,t){const n=e.attrs?{...e.attrs}:{};e.attrs.percenWith&&(n["data-percenWith"]=e.attrs.percenWith);let o=e.attrs.style;return o?o.indexOf("overflow-wrap")<0&&(o+=";overflow-wrap:break-word;"):o=";overflow-wrap:break-word;",n.style=o,n}function s(e,t){const n={};1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","),e.attrs.colwidth.length>0&&0!=e.attrs.colwidth[0]&&e.attrs.tableWitdh&&0!=e.attrs.tableWitdh&&(n.width=100*e.attrs.colwidth[0]/e.attrs.tableWitdh+"%"),n["data-tableWitdh"]=e.attrs.tableWitdh);let o=e.attrs.style;e.attrs.borderWidth&&(o+=";borderStyle:solid;borderWidth:"+e.attrs.borderWidth),n.style=o,n["data-bordercolor"]=e.attrs.borderColor,n["data-borderwidth"]=e.attrs.borderWidth,n["data-backgroundcolor"]=e.attrs.backgroundColor;for(const o in t){const r=t[o].setDOMAttr;r&&r(e.attrs[o],n)}return n}function a(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null},tableWitdh:{default:null},borderWidth:{default:0},borderColor:{default:""},backgroundColor:{default:""},style:{default:"vertical-align: top;"}};for(const e in t)n[e]={default:t[e].default};return{table:{content:"table_row+",attrs:{percenWith:{default:100},style:{default:null},class:{default:"dottedBorder"},viewGridlines:{default:!0}},tableRole:"table",isolating:!0,selectable:!0,group:e.tableGroup,parseDOM:[{tag:"table",getAttrs:e=>{const t={};e.childNodes;for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["table",i(e,e.attrs),["tbody",0]]},table_row:{content:"(table_cell | table_header)*",attrs:{style:{default:null}},tableRole:"row",parseDOM:[{tag:"tr",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["tr",e.attrs,0]},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:e=>r(e,t)}],toDOM:e=>["td",s(e,t),0]},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:e=>r(e,t)}],toDOM:e=>["th",s(e,t),0]}}}function l(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const o=e.nodes[n],r=o.spec.tableRole;r&&(t[r]=o)}}return t}},"./client/fx/ux/richtexteditor/extensions/table/nodes/tablerow.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablenodes.js"),r=n("./client/fx/ux/richtexteditor/nodeextension.js");class i extends r.NodeExtension{get name(){return"table_row"}get schema(){return o.default.table_row}}},"./client/fx/ux/richtexteditor/extensions/table/nodes/tableview.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TableView:()=>o,updateColumns:()=>r});class o{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.className=this.node.attrs.class,this.table.style="overflow-wrap:break-word;",this.colgroup=this.table.appendChild(document.createElement("colgroup")),r(this.dom,e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,this.table.className=this.node.attrs.class,r(this.dom,e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}}function r(e,t,n,o,r,i,s){let a=0,l=!0,c=n.firstChild;const d=t.firstChild;e.clientWidth;for(let e=0,t=0;e<d.childCount;e++){const{colspan:o,colwidth:u}=d.child(e).attrs;for(let e=0;e<o;e++,t++){const o=i==t?s:u&&u[e],d=o?o+"px":"";a+=o||r,o||(l=!1),c?(c.style.width!=d&&(c.style.width=d),c=c.nextSibling):n.appendChild(document.createElement("col"))}}for(;c;){const e=c.nextSibling;c.parentNode.removeChild(c),c=e}l?t.attrs.style&&(o.style=t.attrs.style,o.style.minWidth=""):(o.style.width="",o.style.minWidth=a+"px")}},"./client/fx/ux/richtexteditor/extensions/table/nodes/tablemap.js":(e,t,n)=>{"use strict";let o,r;if(n.r(t),n.d(t,{Rect:()=>i,TableMap:()=>s}),"undefined"!=typeof WeakMap){const e=new WeakMap;o=t=>e.get(t),r=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;o=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},r=(o,r)=>(n==t&&(n=0),e[n++]=o,e[n++]=r)}class i{constructor(e,t,n,o){this.left=e,this.top=t,this.right=n,this.bottom=o}}class s{constructor(e,t,n,o){this.width=e,this.height=t,this.map=n,this.problems=o}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const o=t%this.width,r=t/this.width|0;let s=o+1,a=r+1;for(let e=1;s<this.width&&this.map[t+e]==n;e++)s++;for(let e=1;a<this.height&&this.map[t+this.width*e]==n;e++)a++;return new i(o,r,s,a)}throw new RangeError("No cell with offset "+e+" found")}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")}nextCell(e,t,n){const{left:o,right:r,top:i,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==o:r==this.width)?null:this.map[i*this.width+(n<0?o-1:r)]:(n<0?0==i:s==this.height)?null:this.map[o+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:o,top:r,bottom:s}=this.findCell(e),{left:a,right:l,top:c,bottom:d}=this.findCell(t);return new i(Math.min(n,a),Math.min(r,c),Math.max(o,l),Math.max(s,d))}cellsInRect(e){const t=[],n={};for(let o=e.top;o<e.bottom;o++)for(let r=e.left;r<e.right;r++){const i=o*this.width+r,s=this.map[i];n[s]||(n[s]=!0,r==e.left&&r&&this.map[i-1]==s||o==e.top&&o&&this.map[i-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let o=0,r=0;;o++){const i=r+n.child(o).nodeSize;if(o==e){let n=t+e*this.width;const o=(e+1)*this.width;for(;n<o&&this.map[n]<r;)n++;return n==o?i-1:this.map[n]}r=i}}static get(e){return o(e)||r(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=function(e){let t=-1,n=!1;for(let o=0;o<e.childCount;o++){const r=e.child(o);let i=0;if(n)for(let t=0;t<o;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const r=n.child(e);t+r.attrs.rowspan>o&&(i+=r.attrs.colspan)}}for(let e=0;e<r.childCount;e++){const t=r.child(e);i+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,o=[],r=[];let i=0,l=null;for(let e=0,r=t*n;e<r;e++)o[e]=0;for(let s=0,a=0;s<n;s++){const c=e.child(s);a++;for(let e=0;;e++){for(;i<o.length&&0!=o[i];)i++;if(e==c.childCount)break;const d=c.child(e),{colspan:u,rowspan:h,colwidth:p}=d.attrs;for(let e=0;e<h;e++){if(e+s>=n){(l||(l=[])).push({type:"overlong_rowspan",pos:a,n:h-e});break}const c=i+e*t;for(let e=0;e<u;e++){0==o[c+e]?o[c+e]=a:(l||(l=[])).push({type:"collision",row:s,pos:a,n:u-e});const n=p&&p[e];if(n){const o=(c+e)%t*2,i=r[o];null==i||i!=n&&1==r[o+1]?(r[o]=n,r[o+1]=1):i==n&&r[o+1]++}}}i+=u,a+=d.nodeSize}const d=(s+1)*t;let u=0;for(;i<d;)0==o[i++]&&u++;u&&(l||(l=[])).push({type:"missing",row:s,n:u}),a++}const c=new s(t,n,o,l);let d=!1;for(let e=0;!d&&e<r.length;e+=2)null!=r[e]&&r[e+1]<n&&(d=!0);d&&function(e,t,n){e.problems||(e.problems=[]);for(let o=0,r={};o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);let l=null;for(let n=0;n<s.attrs.colspan;n++){const r=t[2*((o+n)%e.width)];null==r||s.attrs.colwidth&&s.attrs.colwidth[n]==r||((l||(l=a(s.attrs)))[n]=r)}l&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:l})}}(c,r,e);return c}(e))}}function a(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}},"./client/fx/ux/richtexteditor/extensions/table/nodes/ulti.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{addColSpan:()=>b,cellAround:()=>a,cellWrapping:()=>l,colCount:()=>m,columnIsHeader:()=>x,findCell:()=>f,inSameTable:()=>p,isInTable:()=>c,key:()=>s,moveCellForward:()=>h,nextCell:()=>g,pointsAtCell:()=>u,removeColSpan:()=>y,selectionCell:()=>d,setAttr:()=>v});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablenodes.js"),i=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablemap.js");const s=new o.PluginKey("selectingCells");function a(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function l(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}function c(e){const t=e.selection.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function d(e){const t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:a(t.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(n-t.nodeSize)}}(t.$head)}function u(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function h(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function p(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function f(e){return i.TableMap.get(e.node(-1)).findCell(e.pos-e.start(-1))}function m(e){return i.TableMap.get(e.node(-1)).colCount(e.pos-e.start(-1))}function g(e,t,n){const o=e.start(-1),r=i.TableMap.get(e.node(-1)).nextCell(e.pos-o,t,n);return null==r?null:e.node(0).resolve(o+r)}function v(e,t,n){const o={};for(const t in e)o[t]=e[t];return o[t]=n,o}function y(e,t,n=1){const o=v(e,"colspan",e.colspan-n);return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(t,n),o.colwidth.some((e=>e>0))||(o.colwidth=null)),o}function b(e,t,n=1){const o=v(e,"colspan",e.colspan+n);if(o.colwidth){o.colwidth=o.colwidth.slice();for(let e=0;e<n;e++)o.colwidth.splice(t,0,0)}return o}function x(e,t,n){const o=(0,r.tableNodeTypes)(t.type.schema).header_cell;for(let r=0;r<e.height;r++)if(t.nodeAt(e.map[n+r*e.width]).type!=o)return!1;return!0}},"./client/fx/ux/richtexteditor/extensions/table/nodes/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TableView:()=>r.TableView,tableNodeTypes:()=>o.tableNodeTypes,tableNodes:()=>o.tableNodes,updateColumns:()=>r.updateColumns});n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablecell.js"),n("./client/fx/ux/richtexteditor/extensions/table/nodes/tableheader.js");var o=n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablenodes.js"),r=(n("./client/fx/ux/richtexteditor/extensions/table/nodes/tablerow.js"),n("./client/fx/ux/richtexteditor/extensions/table/nodes/tableview.js"))},"./client/fx/ux/richtexteditor/extensions/textcolor/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{TextColorEditorExtension:()=>b});var o=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),r=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),i=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),s=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),a=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),l=n("./client/fx/ux/richtexteditor/toolbarextension.js"),c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?d(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&c(t,n,i),i};let h=class extends l.ToolbarExtension{constructor(){super(...arguments),this.modelValue=""}activeChange(e){if(e){const e=this.editor,t=e.view.state.doc.resolve(e.selection.from);t&&t.nodeAfter&&t.nodeAfter.marks.length>0?this.setModel(t.nodeAfter.marks):t&&t.nodeBefore&&t.nodeBefore.marks.length>0?this.setModel(t.nodeBefore.marks):this.modelValue=""}}setModel(e){const t=e.find((e=>"textcolor"===e.type.name));t&&t.attrs&&(this.modelValue=t.attrs.color)}mounted(){}getToolbarButtonActiveStyle(e){return{maxWidth:"150px",width:"100%"}}onColorChange(e){this.modelValue=e.color,this.menubar.commands.textcolor({color:e.color})}render(){return(0,o.h)("div",{class:["d-inline-block"],style:{maxWidth:"150px",width:"100%"}},[(0,o.h)("omfx-color-picker",{attrs:{dark:this.theming.body.bg.dark,slim:!0,placeholder:this.loc.SelectColor},domProps:{display:{filled:!1},valueBind:{color:this.modelValue},onValueChanged:e=>{this.onColorChange(e)}}})])}};u([(0,i.Prop)()],h.prototype,"editor",2),u([(0,i.Prop)()],h.prototype,"menubar",2),u([(0,s.Localize)(a.RichTextEditorExtensionLocalization.namespace)],h.prototype,"loc",2),u([(0,i.Watch)("menubar.isActive.textcolor",{deep:!0})],h.prototype,"activeChange",1),h=u([r.default],h);var p=n("./client/fx/ux/richtexteditor/markextension.js"),f=n("./node_modules/tiptap-utils/dist/utils.esm.js"),m=n("./client/fx/ux/richtexteditor/extensions/table/tablenode.js"),g=n("./node_modules/prosemirror-tables/dist/index.js");class v extends p.MarkExtension{constructor(e={}){super(),this.priority=99,this.options=Object.assign({},e)}get defaultOptions(){return{color:"rgba(0, 0, 0, 1)"}}get name(){return"textcolor"}get schema(){return{attrs:{color:{default:"rgba(0, 0, 0, 1)"}},parseDOM:[{style:"color",getAttrs:e=>({color:e})}],toDOM:e=>e.attrs.color?["span",{style:`color: ${e.attrs.color}`},0]:[]}}commands({type:e}){return t=>(n,o)=>{if(o){let{from:r,to:i}=n.selection;const{empty:s,$from:a,ranges:l}=n.selection,{tr:c,selection:d,doc:u}=n;if(n.selection instanceof g.CellSelection)n.selection.forEachCell(((e,n)=>{c.setNodeMarkup(n,null,(0,m.setAttr)(e.attrs,t))}));else if(t&&t.color&&""!=t.color)if(s){const{from:n,to:o}=(0,f.getMarkRange)(d.$from,e);u.rangeHasMark(n,o,e)&&c.removeMark(n,o,e),c.addMark(n,o,e.create(t))}else l.forEach((n=>{const{$to:o,$from:r}=n;u.rangeHasMark(r.pos,o.pos,e)&&c.removeMark(r.pos,o.pos,e),c.addMark(r.pos,o.pos,e.create(t))}));else{if(s){const t=(0,f.getMarkRange)(a,e);r=t.from,i=t.to}c.removeMark(r,i,e)}return o(c)}}}}var y=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class b{static get id(){return new y.Guid("5c98869e-dbbf-4a0c-97cc-c55f0ec78564")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new v],toolbarItems:[{toolbar:h,configuration:{}}],id:b.id})}))}}},"./client/fx/ux/richtexteditor/extensions/underline/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{UnderlineEditorExtension:()=>y});var o=n("./node_modules/tiptap-commands/dist/commands.esm.js"),r=n("./client/fx/ux/richtexteditor/markextension.js");class i extends r.MarkExtension{constructor(){super(...arguments),this.priority=200}get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"}],toDOM:()=>["u",0]}}keys({type:e}){return{"Mod-u":(0,o.toggleMark)(e)}}commands({type:e}){return()=>(0,o.toggleMark)(e)}}var s=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),a=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),l=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),c=n("./node_modules/typestyle/umd/typestyle.js"),d=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),u=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),h=n("./client/fx/ux/richtexteditor/toolbarextension.js"),p=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),f=Object.defineProperty,m=Object.getOwnPropertyDescriptor,g=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?m(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&f(t,n,i),i};let v=class extends h.ToolbarExtension{mounted(){}render(){return(0,s.h)("omfx-button",{attrs:{dark:this.theming.body.bg.dark,contentClass:(0,c.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.underline()))},domProps:{onClick:()=>{this.menubar.commands.underline()},mode:p.ButtonModes.icon,icon:{iconType:new p.FontAwesomeIcon("format_underlined")},tooltip:{text:this.loc.Tooltip.Underline,position:p.ButtonTooltipPosition.Bottom}}})}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};g([(0,l.Prop)()],v.prototype,"menubar",2),g([(0,d.Localize)(u.RichTextEditorExtensionLocalization.namespace)],v.prototype,"loc",2),v=g([a.default],v);class y{static get id(){return new p.Guid("490a2ac2-812b-4319-9edc-bf8c6a9a9df5")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new i],toolbarItems:[{toolbar:v,configuration:{}}],id:y.id})}))}}},"./client/fx/ux/richtexteditor/extensions/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlignmentEditorExtension:()=>Ke,AnchorLinkEditorExtension:()=>st,BlockquoteEditorExtension:()=>o.BlockquoteEditorExtension,BoldEditorExtension:()=>r.BoldEditorExtension,BulletListEditorExtension:()=>i.BulletListEditorExtension,CodeBlockEditorExtension:()=>M.CodeBlockEditorExtension,CodeEditorExtension:()=>S,Doc:()=>ne,ExtendedElementsEditorExtension:()=>ee,HeadingEditorExtension:()=>C.HeadingEditorExtension,HistoryEditorExtension:()=>E.HistoryEditorExtension,HorizontalRuleEditorExtension:()=>te.HorizontalRuleEditorExtension,HtmlEditorExtension:()=>U.HtmlEditorExtension,ItalicEditorExtension:()=>T.ItalicEditorExtension,LanguagePickerEditorExtension:()=>et,ListItemEditorExtension:()=>A,MediaPickerEditorExtension:()=>Ge.MediaPickerEditorExtension,MentionConfiguration:()=>fe,MentionContentData:()=>he,MentionEditorExtension:()=>we,OrderedListEditorExtension:()=>R.OrderedListEditorExtension,Paragraph:()=>re,PlaceholderEditorExtension:()=>I,RemovingFormattingEditorExtension:()=>$e,RichTextEditorExtensionLocalization:()=>p.RichTextEditorExtensionLocalization,StrikeEditorExtension:()=>_.StrikeEditorExtension,TableEditorExtension:()=>P.TableEditorExtension,TableView:()=>P.TableView,Text:()=>oe,TextColorEditorExtension:()=>ke.TextColorEditorExtension,TextTranslatorEditorExtension:()=>Oe,TodoListEditorExtension:()=>V,UnderlineEditorExtension:()=>H.UnderlineEditorExtension,tableNodeTypes:()=>P.tableNodeTypes,tableNodes:()=>P.tableNodes,updateColumns:()=>P.updateColumns});var o=n("./client/fx/ux/richtexteditor/extensions/blockquote/index.js"),r=n("./client/fx/ux/richtexteditor/extensions/bold/index.js"),i=n("./client/fx/ux/richtexteditor/extensions/bulletlist/index.js"),s=n("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),a=n.n(s),l=n("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),c=n("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),d=n("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),u=n("./node_modules/typestyle/umd/typestyle.js"),h=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),p=n("./client/fx/ux/richtexteditor/extensions/loc/localize.js"),f=n("./client/fx/ux/richtexteditor/toolbarextension.js"),m=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?g(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&m(t,n,i),i};let y=class extends f.ToolbarExtension{mounted(){}render(){return(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,u.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.code())),on:{click:()=>{this.menubar.commands.code()}}}]),[(0,l.h)("v-icon",["fal fa-code"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.Code])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};v([(0,d.Prop)()],y.prototype,"menubar",2),v([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],y.prototype,"loc",2),y=v([c.default],y);var b=n("./node_modules/tiptap-commands/dist/commands.esm.js"),x=n("./client/fx/ux/richtexteditor/markextension.js");class w extends x.MarkExtension{get name(){return"code"}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}keys({type:e}){return{"Mod-`":(0,b.toggleMark)(e)}}commands({type:e}){return()=>(0,b.toggleMark)(e)}inputRules({type:e}){return[(0,b.markInputRule)(/(?:`)([^`]+)(?:`)$/,e)]}pasteRules({type:e}){return[(0,b.markPasteRule)(/(?:`)([^`]+)(?:`)/g,e)]}}var k=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d");class S{static get id(){return new k.Guid("f75384a5-a6bf-422d-b5bd-edcdf31da481")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new w],toolbarItems:[{toolbar:y,configuration:{}}],id:S.id})}))}}var M=n("./client/fx/ux/richtexteditor/extensions/codeblock/index.js"),C=n("./client/fx/ux/richtexteditor/extensions/heading/index.js"),E=n("./client/fx/ux/richtexteditor/extensions/history/index.js"),T=n("./client/fx/ux/richtexteditor/extensions/italic/index.js"),O=n("./client/fx/ux/richtexteditor/extensions/listitem/listitemnode.js");class A{getDefition(){return new Promise(((e,t)=>{e({nodes:[new O.default],toolbarItems:[]})}))}}var R=n("./client/fx/ux/richtexteditor/extensions/orderedlist/index.js"),N=n("./node_modules/tiptap-extensions/dist/extensions.esm.js");class I{static get id(){return new k.Guid("a1526c32-fba8-48c7-86f8-20b9379627bc")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new N.Placeholder],toolbarItems:[],id:I.id})}))}}var _=n("./client/fx/ux/richtexteditor/extensions/strike/index.js"),P=n("./client/fx/ux/richtexteditor/extensions/table/index.js"),j=n("./client/fx/ux/richtexteditor/nodeextension.js");class D extends j.NodeExtension{get name(){return"todo_list"}get schema(){return{attrs:{style:{default:null},class:{default:null}},group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`,getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}]}}commands({type:e,schema:t}){return()=>(0,b.toggleList)(e,t.nodes.todo_item)}inputRules({type:e}){return[(0,b.wrappingInputRule)(/^\s*(\[ \])\s$/,e)]}}class z extends j.NodeExtension{get name(){return"todo_item"}get defaultOptions(){return{nested:!1}}get view(){return{props:["node","updateAttrs","editable"],methods:{onChange(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()">\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="editable.toString()"></div>\n        </li>\n      '}}get schema(){return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:e=>{const{done:t}=e.attrs;return["li",{"data-type":this.name,"data-done":t.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`,getAttrs:e=>({done:"true"===e.getAttribute("data-done")})}]}}keys({type:e}){return{Enter:(0,b.splitToDefaultListItem)(e),Tab:this.options.nested?(0,b.sinkListItem)(e):()=>{},"Shift-Tab":(0,b.liftListItem)(e)}}}var B=Object.defineProperty,L=Object.getOwnPropertyDescriptor,$=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?L(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&B(t,n,i),i};let F=class extends f.ToolbarExtension{mounted(){}render(){return(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{attrs:{icon:!0,dark:this.theming.body.bg.dark},class:(0,u.classes)("ma-0",this.getToolbarButtonActiveStyle(this.menubar.isActive.todo_list())),on:{click:()=>{this.menubar.commands.todo_list()}}}]),[(0,l.h)("v-icon",["fal fa-clipboard-list"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.TodoList])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};$([(0,d.Prop)()],F.prototype,"menubar",2),$([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],F.prototype,"loc",2),F=$([c.default],F);class V{static get id(){return new k.Guid("77be2430-e1b5-4070-9ef1-89275108e95d")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new D,new z],toolbarItems:[{toolbar:F,configuration:{}}],id:V.id})}))}}var H=n("./client/fx/ux/richtexteditor/extensions/underline/index.js"),U=n("./client/fx/ux/richtexteditor/extensions/html/index.js");class W extends j.NodeExtension{get name(){return"iframe"}get schema(){return{attrs:{src:{default:null},style:{default:null},id:{default:null},width:{default:null},height:{default:null},frameborder:{default:"0"},allowfullscreen:{default:"true"}},inline:!0,group:"inline",draggable:!0,parseDOM:[{tag:"iframe[src]",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["iframe",e.attrs]}}}var q=n("./client/fx/ux/richtexteditor/extensions/extendedelements/hardbreak/hardbreaknode.js");class J extends j.NodeExtension{get name(){return"style"}get schema(){return{group:"block",content:"text*",defining:!0,selectable:!1,parseDOM:[{tag:"style",preserveWhitespace:"full"}],toDOM:e=>["style",0]}}}class K extends j.NodeExtension{get name(){return"img"}get schema(){return{attrs:{src:{default:null},alt:{default:null},width:{default:null},height:{default:null},style:{default:null},class:{default:null}},inline:!0,group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["img",e.attrs]}}commands({type:e}){return()=>(0,b.setBlockType)(e)}}var G=n("./node_modules/tiptap/dist/tiptap.esm.js"),X=n("./node_modules/tiptap-utils/dist/utils.esm.js"),Y=n("./client/fx/ux/richtexteditor/editorextension.js");class Z extends Y.EditorExtension{constructor(e={}){super(),this.options={...this.defaultOptions,...e}}get name(){return"trailing_node"}get defaultOptions(){return{node:"paragraph",notAfter:["paragraph","heading"]}}get plugins(){const e=new G.PluginKey(this.name),t=Object.entries(this.editor.schema.nodes).map((([,e])=>e)).filter((e=>this.options.notAfter.includes(e.name)));return[new G.Plugin({key:e,view:()=>({update:t=>{const{state:n}=t;if(!e.getState(n))return;const{doc:o,schema:r,tr:i}=n,s=r.nodes[this.options.node],a=i.insert(o.content.size,s.create());t.dispatch(a)}}),state:{init:(e,n)=>{const o=n.tr.doc.lastChild;return!(0,X.nodeEqualsType)({node:o,types:t})},apply:(e,n)=>{if(!e.docChanged)return n;const o=e.doc.lastChild;return!(0,X.nodeEqualsType)({node:o,types:t})}}})]}}class Q extends x.MarkExtension{get name(){return"link"}get schema(){return{attrs:{href:{default:null},target:{default:null},title:{default:null},onclick:{default:null},class:{default:"rtf"}},parseDOM:[{priority:60,tag:"a",getAttrs:e=>({href:e.getAttribute("href"),target:e.getAttribute("target"),title:e.getAttribute("title"),onclick:e.getAttribute("onclick"),class:e.getAttribute("class")})}],toDOM:e=>["a",e.attrs,0]}}commands({type:e}){return t=>t.href?(0,b.updateMark)(e,t):(0,b.removeMark)(e)}pasteRules({type:e}){return[(0,b.pasteRule)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,e,(e=>({href:e})))]}get plugins(){return[new G.Plugin({props:{handleClickOn(e,t,n,o,r){const{schema:i}=e.state,s=(0,X.getMarkAttrs)(e.state,i.marks.link);s.href&&r.target.href&&3!==r.which&&(r.preventDefault(),r.stopPropagation(),window.open(s.href))}}})]}}class ee{constructor(e){this.nodes=[],e&&!1===e.allowIframe||this.nodes.push(new W),e&&!1===e.allowHardBreak||this.nodes.push(new q.default),e&&!1===e.allowStyle||this.nodes.push(new J),e&&!1===e.allowTrailingParagraph||this.nodes.push(new Z),e&&!1===e.allowLink||this.nodes.push(new Q)}static get id(){return new k.Guid("c0e5ce96-8e5d-4b79-bd15-1e2ebcba2187")}getDefition(){return new Promise(((e,t)=>{e({nodes:this.nodes,toolbarItems:[],id:ee.id})}))}static getNodes(){return[new W,new q.default,new J,new K,new Q]}}var te=n("./client/fx/ux/richtexteditor/extensions/horizontalrule/index.js");class ne extends j.NodeExtension{get name(){return"doc"}get schema(){return{content:"block+"}}}class oe extends j.NodeExtension{get name(){return"text"}get schema(){return{group:"inline"}}}class re extends j.NodeExtension{get name(){return"paragraph"}get schema(){return{attrs:{style:{default:null},class:{default:null}},content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["p",e.attrs,0]}}commands({type:e}){return()=>(0,b.setBlockType)(e)}}var ie=n("./node_modules/prosemirror-state/dist/index.js"),se=n("./node_modules/prosemirror-view/dist/index.js");function ae({matcher:e={char:"@",allowSpaces:!1,startOfLine:!1},appendText:t=null,suggestionClass:n="suggestion",command:o=(e=>(e,t,n)=>!1),items:r=((e,t)=>null),onEnter:i=(e=>!1),onChange:s=(e=>!1),onExit:a=(e=>!1),onKeyDown:l=(e=>!1),onFilter:c=((e,t)=>t?e.filter((e=>JSON.stringify(e).toLowerCase().includes(t.toLowerCase()))):e)}){return new ie.Plugin({key:new ie.PluginKey("suggestions"),view(){return{update:(e,n)=>{const l=this.key.getState(n),c=this.key.getState(e.state),d=l.active&&c.active&&l.range.from!==c.range.from,u=!l.active&&c.active,h=l.active&&!c.active,p=!u&&!h&&l.query!==c.query,f=u||d,m=p&&!d,g=h||d;if(!f&&!m&&!g)return;const v=g?l:c,y=document.querySelector(`[data-decoration-id="${v.decorationId}"]`),x=y?{getBoundingClientRect:()=>y.getBoundingClientRect(),clientWidth:y.clientWidth,clientHeight:y.clientHeight}:null,w={view:e,range:v.range,query:v.query,text:v.text,decorationNode:y,virtualNode:x,items:[],command:({range:n,attrs:r})=>{o({range:n,attrs:r,schema:e.state.schema})(e.state,e.dispatch,e),t&&(0,b.insertText)(t)(e.state,e.dispatch,e)}};""!=v.query?r(v.query,x).then((e=>{w.items=e,g&&a(w),m&&s(w),f&&i(w)})):(g&&a(w),m&&s(w),f&&i(w))}}},state:{init:()=>({active:!1,range:{},query:null,text:null}),apply(t,n){const{selection:o}=t,r={...n};if(o.from===o.to){(o.from<n.range.from||o.from>n.range.to)&&(r.active=!1);const t=o.$from,i=function({char:e="@",allowSpaces:t=!1,startOfLine:n=!1}){return o=>{if(o.depth<=0)return!1;const r=`\\${e}`,i=new RegExp(`\\s${r}$`),s=n?"^":"",a=t?new RegExp(`${s}${r}.*?(?=\\s${r}|$)`,"gm"):new RegExp(`${s}(?:^)?${r}[^\\s${r}]*`,"gm"),l=o.before(),c=o.end(),d=o.doc.textBetween(l,c,"\0","\0");let u,h=a.exec(d);for(;null!==h;){const n=h.input.slice(Math.max(0,h.index-1),h.index);if(/^[\s\0]?$/.test(n)){const n=h.index+o.start();let r=n+h[0].length;t&&i.test(d.slice(r-1,r+1))&&(h[0]+=" ",r+=1),n<o.pos&&r>=o.pos&&(u={range:{from:n,to:r},query:h[0].slice(e.length),text:h[0]})}h=a.exec(d)}return u}}(e)(t),s=(Math.random()+1).toString(36).substr(2,5);i?(r.active=!0,r.decorationId=n.decorationId?n.decorationId:s,r.range=i.range,r.query=i.query,r.text=i.text):r.active=!1}else r.active=!1;return r.active||(r.decorationId=null,r.range={},r.query=null,r.text=null),r}},props:{handleKeyDown(e,t){const{active:n,range:o}=this.getState(e.state);return!!n&&l({view:e,event:t,range:o})},decorations(e){const{active:t,range:o,decorationId:r}=this.getState(e);return t?se.DecorationSet.create(e.doc,[se.Decoration.inline(o.from,o.to,{nodeName:"span",class:n,"data-decoration-id":r})]):null}}})}const le=class extends j.NodeExtension{constructor(e={}){super(),le.options=Object.assign(this.defaultOptions,e)}get name(){return"mention"}get defaultOptions(){return{matcher:{char:"@",allowSpaces:!1,startOfLine:!1},suggestionClass:"mention-suggestion"}}get schema(){return{attrs:{id:{},label:{},email:{},profileUrl:{},uid:{}},group:"inline",inline:!0,selectable:!1,atom:!0,toDOM:e=>["span",{"data-mention-id":e.attrs.id,"data-mention-email":e.attrs.email,"data-mention-profileurl":e.attrs.profileUrl,"data-mention-uid":e.attrs.uid},["omfx-mention-component",{userLabel:`${le.options.matcher.char}${e.attrs.label}`,url:e.attrs.profileUrl,userName:e.attrs.uid},`${le.options.matcher.char}${e.attrs.label}`]],parseDOM:[{tag:"span[data-mention-id]",getAttrs:e=>{const t=e.getAttribute("data-mention-id"),n=e.innerText.split(le.options.matcher.char).join(""),o=e.getAttribute("data-mention-email")||"",r=e.getAttribute("data-mention-profileurl")||"",i=e.getAttribute("data-mention-uid")||"";return le.content[t]={user:{objectId:t,displayName:n,mail:o,profileUrl:r,uid:i},html:e.innerHTML},le.options.onSelectUser(le.content[t].user),{id:t,label:n,email:o,profileUrl:r,uid:i}}}]}}get view(){return{methods:{},computed:{user:{get(){return this.node.attrs&&this.node.attrs.id?{id:this.node.attrs.id,displayName:this.node.attrs.label,mail:this.node.attrs.email,profileUrl:this.node.attrs.profileUrl,uid:this.node.attrs.uid}:le.content[this.id].user}},content:{get(){return this.node.__mediapickernodedata?this.node.__mediapickernodedata:le.content[this.id]}},id:{get(){return this.node.attrs.id||this.node.firstChild.attrs.id}}},created:function(){},beforeDestroy:function(){},destroyed:function(){const e=this.editor.omniaRTFId,t=this.id,n=le.content[this.id].user;setTimeout((()=>{document.querySelector(`[id="${e}"] [data-mention-id="${t}"]`)||le.options.onRemoveUser(n)}),50)},props:["node","updateAttrs","view","getPos","options","editable","editor"],template:'<span  :data-mention-id="id"\n                              :data-mention-email="user.mail" \n                              :data-mention-profileurl="user.profileUrl"\n                              :data-mention-uid="user.uid">                   \n                             <omfx-mention-component :userName="user.uid" :url="user.profileUrl" :userLabel="\'@\'+user.displayName"></omfx-mention-component>\n                        </span>'}}commands({schema:e}){return t=>(0,b.replaceText)(null,e.nodes[this.name],t)}get plugins(){return[ae({command:({range:e,attrs:t,schema:n})=>(0,b.replaceText)(e,n.nodes[this.name],t),appendText:" ",matcher:le.options.matcher,items:le.options.items,onEnter:le.options.onEnter,onChange:le.options.onChange,onExit:le.options.onExit,onKeyDown:le.options.onKeyDown,onFilter:le.options.onFilter,suggestionClass:le.options.suggestionClass})]}};let ce=le;ce.content={};var de=n("97786ea9-4861-48bd-8a57-eae9bbdb4892"),ue=n("./client/fx/ux/richtexteditor/richtextcontenthelper.js");class he extends ue.RichTextContentExtensionData{constructor(e){super("mention"),this.users=[],e&&(this.users=e)}}const pe=class{constructor(e){this.suggestionRange=null,this.filteredUsers=[],this.navigatedUserIndex=0,this.suggestionMenu={},this.selectionDebounce=!1,this.mentionUser=[],this.getToolbarConfig=()=>({menuHandler:this.menuHandler,selectUser:this.selectUser}),this.menuHandler=e=>{this.suggestionMenu=e},this.getItems=(e,t)=>new Promise(((n,o)=>{de.Utils.timewatch("Editor_onTypingSuggestion",(()=>{t&&0!=t.getBoundingClientRect().left&&""!==e&&(this.suggestionMenu.SetLoading(!0).SetOffsetX(t.getBoundingClientRect().left).SetOffsetY(t.getBoundingClientRect().top).SetShowMenu(!0),this.suggestionMenu.userService.searchUsers(e,k.AzureAdObjectPrincipalTypes.MemberAndGuest).then((e=>{let t=[];t=e.users,n(t),this.suggestionMenu.SetLoading(!1).SetShowMenu(!1)})))}),500)})),this.onEnter=({items:e,query:t,range:n,command:o,virtualNode:r})=>{this.filteredUsers=e,this.suggestionRange=n,this.insertMention=o},this.onChange=({items:e,query:t,range:n,command:o,virtualNode:r})=>{""!=t&&r&&0!=r.getBoundingClientRect().left&&(this.insertMention=o,this.filteredUsers=e,this.suggestionRange=n,this.navigatedUserIndex=0,this.suggestionMenu.SetShowMenu(!1),!1===this.selectionDebounce&&(this.selectionDebounce=!0,setTimeout((()=>{this.suggestionMenu.SetItems(e).SetOffsetX(r.getBoundingClientRect().left).SetOffsetY(r.getBoundingClientRect().top).SetShowMenu(!0),this.selectionDebounce=!1}),200)))},this.onExit=()=>{this.filteredUsers=[],this.suggestionRange=null,this.navigatedUserIndex=0,this.suggestionMenu.SetIndex(0).SetShowMenu(!1)},this.onKeyDown=({event:e})=>38===e.keyCode?(this.upHandler(),!0):40===e.keyCode?(this.downHandler(),!0):13===e.keyCode&&(this.enterHandler(),!0),this.onFilter=(e,t)=>e,this.onRemoveUser=e=>{const t=this.mentionUser.findIndex((t=>t.uid==e.uid));t>=0&&(this.mentionUser.splice(t,1),this.onEditorUpdated&&this.onEditorUpdated(pe.extensionName,new he(this.mentionUser)))},this.onSelectUser=e=>{this.mentionUser.findIndex((t=>t.objectId==e.objectId))<0&&(this.mentionUser.push(e),this.onEditorUpdated&&this.onEditorUpdated(pe.extensionName,new he(this.mentionUser)))},this.upHandler=()=>{this.navigatedUserIndex=(this.navigatedUserIndex+this.filteredUsers.length-1)%this.filteredUsers.length,this.suggestionMenu.SetIndex(this.navigatedUserIndex)},this.downHandler=()=>{this.navigatedUserIndex=(this.navigatedUserIndex+1)%this.filteredUsers.length,this.suggestionMenu.SetIndex(this.navigatedUserIndex)},this.enterHandler=()=>{const e=this.filteredUsers[this.navigatedUserIndex];e&&(this.selectUser(e),this.suggestionMenu.SetShowMenu(!1),this.onEditorUpdated&&this.onEditorUpdated(pe.extensionName,new he(this.mentionUser)))},this.selectUser=e=>{this.insertMention({range:this.suggestionRange,attrs:{id:e.objectId,label:e.displayName,email:e.mail,profileUrl:e.profileUrl,uid:e.uid}}),this.onSelectUser({objectId:e.objectId,type:e.type,displayName:e.displayName,mail:e.mail,profileUrl:e.profileUrl,uid:e.uid})},this.onEditorUpdated=e.onEditorUpdated}getConfig(){return{items:this.getItems,onEnter:this.onEnter,onChange:this.onChange,onExit:this.onExit,onFilter:this.onFilter,onKeyDown:this.onKeyDown,onRemoveUser:this.onRemoveUser,onSelectUser:this.onSelectUser}}};let fe=pe;fe.extensionName="mention";var me=n("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac"),ge=Object.defineProperty,ve=Object.getOwnPropertyDescriptor,ye=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?ve(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&ge(t,n,i),i};class be{constructor(e){this._items=[],this._showLoading=!1,this._showMenu=!1,this._offsetX=0,this._offsetY=0,this._index=0,this.userService=e}SetItems(e){return this._items=e,this}SetLoading(e){return this._showLoading=e,this}SetShowMenu(e){return this._showMenu=e,e||(this._index=-1),this}SetOffsetX(e){return this._offsetX=e,this}SetOffsetY(e){return this._offsetY=e,this}SetIndex(e){return this._index=e,this}GetMenu(){return{items:this._items,showMenu:this._showMenu,showLoading:this._showLoading,offsetX:this._offsetX,offsetY:this._offsetY,index:this._index}}}let xe=class extends f.ToolbarExtension{constructor(){super(...arguments),this.menuDefinition={}}created(){this.menuDefinition=new be(this.userService),this.menuHandler(this.menuDefinition)}mounted(){}onItemSelected(e){this.selectUser&&(this.selectUser(e),this.onContentChanged&&this.onContentChanged(this.editor.getHTML()),this.editor.focus())}render(){const e=this.menuDefinition.GetMenu();return(0,l.h)("v-menu",{class:"d-inline-block",attrs:{"min-width":"175px","position-x":e.offsetX,"position-y":e.offsetY+25,absolute:!0,"offset-x":!0},model:{value:e.showMenu,callback:t=>{this.$set(e,"showMenu",t)}}},[e.showLoading?this.renderLoading():this.renderMenu(e.items,e.index)])}renderMenu(e,t){return(0,l.h)("v-list",{attrs:{"max-height":300,dark:this.theming.body.bg.dark}},[e.map(((e,n)=>(0,l.h)("v-list-item",{style:{backgroundColor:this.theming.body.bg.dark?"black":"white"},class:(0,u.classes)(t==n?"grey lighten-1":null),on:{click:()=>{this.onItemSelected(e)}}},[(0,l.h)("v-tooltip",a()([{attrs:{right:!0,lazy:!0}},this.transformVSlot({activator:t=>{const n={on:t.on};return[(0,l.h)("span",a()([{},n]),[e.displayName])]}})]),[(0,l.h)("v-list-item-title",[e.uid])])])))])}renderLoading(){return(0,l.h)("v-list",{attrs:{dark:this.theming.body.bg.dark}},[(0,l.h)("v-list-tile",[(0,l.h)("v-list-tile-title",[(0,l.h)("div",{class:"text-center"},[(0,l.h)("v-progress-circular",{attrs:{indeterminate:!0,size:"20"}})])])])])}};ye([(0,d.Prop)()],xe.prototype,"menubar",2),ye([(0,d.Prop)()],xe.prototype,"editor",2),ye([(0,d.Prop)()],xe.prototype,"onContentChanged",2),ye([(0,d.Prop)()],xe.prototype,"menuHandler",2),ye([(0,d.Prop)()],xe.prototype,"selectUser",2),ye([(0,h.Inject)(me.AzureAdService)],xe.prototype,"userService",2),xe=ye([c.default],xe);class we{constructor(e){this.configuration={},this.configuration=e}static get id(){return new k.Guid("ad76586e-39a8-4e55-83a5-de52a18495d6")}getDefition(e){return new Promise(((t,n)=>{const o=new fe(e);t({nodes:[new ce(o.getConfig())],toolbarItems:[{toolbar:xe,configuration:o.getToolbarConfig(),hidden:!0}],id:we.id})}))}}var ke=n("./client/fx/ux/richtexteditor/extensions/textcolor/index.js"),Se=n("./client/fx/ux/omniatheming.js"),Me=Object.defineProperty,Ce=Object.getOwnPropertyDescriptor,Ee=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?Ce(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Me(t,n,i),i};let Te=class extends f.ToolbarExtension{onTranslateCompleted(e){this.onContentChanged&&this.onContentChanged(e)}render(){return(0,l.h)("div",{class:"d-inline-block"},[(0,l.h)("omfx-text-translator",{attrs:{text:this.content,dark:this.theming.body.bg.dark},domProps:{onTranslateCompleted:this.onTranslateCompleted}})])}};Ee([(0,d.Prop)()],Te.prototype,"menubar",2),Ee([(0,d.Prop)()],Te.prototype,"content",2),Ee([(0,d.Prop)()],Te.prototype,"onContentChanged",2),Ee([(0,h.Inject)(Se.OmniaTheming)],Te.prototype,"omniaTheming",2),Ee([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],Te.prototype,"loc",2),Te=Ee([c.default],Te);class Oe{static get id(){return new k.Guid("a962e9be-7343-405c-b7b6-ce7960ecfcdc")}getDefition(){return new Promise(((e,t)=>{e({nodes:[],toolbarItems:[{toolbar:Te,configuration:{}}],id:Oe.id})}))}}var Ae=n("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),Re=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Ie=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?Ne(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Re(t,n,i),i};let _e=class extends f.ToolbarExtension{constructor(){super(...arguments),this.excludedTag=["script","style","img","image","svg"]}created(){}mounted(){}removeFormating(){this.menubar.commands.format_clear&&this.menubar.commands.format_clear(this.pastedContext)}render(){return(0,l.h)("span",[(0,l.h)("omfx-button",{domProps:{onClick:()=>{this.removeFormating()},icon:{iconType:new k.FabricIcon("format_clear")},tooltip:{text:this.loc.Tooltip.RemoveFormatting,position:k.ButtonTooltipPosition.Bottom},size:k.ButtonSizes.medium,preset:Ae.ButtonPresets.base.smallIcon},attrs:{contentClass:"ma-0",dark:!0}})])}};Ie([(0,d.Prop)()],_e.prototype,"menubar",2),Ie([(0,d.Prop)()],_e.prototype,"onContentChanged",2),Ie([(0,d.Prop)()],_e.prototype,"editor",2),Ie([(0,d.Prop)()],_e.prototype,"pastedContext",2),Ie([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],_e.prototype,"loc",2),_e=Ie([c.default],_e);const Pe=["textcolor","alignment","style"],je=["style","class"],De=["style"],ze=["mediaPicker","mediaimagenode"];class Be extends Y.EditorExtension{get name(){return"format_clear"}commands(){return e=>(t,n)=>{const o=t.tr.selection.from,r=t.tr.selection.to;let i=t.tr;if(o===r)console.log(e),i=Le(i,t.schema,e.from,r);else{const{selection:e}=i,{from:n,to:o}=e;i=Le(i,t.schema,n,o)}return!(!n||!i.docChanged)&&(n(i),!0)}}}function Le(e,t,n,o){return e=function(e,t,n,o){const{doc:r,selection:i}=e;if(!i||!r)return e;const{empty:s}=i;if(s&&n===o)return e;const a=new Set(De.map((e=>t.nodes[e])).filter(Boolean));if(!a.size)return e;const l=[];return r.nodesBetween(function(e,t,n){let o=0,r=!1;return e.nodesBetween(0,n-1,((e,n)=>(o++,t.has(e.type)&&(r=!0),!1))),1===o&&r?0:n}(r,a,n),o,((e,t)=>(a.has(e.type)&&l.push({node:e,pos:t,mark:null}),!0))),l.reverse().forEach((t=>{const{node:n,pos:o}=t,i=r.resolve(o),s=new G.NodeSelection(i);e=e.deleteRange(s.$from.pos,s.$to.pos)})),e}(e=function(e,t,n){const{selection:o,doc:r}=e;if(!o||!r)return e;if(!(o instanceof ie.TextSelection||o instanceof ie.AllSelection))return e;const{empty:i}=o;if(i&&t===n)return e;const s=[];return r.nodesBetween(t,n,((e,t)=>{const n=e.type;return n.isText||ze.includes(n.name)||s.push({node:e,pos:t,nodeType:n}),!0})),s.length?(s.forEach((t=>{const{node:n,pos:o,nodeType:r}=t,{attrs:i}=n;for(const e in i)je.includes(e)&&delete i[e];e=e.setNodeMarkup(o,r,i,n.marks)})),e):e}(e=function(e,t,n,o){const{doc:r,selection:i}=e;if(!i||!r)return e;const{empty:s}=i;if(s&&n===o)return e;const a=new Set(Pe.map((e=>t.marks[e])).filter(Boolean));if(!a.size)return e;const l=[];return r.nodesBetween(n,o,((e,t)=>!e.marks||!e.marks.length||(e.marks.some((n=>{a.has(n.type)&&l.push({node:e,pos:t,mark:n})})),!0))),l.forEach((t=>{const{node:n,mark:o,pos:r}=t;e=e.removeMark(r,r+n.nodeSize,o.type)})),e}(e,t,n,o),n,o),t,n,o)}class $e{static get id(){return new k.Guid("9152b4d2-de91-4ce6-a647-4779ef8803a5")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new Be],toolbarItems:[],bubbleMenuItems:[{menuItem:_e,configuration:{}},{menuItem:_e,configuration:{},showOnPasted:!0}],id:$e.id})}))}}var Fe=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,He=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?Ve(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Fe(t,n,i),i};let Ue=class extends f.ToolbarExtension{constructor(){super(...arguments),this.modelValue=""}mounted(){}activeChange(e){if(e){const e=this.editor,t=e.view.domAtPos(e.selection.from);if(t&&t.node)if(3===t.node.nodeType){let e=t.node.parentNode;"span"===e.tagName.toLowerCase()&&(e=e.parentNode),this.setModel(e)}else this.setModel(t.node);else this.modelValue=""}}setModel(e){const t=e.getAttribute("style");this.modelValue=t||""}render(){return(0,l.h)("span",[(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{class:["ma-0",this.getToolbarButtonActiveStyle(this.modelValue.indexOf("left")>=0)],attrs:{dark:this.theming.body.bg.dark,icon:!0},on:{click:()=>{this.menubar.commands.alignment({textAlign:"left"})}}}]),[(0,l.h)("v-icon",["format_align_left"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.AlignLeft])]),(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{class:["ma-0",this.getToolbarButtonActiveStyle(this.modelValue.indexOf("center")>=0)],attrs:{dark:this.theming.body.bg.dark,icon:!0},on:{click:()=>{this.menubar.commands.alignment({textAlign:"center"})}}}]),[(0,l.h)("v-icon",["format_align_center"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.AlignCenter])]),(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{class:["ma-0",this.getToolbarButtonActiveStyle(this.modelValue.indexOf("right")>=0)],attrs:{icon:!0,dark:this.theming.body.bg.dark},on:{click:()=>{this.menubar.commands.alignment({textAlign:"right"})}}}]),[(0,l.h)("v-icon",["format_align_right"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.AlignRight])]),(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("v-btn",a()([{},t,{class:["ma-0",this.getToolbarButtonActiveStyle(this.modelValue.indexOf("justify")>=0)],attrs:{icon:!0,dark:this.theming.body.bg.dark},on:{click:()=>{this.menubar.commands.alignment({textAlign:"justify"})}}}]),[(0,l.h)("v-icon",["format_align_justify"])])]}})]),[(0,l.h)("span",[this.loc.Tooltip.AlignJustify])])])}getToolbarButtonActiveStyle(e){return e?"v-btn--active":""}};He([(0,d.Prop)()],Ue.prototype,"menubar",2),He([(0,d.Prop)()],Ue.prototype,"editor",2),He([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],Ue.prototype,"loc",2),He([(0,d.Watch)("menubar.isActive.alignment",{deep:!0})],Ue.prototype,"activeChange",1),Ue=He([c.default],Ue);var We=n("./node_modules/prosemirror-tables/dist/index.js"),qe=n("./client/fx/ux/richtexteditor/extensions/table/tablenode.js");class Je extends j.NodeExtension{constructor(){super()}get name(){return"alignment"}get schema(){return{attrs:{textAlign:{default:""},style:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"*[style*=text-align]",getAttrs:e=>({textAlign:e&&e.style?e.style.textAlign:""})}],toDOM:e=>["p",{style:`text-align:${e.attrs.textAlign};`},0]}}commands({type:e,schema:t}){return e=>(t,n)=>{if(n){const o=t.tr,{from:r,to:i}=t.selection;if(t.selection instanceof We.CellSelection)t.selection.forEachCell(((t,n)=>{o.setNodeMarkup(n,null,(0,qe.setAttr)(t.attrs,e))}));else{let n=!1;t.doc.nodesBetween(r,i,((t,r)=>{if(t.type&&"text"!==t.type.name&&"table_row"!==t.type.name&&!n){let i=t.attrs;i={...i,style:`text-align:${e.textAlign};`},o.setNodeMarkup(r,null,i),t.type&&"table_cell"===t.type.name&&(n=!0)}}))}return n(o)}}}}class Ke{static get id(){return new k.Guid("2bb222d0-d28a-4dbb-bedb-ef99e7caf4a0")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new Je],toolbarItems:[{toolbar:Ue,configuration:{}}],id:Ke.id})}))}}var Ge=n("./client/fx/ux/richtexteditor/extensions/mediapicker/index.js"),Xe=Object.defineProperty,Ye=Object.getOwnPropertyDescriptor,Ze=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?Ye(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&Xe(t,n,i),i};let Qe=class extends f.ToolbarExtension{mounted(){}render(){return(0,l.h)("div",{class:["d-inline-block"]},[(0,l.h)("v-tooltip",a()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,l.h)("omfx-input-language-picker",a()([{},t,{domProps:{multilingualContext:this.multilingualContext}}]))]}})]),[(0,l.h)("span",[this.loc.Tooltip.LanguagePicker])])])}};Ze([(0,d.Prop)()],Qe.prototype,"menubar",2),Ze([(0,d.Prop)()],Qe.prototype,"editor",2),Ze([(0,d.Prop)()],Qe.prototype,"onContentChanged",2),Ze([(0,d.Prop)()],Qe.prototype,"multilingualContext",2),Ze([(0,h.Inject)(Se.OmniaTheming)],Qe.prototype,"omniaTheming",2),Ze([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],Qe.prototype,"loc",2),Ze([(0,h.Localize)("Omnia.Ux")],Qe.prototype,"omniaUxLoc",2),Qe=Ze([c.default],Qe);class et{constructor(e){this.configuration=[],this.configuration=[{toolbar:Qe,configuration:e||{}}]}static get id(){return new k.Guid("68d46378-a6a5-4d86-8f7d-0ac13364a160")}getDefition(){return new Promise(((e,t)=>{e({nodes:[],toolbarItems:this.configuration,id:et.id})}))}}class tt extends x.MarkExtension{get name(){return"anchorLink"}get schema(){return{attrs:{name:{default:null}},parseDOM:[{tag:"span[name]",getAttrs:e=>({name:e.getAttribute("name")})}],toDOM:e=>["span",{name:e.attrs.name},0]}}}var nt=Object.defineProperty,ot=Object.getOwnPropertyDescriptor,rt=(e,t,n,o)=>{for(var r,i=o>1?void 0:o?ot(t,n):t,s=e.length-1;s>=0;s--)(r=e[s])&&(i=(o?r(t,n,i):r(i))||i);return o&&i&&nt(t,n,i),i};let it=class extends f.ToolbarExtension{constructor(){super(...arguments),this.showAnchorLinkMenu=!1,this.anchorName=null}onSave(){if(h.Utils.isNullOrEmpty(this.anchorName))return void this.onRemoveAnchorName();const e=this.getEditorState().config.schema.marks.anchorLink,t=this.getEditorState(),{tr:n,selection:o,doc:r}=t,{from:i,to:s}=o,a={name:this.anchorName};r.rangeHasMark(i,s,e)&&n.removeMark(i,s,e),n.addMark(i,s,e.create(a)),this.editor.dispatchTransaction(n),this.showAnchorLinkMenu=!1}onCloseAnchorLinkMenu(){this.showAnchorLinkMenu=!1}getEditorState(){return this.editor.state}getSelectionText(){const e=this.editor;return e.state.doc.cut(e.selection.from,e.selection.to).textContent}onShowAnchorLinkMenuClicked(){const e=this.menubar.getMarkAttrs("anchorLink");this.anchorName=e.name?e.name:Ae.AnchorLink.transformToDefaultFormat(this.getSelectionText()),this.showAnchorLinkMenu=!0}onRemoveAnchorName(){const e=this.getEditorState().config.schema.marks.anchorLink,t=this.getEditorState(),{tr:n,selection:o,doc:r}=t,{from:i,to:s}=o;r.rangeHasMark(i,s,e)&&(n.removeMark(i,s,e),this.editor.dispatchTransaction(n)),this.showAnchorLinkMenu=!1}render(){const e=this.menubar.isActive.anchorLink();return(0,l.h)("span",[(0,l.h)("omfx-button",{attrs:{scrollable:!1,title:this.loc.Extensions.AnchorLink.Title,contentClass:"ma-0",dark:!0},domProps:{onClick:this.onShowAnchorLinkMenuClicked,icon:{iconType:new k.FontAwesomeIcon("fas fa-anchor")},tooltip:{text:e?this.loc.Tooltip.UpdateAnchorName:this.loc.Tooltip.AddAnchorName,position:k.ButtonTooltipPosition.Bottom},size:k.ButtonSizes.medium,preset:Ae.ButtonPresets.base.smallIcon}}),this.showAnchorLinkMenu?this.renderAnchorLinkDialog():null])}renderAnchorLinkDialog(){const e=this.menubar.isActive.anchorLink();return(0,l.h)("omfx-dialog",{attrs:{maxWidth:this.breakpoint.smOnly?"320px":"480px",themeTargetId:k.Constants.ux.themeTargetIds.editor,headerClass:this.theming.chrome.text.css,valueBind:{visible:this.showAnchorLinkMenu},position:Ae.DialogPositions.Center,title:this.loc.Extensions.AnchorLink.Title},domProps:{lazy:!1},on:{close:this.onCloseAnchorLinkMenu}},[(0,l.h)("v-card",{attrs:{dark:this.theming.body.bg.dark,color:this.theming.body.bg.color.base,tile:!0,flat:!0}},[(0,l.h)("v-card-text",[(0,l.h)("v-text-field",{attrs:{dark:this.theming.body.bg.dark,filled:!0,label:this.loc.Extensions.AnchorLink.Title},model:{value:this.anchorName,callback:e=>{this.anchorName=e}}})]),(0,l.h)("v-card-actions",[e&&(0,l.h)("v-btn",{attrs:{dark:this.theming.body.bg.dark,text:!0},on:{click:e=>{e.stopPropagation(),this.onRemoveAnchorName()}}},[this.loc.Extensions.AnchorLink.Remove]),(0,l.h)("v-spacer"),(0,l.h)("v-btn",{attrs:{dark:this.theming.body.bg.dark,text:!0},on:{click:e=>{e.stopPropagation(),this.onSave()}}},[this.omniaUxLoc.Common.Buttons.Save])])])])}};rt([(0,d.Prop)()],it.prototype,"menubar",2),rt([(0,d.Prop)()],it.prototype,"onContentChanged",2),rt([(0,d.Prop)()],it.prototype,"editor",2),rt([(0,d.Prop)()],it.prototype,"editorId",2),rt([(0,h.Localize)(p.RichTextEditorExtensionLocalization.namespace)],it.prototype,"loc",2),rt([(0,h.Localize)(Ae.OmniaUxLocalizationNamespace)],it.prototype,"omniaUxLoc",2),it=rt([c.default],it);class st{static get id(){return new k.Guid("331951c3-64cb-408e-b28f-ce89790060cd")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new tt],toolbarItems:[],bubbleMenuItems:[{menuItem:it,configuration:{}}],id:st.id})}))}}},"./client/fx/ux/richtexteditor/extensions/loc/localize.js":(e,t,n)=>{"use strict";var o;n.r(t),n.d(t,{RichTextEditorExtensionLocalization:()=>o}),(o||(o={})).namespace="Omnia.Ux.RichTextEditor"},"f37916a5-b801-4e3a-a1be-30a009bd2df2":(e,t,n)=>{"use strict";n.r(t),n.d(t,{AlignmentEditorExtension:()=>l.AlignmentEditorExtension,AnchorLinkEditorExtension:()=>l.AnchorLinkEditorExtension,BlockquoteEditorExtension:()=>l.BlockquoteEditorExtension,BoldEditorExtension:()=>l.BoldEditorExtension,BulletListEditorExtension:()=>l.BulletListEditorExtension,CodeBlockEditorExtension:()=>l.CodeBlockEditorExtension,CodeEditorExtension:()=>l.CodeEditorExtension,Doc:()=>l.Doc,EditorExtension:()=>s.EditorExtension,ExtendedElementsEditorExtension:()=>l.ExtendedElementsEditorExtension,HeadingEditorExtension:()=>l.HeadingEditorExtension,HistoryEditorExtension:()=>l.HistoryEditorExtension,HorizontalRuleEditorExtension:()=>l.HorizontalRuleEditorExtension,HtmlEditorExtension:()=>l.HtmlEditorExtension,ItalicEditorExtension:()=>l.ItalicEditorExtension,LanguagePickerEditorExtension:()=>l.LanguagePickerEditorExtension,ListItemEditorExtension:()=>l.ListItemEditorExtension,MarkExtension:()=>r.MarkExtension,MediaPickerEditorExtension:()=>l.MediaPickerEditorExtension,MentionConfiguration:()=>l.MentionConfiguration,MentionContentData:()=>l.MentionContentData,MentionEditorExtension:()=>l.MentionEditorExtension,NodeExtension:()=>i.NodeExtension,OrderedListEditorExtension:()=>l.OrderedListEditorExtension,Paragraph:()=>l.Paragraph,PlaceholderEditorExtension:()=>l.PlaceholderEditorExtension,RemovingFormattingEditorExtension:()=>l.RemovingFormattingEditorExtension,RichTextContentExtensionData:()=>c.RichTextContentExtensionData,RichTextContentHelper:()=>c.RichTextContentHelper,RichTextEditorExtension:()=>o,RichTextEditorExtensionLocalization:()=>l.RichTextEditorExtensionLocalization,StrikeEditorExtension:()=>l.StrikeEditorExtension,TableEditorExtension:()=>l.TableEditorExtension,TableView:()=>l.TableView,Text:()=>l.Text,TextColorEditorExtension:()=>l.TextColorEditorExtension,TextTranslatorEditorExtension:()=>l.TextTranslatorEditorExtension,TodoListEditorExtension:()=>l.TodoListEditorExtension,ToolbarExtension:()=>a.ToolbarExtension,UnderlineEditorExtension:()=>l.UnderlineEditorExtension,tableNodeTypes:()=>l.tableNodeTypes,tableNodes:()=>l.tableNodes,updateColumns:()=>l.updateColumns});class o{}var r=n("./client/fx/ux/richtexteditor/markextension.js"),i=n("./client/fx/ux/richtexteditor/nodeextension.js"),s=n("./client/fx/ux/richtexteditor/editorextension.js"),a=n("./client/fx/ux/richtexteditor/toolbarextension.js"),l=n("./client/fx/ux/richtexteditor/extensions/index.js"),c=n("./client/fx/ux/richtexteditor/richtextcontenthelper.js"),d=n("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),u=n("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132"),h=n("./node_modules/prosemirror-state/dist/index.js"),p=n("./node_modules/prosemirror-view/dist/index.js"),f=n("./node_modules/prosemirror-model/dist/index.js");function m(e,t){return e.text.toLowerCase()===t.toLowerCase()&&e.marks.length>0&&"enterprisesuggestionignore"===e.marks[0].type.name}function g(e){const t="menu_"+u.Utils.generateGuid();let n=null,o=[],r=!1;function i(e){const t=[];return function(e){const t=[];function r(e,n,o,r){const i={from:e,to:n,replacement:o,mappingId:r};t.push(i)}return n&&0!=o.length?(e.descendants(((e,t)=>{if(e.isText){let i;for(;i=n.exec(e.text);){const n=o.find((e=>e.name.toLowerCase()==i[1].toLowerCase()));m(e,i[1])||r(t+i.index,t+i.index+i[0].length,i[1],n.id)}}})),t):t}(e).forEach((e=>{t.push(p.Decoration.inline(e.from,e.to,{class:"match-suggestion",frompos:e.from,topos:e.to,replacement:e.replacement,mappingid:e.mappingId}),p.Decoration.widget(e.from,function(){const e=document.createElement("span");return e.style.cssText="display:none",e}()))})),p.DecorationSet.create(e,t)}function s(){const e=document.body.querySelector(".suggestion-menu."+t);e&&e.parentElement.removeChild(e)}function a(t){const i=function(e){const t=document.createElement("div"),n=f.DOMSerializer.fromSchema(e.doc.type.schema).serializeFragment(e.doc.content);return t.appendChild(n),t.innerHTML}(t);e.findEnterpriseTerm(i).then((e=>{if(e.length>0){const t=e.map((e=>e.name)).join("|");n=new RegExp("\\b("+t+")\\b","ig"),o=e,r=!0}}))}return new h.Plugin({key:new h.PluginKey("enterprisesuggestion"),state:{init:(e,{doc:t})=>i(t),apply:(e,n)=>e.docChanged?(s(),u.Utils.timewatch(t,(()=>{a(e)}),500),i(e.doc)):r?(r=!1,i(e.doc)):n},view:()=>({update:(e,t)=>{},destroy:()=>{s()}}),props:{decorations(e){return this.getState(e)},handleClick(e,n,o){if(console.log(t),/match-suggestion/.test(o.target.className)){const n=e.state,r=(e.state.schema,function(e){const t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}(o.target));!function(e,n,o,r){s();const i=document.createElement("span");i.className="suggestion-menu "+t,i.style.cssText="position:absolute;z-index:999;top:"+e+"px;left:"+n+"px";const a=Zepto('<button type="button" class="v-btn v-btn--flat v-btn--icon v-btn--round theme--dark v-size--default ma-0 add-suggestion" aria-label="Add Suggestion">\n                                        <span class="v-btn__content">\n                                        <i aria-hidden="true" class="v-icon notranslate fas fa-link theme--dark"></i>\n                                        </span>\n                                    </button>'),l=Zepto('<button type="button" class="v-btn v-btn--flat v-btn--icon v-btn--round theme--dark v-size--default ma-0 remove-suggestion" aria-label="Remove Suggestion">\n                                        <span class="v-btn__content">\n                                        <i aria-hidden="true" class="v-icon notranslate fas fa-unlink theme--dark"></i>\n                                        </span>\n                                    </button>');i.appendChild(a[0]),i.appendChild(l[0]),document.body.appendChild(i),i.querySelector(".add-suggestion").onclick=o,i.querySelector(".remove-suggestion").onclick=r}(r.top,r.left,(()=>{const t=o.target.getAttribute("frompos"),n=o.target.getAttribute("topos"),r=o.target.getAttribute("replacement"),i=o.target.getAttribute("mappingId"),s=e.state.schema.nodes.enterpriseglossarysuggestion.create({class:"enterprise-suggestion",mappingId:i,termName:r},f.Fragment.empty);e.dispatch(e.state.tr.replaceWith(t,n,s))}),(()=>{const t=o.target.getAttribute("frompos"),r=o.target.getAttribute("topos");o.target.getAttribute("replacement");e.dispatch(e.state.tr.addMark(t,r,n.schema.marks.enterprisesuggestionignore.create({})))}))}else s()}}})}(0,n("./node_modules/typestyle/umd/typestyle.js").cssRaw)(" \n    .suggestion-menu{\n        background-color: rgba(0, 0, 0, 0.5);\n        border-radius: 3px;\n        margin-top: -42px;\n        position: absolute;\n        z-index: 3;\n        display:inline-block;\n    }\n    .suggestion-menu.active{\n        display:inline-block;\n    }\n    span.match-suggestion {\n        background-color: rgba(255, 0, 0, 0.8);\n        border-color: rgb(153, 153, 153);\n        border-radius: 4px!important;\n        padding-left: 5px!important;\n        padding-right: 5px!important;\n        padding-top: 2px;\n        padding-bottom: 2px;\n        color:#ffffff;\n    }\n    span.match-suggestion:hover {\n        cursor: pointer;\n    }\n");class v extends i.NodeExtension{constructor(e={}){super(),v.options=Object.assign(this.defaultOptions,e)}get name(){return"enterpriseglossarysuggestion"}get defaultOptions(){return{}}get schema(){return{attrs:{class:"enterprise-suggestion",mappingId:"",termName:""},group:"inline",inline:!0,selectable:!1,atom:!0,toDOM:e=>["span",{class:e.attrs.class,mappingId:e.attrs.mappingId},["omfx-enterprise-glossary-link",{enterpriseGlossaryMappingId:e.attrs.mappingId},`${e.attrs.termName}`]],parseDOM:[{tag:"span.enterprise-suggestion",getAttrs:e=>({class:e.getAttribute("class"),mappingId:e.getAttribute("mappingId")||"",termName:e.innerText})}]}}get view(){return{methods:{},computed:{className:{get(){return this.node.attrs.class||this.node.firstChild.attrs.class}},mappingId:{get(){return this.node.attrs.mappingId||this.node.firstChild.attrs.mappingId}},termName:{get(){return this.node.attrs.termName||this.node.firstChild.attrs.termName}}},created:function(){},props:["node","updateAttrs","view","getPos","options","editable"],template:'<span \n                            :class="className" \n                            :mappingId="mappingId">\n                            <omfx-enterprise-glossary-link :enterpriseGlossaryMappingId="mappingId"></omfx-enterprise-glossary-link>\n                        </span>'}}get plugins(){return[g(v.options)]}}var y=n("5e618f4d-d014-414e-a681-89e34cbeda0f");class b{constructor(){this.findEnterpriseTerm=e=>new Promise(((t,n)=>{this._enterpriseGlossaryStore.actions.queryEnterpriseGlossaryMappings.dispatch(e).then((e=>{t(e)}))})),this._enterpriseGlossaryStore=u.ServiceContainer.createInstance(y.EnterpriseGlossaryStore)}getConfig(){return{findEnterpriseTerm:this.findEnterpriseTerm}}}class x extends r.MarkExtension{constructor(){super()}get name(){return"enterprisesuggestionignore"}get schema(){return{attrs:{class:{default:"enterprise-suggestion-ignore"}},parseDOM:[{tag:"span.enterprise-suggestion-ignore",getAttrs:e=>{const t={};for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];t[o.name]=o.value}return t}}],toDOM:e=>["span",e.attrs]}}}class w{constructor(){this.configuration=[],this.menuConfiguration=[]}static get id(){return new d.Guid("cb10ba7d-6ce4-4c0e-8431-c55bd5f9a18f")}getDefition(){return new Promise(((e,t)=>{e({nodes:[new v((new b).getConfig()),new x]})}))}}class k{constructor(){this._extensions=[{id:l.BlockquoteEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Blockquote;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.BlockquoteEditorExtension},{id:l.BoldEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Bold;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.BoldEditorExtension},{id:l.BulletListEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.BulletList;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.BulletListEditorExtension},{id:l.CodeEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Code;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.CodeEditorExtension},{id:l.CodeBlockEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.CodeBlock;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.CodeBlockEditorExtension},{id:l.HeadingEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Heading;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:e=>new l.HeadingEditorExtension(e)},{id:l.HistoryEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.History;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.HistoryEditorExtension},{id:l.HorizontalRuleEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.HorizontalRule;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.HorizontalRuleEditorExtension},{id:l.HtmlEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Html;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.HtmlEditorExtension},{id:l.ItalicEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Italic;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.ItalicEditorExtension},{id:l.OrderedListEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.OrderedList;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.OrderedListEditorExtension},{id:l.StrikeEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Strike;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.StrikeEditorExtension},{id:l.TableEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Table;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.TableEditorExtension},{id:l.TextColorEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Color;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.TextColorEditorExtension},{id:l.TextTranslatorEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.TextTranslator;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.TextTranslatorEditorExtension},{id:l.UnderlineEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Underline;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.UnderlineEditorExtension},{id:l.AlignmentEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Align;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.AlignmentEditorExtension},{id:l.MediaPickerEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.MediaPicker.Title;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.MediaPickerEditorExtension(null)},{id:l.LanguagePickerEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.LanguagePicker;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.LanguagePickerEditorExtension},{id:l.AnchorLinkEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.AnchorLink.Title;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new l.AnchorLinkEditorExtension},{id:w.id,title:"$Localize:Omnia.Ux.EnterpriseSuggestion.Title;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new w}]}getAllExtensions(){return this._extensions}registerExtension(e){u.Utils.isArray(e)?this._extensions=Array.from(new Set(this._extensions.concat(e))):(this._extensions.push(e),this._extensions=Array.from(new Set(this._extensions)))}}(0,u.registerApi)((e=>e.fx.ux.richTextEditor.registration),(e=>e(new k)));var S=n("./client/fx/ux/richtexteditor/extensions/heading/index.js"),M=n("./client/fx/ux/richtexteditor/extensions/textcolor/index.js"),C=n("./client/fx/ux/richtexteditor/extensions/history/index.js"),E=n("./client/fx/ux/richtexteditor/extensions/bold/index.js"),T=n("./client/fx/ux/richtexteditor/extensions/italic/index.js"),O=n("./client/fx/ux/richtexteditor/extensions/underline/index.js"),A=n("./client/fx/ux/richtexteditor/extensions/strike/index.js"),R=n("./client/fx/ux/richtexteditor/extensions/blockquote/index.js"),N=n("./client/fx/ux/richtexteditor/extensions/bulletlist/index.js"),I=n("./client/fx/ux/richtexteditor/extensions/orderedlist/index.js"),_=n("./client/fx/ux/richtexteditor/extensions/codeblock/index.js"),P=n("./client/fx/ux/richtexteditor/extensions/horizontalrule/index.js"),j=n("./client/fx/ux/richtexteditor/extensions/table/index.js"),D=n("./client/fx/ux/richtexteditor/extensions/html/index.js"),z=n("./client/fx/ux/richtexteditor/extensions/mediapicker/index.js"),B=n("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b46f7161-e941-4240-b573-a9cd83e9d132");class L{getDefaultRTFExtensionRegistrations(){return this.getRTFRegistrations(this.getDefaultRTFMessages())}getDefaultRTFExtensions(){return this.getDefaultRTFMessages().map((e=>e.instance))}getDefaultLimitedRTFExtensionRegistrations(){return this.getRTFRegistrations(this.getDefaultLimitedRTFMessages())}getDefaultLimitedRTFExtensions(){return this.getDefaultLimitedRTFMessages().map((e=>e.instance))}configureMediaPickerExtension(e,t,n=[d.MediaPickerEnums.OmniaMediaTypes.Image,d.MediaPickerEnums.OmniaMediaTypes.Video],o=[new d.LandscapeRatio,new d.SquareRatio,new d.PortraitRatio,new d.CustomRatio]){const r=e.findIndex((e=>e instanceof z.MediaPickerEditorExtension));return r>=0&&e.splice(r,1,new z.MediaPickerEditorExtension({providerContext:t,saved:e=>{},selectableMediaTypes:n,imageSettings:{selectableRatios:o,disableTransformations:!1}})),e}getDefaultRTFMessages(){const e=[];return e.push({id:S.HeadingEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Heading;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new S.HeadingEditorExtension({headings:B.HeadingConfigurationFactory.create().map((e=>e.id))})}),e.push({id:M.TextColorEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Color;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new M.TextColorEditorExtension}),e.push({id:C.HistoryEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.History;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new C.HistoryEditorExtension}),e.push({id:E.BoldEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Bold;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new E.BoldEditorExtension}),e.push({id:T.ItalicEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Italic;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new T.ItalicEditorExtension}),e.push({id:O.UnderlineEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Underline;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new O.UnderlineEditorExtension}),e.push({id:A.StrikeEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Strike;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new A.StrikeEditorExtension}),e.push({id:R.BlockquoteEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Blockquote;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new R.BlockquoteEditorExtension}),e.push({id:N.BulletListEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.BulletList;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new N.BulletListEditorExtension}),e.push({id:I.OrderedListEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.OrderedList;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new I.OrderedListEditorExtension}),e.push({id:_.CodeBlockEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.CodeBlock;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new _.CodeBlockEditorExtension}),e.push({id:P.HorizontalRuleEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.HorizontalRule;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new P.HorizontalRuleEditorExtension}),e.push({id:j.TableEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Table;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new j.TableEditorExtension}),e.push({id:D.HtmlEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Html;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new D.HtmlEditorExtension}),e}getDefaultLimitedRTFMessages(){const e=[];return e.push({id:S.HeadingEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Heading;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new S.HeadingEditorExtension({headings:B.HeadingConfigurationFactory.create().map((e=>e.id))})}),e.push({id:C.HistoryEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.History;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new C.HistoryEditorExtension}),e.push({id:E.BoldEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Bold;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new E.BoldEditorExtension}),e.push({id:T.ItalicEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Italic;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new T.ItalicEditorExtension}),e.push({id:O.UnderlineEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Underline;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new O.UnderlineEditorExtension}),e.push({id:A.StrikeEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.Strike;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new A.StrikeEditorExtension}),e.push({id:N.BulletListEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.BulletList;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new N.BulletListEditorExtension}),e.push({id:I.OrderedListEditorExtension.id,title:"$Localize:Omnia.Ux.RichTextEditor.Extensions.OrderedList;",manifestId:d.OmniaResourceManifests.FxUx,serviceId:d.OmniaService.Id.toString(),instance:new I.OrderedListEditorExtension}),e}getRTFRegistrations(e){return e.map((e=>{const t={id:e.id,title:e.title,manifestId:e.manifestId,serviceId:e.serviceId,isChecked:!0};return t.id.toString()==S.HeadingEditorExtension.id.toString()&&(t.settings={headings:B.HeadingConfigurationFactory.create().map((e=>e.id))}),t}))}}(0,u.registerApi)((e=>e.fx.ux.richTextEditor.helper),(e=>e(new L)))}
//! <omnia-transform-resource path="f37916a5-b801-4e3a-a1be-30a009bd2df2" />
,"./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-align-around-center.svg":e=>{e.exports="/omnia/fonts/left-align-around-center_398e20a164ebdd2c64151a4b327a56d0.svg"},"./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-behind-center.svg":e=>{e.exports="/omnia/fonts/left-behind-center_0ba480380e8ad6565dd65c39832da86a.svg"},"./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-infront-center.svg":e=>{e.exports="/omnia/fonts/left-infront-center_aa3ceafca1d0b1fb803695cab1826545.svg"},"./client/fx/ux/richtexteditor/extensions/mediapicker/images/left-inline-center.svg":e=>{e.exports="/omnia/fonts/left-inline-center_b70d98854bce1165b51b1dd3a0ab7e3b.svg"},"./client/fx/ux/richtexteditor/extensions/mediapicker/images/tight.svg":e=>{e.exports="/omnia/fonts/tight_3a17f60ce8254c02981ff88ebeaff6d5.svg"},"./client/fx/ux/richtexteditor/extensions/mediapicker/mediapickerstyle.css":(e,t,n)=>{"use strict";n.r(t)},"./wwwroot/scripts/tiptap/omfx.packages.tiptap_e32e367c-d09c-4088-90a8-fd6a1e0352c7.js":function(e,t){if("undefined"==typeof omniaLoader&&(window.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e32e367c-d09c-4088-90a8-fd6a1e0352c7"])throw new Error("Error, already loaded manifest e32e367c-d09c-4088-90a8-fd6a1e0352c7 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e32e367c-d09c-4088-90a8-fd6a1e0352c7"]=function(){(()=>{var e={"./node_modules/fault/index.js":(e,t,n)=>{"use strict";var o=n("./node_modules/format/format.js"),r=i(Error);function i(e){return t.displayName=e.displayName||e.name,t;function t(t){return t&&(t=o.apply(null,arguments)),new e(t)}}e.exports=r,r.eval=i(EvalError),r.range=i(RangeError),r.reference=i(ReferenceError),r.syntax=i(SyntaxError),r.type=i(TypeError),r.uri=i(URIError),r.create=i},"./node_modules/format/format.js":e=>{!function(){var t;function n(e){for(var t,n,o,r,i=1,s=[].slice.call(arguments),a=0,l=e.length,c="",d=!1,u=!1,h=function(){return s[i++]},p=function(){for(var n="";/\d/.test(e[a]);)n+=e[a++],t=e[a];return n.length>0?parseInt(n):null};a<l;++a)if(t=e[a],d)switch(d=!1,"."==t?(u=!1,t=e[++a]):"0"==t&&"."==e[a+1]?(u=!0,t=e[a+=2]):u=!0,r=p(),t){case"b":c+=parseInt(h(),10).toString(2);break;case"c":c+="string"==typeof(n=h())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":c+=parseInt(h(),10);break;case"f":o=String(parseFloat(h()).toFixed(r||6)),c+=u?o:o.replace(/^0/,"");break;case"j":c+=JSON.stringify(h());break;case"o":c+="0"+parseInt(h(),10).toString(8);break;case"s":c+=h();break;case"x":c+="0x"+parseInt(h(),10).toString(16);break;case"X":c+="0x"+parseInt(h(),10).toString(16).toUpperCase();break;default:c+=t}else"%"===t?d=!0:c+=t;return c}(t=e.exports=n).format=n,t.vsprintf=function(e,t){return n.apply(null,[e].concat(t))},"undefined"!=typeof console&&"function"==typeof console.log&&(t.printf=function(){console.log(n.apply(null,arguments))})}()},"./node_modules/lowlight/lib/core.js":(e,t,n)=>{"use strict";var o=n("./node_modules/lowlight/node_modules/highlight.js/lib/core.js"),r=n("./node_modules/fault/index.js");t.highlight=s,t.highlightAuto=function(e,t){var n,a,l,c,d=t||{},u=d.subset||o.listLanguages(),h=d.prefix,p=u.length,f=-1;null==h&&(h=i);if("string"!=typeof e)throw r("Expected `string` for value, got `%s`",e);a={relevance:0,language:null,value:[]},n={relevance:0,language:null,value:[]};for(;++f<p;)c=u[f],o.getLanguage(c)&&((l=s(c,e,t)).language=c,l.relevance>a.relevance&&(a=l),l.relevance>n.relevance&&(a=n,n=l));a.language&&(n.secondBest=a);return n},t.registerLanguage=function(e,t){o.registerLanguage(e,t)},t.listLanguages=function(){return o.listLanguages()},t.registerAlias=function(e,t){var n,r=e;t&&((r={})[e]=t);for(n in r)o.registerAliases(r[n],{languageName:n})},a.prototype.addText=function(e){var t,n,o=this.stack;if(""===e)return;t=o[o.length-1],(n=t.children[t.children.length-1])&&"text"===n.type?n.value+=e:t.children.push({type:"text",value:e})},a.prototype.addKeyword=function(e,t){this.openNode(t),this.addText(e),this.closeNode()},a.prototype.addSublanguage=function(e,t){var n=this.stack,o=n[n.length-1],r=e.rootNode.children,i=t?{type:"element",tagName:"span",properties:{className:[t]},children:r}:r;o.children=o.children.concat(i)},a.prototype.openNode=function(e){var t=this.stack,n=this.options.classPrefix+e,o=t[t.length-1],r={type:"element",tagName:"span",properties:{className:[n]},children:[]};o.children.push(r),t.push(r)},a.prototype.closeNode=function(){this.stack.pop()},a.prototype.closeAllNodes=l,a.prototype.finalize=l,a.prototype.toHTML=function(){return""};var i="hljs-";function s(e,t,n){var s,l=o.configure({}),c=(n||{}).prefix;if("string"!=typeof e)throw r("Expected `string` for name, got `%s`",e);if(!o.getLanguage(e))throw r("Unknown language: `%s` is not registered",e);if("string"!=typeof t)throw r("Expected `string` for value, got `%s`",t);if(null==c&&(c=i),o.configure({__emitter:a,classPrefix:c}),s=o.highlight(t,{language:e,ignoreIllegals:!0}),o.configure(l||{}),s.errorRaised)throw s.errorRaised;return{relevance:s.relevance,language:s.language,value:s.emitter.rootNode.children}}function a(e){this.options=e,this.rootNode={children:[]},this.stack=[this.rootNode]}function l(){}},"./node_modules/lowlight/node_modules/highlight.js/lib/core.js":e=>{function t(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(n){var o=e[n];"object"!=typeof o||Object.isFrozen(o)||t(o)})),e}var n=t,o=t;n.default=o;class r{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function i(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function s(e,...t){const n=Object.create(null);for(const t in e)n[t]=e[t];return t.forEach((function(e){for(const t in e)n[t]=e[t]})),n}const a=e=>!!e.kind;class l{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=i(e)}openNode(e){if(!a(e))return;let t=e.kind;e.sublanguage||(t=`${this.classPrefix}${t}`),this.span(t)}closeNode(e){a(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class c{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t={kind:e,children:[]};this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{c._collapse(e)})))}}class d extends c{constructor(e){super(),this.options=e}addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root;n.kind=t,n.sublanguage=!0,this.add(n)}toHTML(){return new l(this,this.options).value()}finalize(){return!0}}function u(e){return e?"string"==typeof e?e:e.source:null}const h=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;const p="[a-zA-Z]\\w*",f="[a-zA-Z_]\\w*",m="\\b\\d+(\\.\\d+)?",g="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",v="\\b(0b[01]+)",y={begin:"\\\\[\\s\\S]",relevance:0},b={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[y]},x={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[y]},w={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},k=function(e,t,n={}){const o=s({className:"comment",begin:e,end:t,contains:[]},n);return o.contains.push(w),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),o},S=k("//","$"),M=k("/\\*","\\*/"),C=k("#","$"),E={className:"number",begin:m,relevance:0},T={className:"number",begin:g,relevance:0},O={className:"number",begin:v,relevance:0},A={className:"number",begin:m+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},R={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[y,{begin:/\[/,end:/\]/,relevance:0,contains:[y]}]}]},N={className:"title",begin:p,relevance:0},I={className:"title",begin:f,relevance:0},_={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var P=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:p,UNDERSCORE_IDENT_RE:f,NUMBER_RE:m,C_NUMBER_RE:g,BINARY_NUMBER_RE:v,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=function(...e){return e.map((e=>u(e))).join("")}(t,/.*\b/,e.binary,/\b.*/)),s({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:y,APOS_STRING_MODE:b,QUOTE_STRING_MODE:x,PHRASAL_WORDS_MODE:w,COMMENT:k,C_LINE_COMMENT_MODE:S,C_BLOCK_COMMENT_MODE:M,HASH_COMMENT_MODE:C,NUMBER_MODE:E,C_NUMBER_MODE:T,BINARY_NUMBER_MODE:O,CSS_NUMBER_MODE:A,REGEXP_MODE:R,TITLE_MODE:N,UNDERSCORE_TITLE_MODE:I,METHOD_GUARD:_,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})}});function j(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function D(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=j,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function z(e,t){Array.isArray(e.illegal)&&(e.illegal=function(...e){return"("+e.map((e=>u(e))).join("|")+")"}(...e.illegal))}function B(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function L(e,t){void 0===e.relevance&&(e.relevance=1)}const $=["of","and","for","in","not","or","if","then","parent","list","value"];function F(e,t,n="keyword"){const o={};return"string"==typeof e?r(n,e.split(" ")):Array.isArray(e)?r(n,e):Object.keys(e).forEach((function(n){Object.assign(o,F(e[n],t,n))})),o;function r(e,n){t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((function(t){const n=t.split("|");o[n[0]]=[e,V(n[0],n[1])]}))}}function V(e,t){return t?Number(t):function(e){return $.includes(e.toLowerCase())}(e)?0:1}function H(e,{plugins:t}){function n(t,n){return new RegExp(u(t),"m"+(e.case_insensitive?"i":"")+(n?"g":""))}class o{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=function(e){return new RegExp(e.toString()+"|").exec("").length-1}(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=n(function(e,t="|"){let n=0;return e.map((e=>{n+=1;const t=n;let o=u(e),r="";for(;o.length>0;){const e=h.exec(o);if(!e){r+=o;break}r+=o.substring(0,e.index),o=o.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?r+="\\"+String(Number(e[1])+t):(r+=e[0],"("===e[0]&&n++)}return r})).map((e=>`(${e})`)).join(t)}(e),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),o=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,o)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new o;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=s(e.classNameAliases||{}),function t(o,i){const a=o;if(o.isCompiled)return a;[B].forEach((e=>e(o,i))),e.compilerExtensions.forEach((e=>e(o,i))),o.__beforeBegin=null,[D,z,L].forEach((e=>e(o,i))),o.isCompiled=!0;let l=null;if("object"==typeof o.keywords&&(l=o.keywords.$pattern,delete o.keywords.$pattern),o.keywords&&(o.keywords=F(o.keywords,e.case_insensitive)),o.lexemes&&l)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return l=l||o.lexemes||/\w+/,a.keywordPatternRe=n(l,!0),i&&(o.begin||(o.begin=/\B|\b/),a.beginRe=n(o.begin),o.endSameAsBegin&&(o.end=o.begin),o.end||o.endsWithParent||(o.end=/\B|\b/),o.end&&(a.endRe=n(o.end)),a.terminatorEnd=u(o.end)||"",o.endsWithParent&&i.terminatorEnd&&(a.terminatorEnd+=(o.end?"|":"")+i.terminatorEnd)),o.illegal&&(a.illegalRe=n(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map((function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return s(e,{variants:null},t)})));if(e.cachedVariants)return e.cachedVariants;if(U(e))return s(e,{starts:e.starts?s(e.starts):null});if(Object.isFrozen(e))return s(e);return e}("self"===e?o:e)}))),o.contains.forEach((function(e){t(e,a)})),o.starts&&t(o.starts,i),a.matcher=function(e){const t=new r;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}function U(e){return!!e&&(e.endsWithParent||U(e.starts))}function W(e){const t={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,i(this.code);let t={};return this.autoDetect?(t=e.highlightAuto(this.code),this.detectedLanguage=t.language):(t=e.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),t.value},autoDetect(){return!this.language||(e=this.autodetect,Boolean(e||""===e));var e},ignoreIllegals:()=>!0},render(e){return e("pre",{},[e("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:t,VuePlugin:{install(e){e.component("highlightjs",t)}}}}const q={"after:highlightElement":({el:e,result:t,text:n})=>{const o=K(e);if(!o.length)return;const r=document.createElement("div");r.innerHTML=t.value,t.value=function(e,t,n){let o=0,r="";const s=[];function a(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function l(e){function t(e){return" "+e.nodeName+'="'+i(e.value)+'"'}r+="<"+J(e)+[].map.call(e.attributes,t).join("")+">"}function c(e){r+="</"+J(e)+">"}function d(e){("start"===e.event?l:c)(e.node)}for(;e.length||t.length;){let t=a();if(r+=i(n.substring(o,t[0].offset)),o=t[0].offset,t===e){s.reverse().forEach(c);do{d(t.splice(0,1)[0]),t=a()}while(t===e&&t.length&&t[0].offset===o);s.reverse().forEach(l)}else"start"===t[0].event?s.push(t[0].node):s.pop(),d(t.splice(0,1)[0])}return r+i(n.substr(o))}(o,K(r),n)}};function J(e){return e.nodeName.toLowerCase()}function K(e){const t=[];return function e(n,o){for(let r=n.firstChild;r;r=r.nextSibling)3===r.nodeType?o+=r.nodeValue.length:1===r.nodeType&&(t.push({event:"start",offset:o,node:r}),o=e(r,o),J(r).match(/br|hr|img|input/)||t.push({event:"stop",offset:o,node:r}));return o}(e,0),t}const G={},X=e=>{console.error(e)},Y=(e,...t)=>{console.log(`WARN: ${e}`,...t)},Z=(e,t)=>{G[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),G[`${e}/${t}`]=!0)},Q=i,ee=s,te=Symbol("nomatch");var ne=function(e){const t=Object.create(null),o=Object.create(null),i=[];let s=!0;const a=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?",c={disableAutodetect:!0,name:"Plain text",contains:[]};let u={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:d};function h(e){return u.noHighlightRe.test(e)}function p(e,t,n,o){let r="",i="";"object"==typeof t?(r=e,n=t.ignoreIllegals,i=t.language,o=void 0):(Z("10.7.0","highlight(lang, code, ...args) has been deprecated."),Z("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),i=e,r=t);const s={code:r,language:i};E("before:highlight",s);const a=s.result?s.result:f(s.language,s.code,n,o);return a.code=s.code,E("after:highlight",a),a}function f(e,n,o,a){function c(e,t){const n=w.case_insensitive?t[0].toLowerCase():t[0];return Object.prototype.hasOwnProperty.call(e.keywords,n)&&e.keywords[n]}function d(){null!=C.subLanguage?function(){if(""===O)return;let e=null;if("string"==typeof C.subLanguage){if(!t[C.subLanguage])return void T.addText(O);e=f(C.subLanguage,O,!0,E[C.subLanguage]),E[C.subLanguage]=e.top}else e=m(O,C.subLanguage.length?C.subLanguage:null);C.relevance>0&&(A+=e.relevance),T.addSublanguage(e.emitter,e.language)}():function(){if(!C.keywords)return void T.addText(O);let e=0;C.keywordPatternRe.lastIndex=0;let t=C.keywordPatternRe.exec(O),n="";for(;t;){n+=O.substring(e,t.index);const o=c(C,t);if(o){const[e,r]=o;if(T.addText(n),n="",A+=r,e.startsWith("_"))n+=t[0];else{const n=w.classNameAliases[e]||e;T.addKeyword(t[0],n)}}else n+=t[0];e=C.keywordPatternRe.lastIndex,t=C.keywordPatternRe.exec(O)}n+=O.substr(e),T.addText(n)}(),O=""}function h(e){return e.className&&T.openNode(w.classNameAliases[e.className]||e.className),C=Object.create(e,{parent:{value:C}}),C}function p(e,t,n){let o=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(e.endRe,n);if(o){if(e["on:end"]){const n=new r(e);e["on:end"](t,n),n.isMatchIgnored&&(o=!1)}if(o){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return p(e.parent,t,n)}function g(e){return 0===C.matcher.regexIndex?(O+=e[0],1):(I=!0,0)}function v(e){const t=e[0],n=e.rule,o=new r(n),i=[n.__beforeBegin,n["on:begin"]];for(const n of i)if(n&&(n(e,o),o.isMatchIgnored))return g(t);return n&&n.endSameAsBegin&&(n.endRe=new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),n.skip?O+=t:(n.excludeBegin&&(O+=t),d(),n.returnBegin||n.excludeBegin||(O=t)),h(n),n.returnBegin?0:t.length}function y(e){const t=e[0],o=n.substr(e.index),r=p(C,e,o);if(!r)return te;const i=C;i.skip?O+=t:(i.returnEnd||i.excludeEnd||(O+=t),d(),i.excludeEnd&&(O=t));do{C.className&&T.closeNode(),C.skip||C.subLanguage||(A+=C.relevance),C=C.parent}while(C!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),h(r.starts)),i.returnEnd?0:t.length}let b={};function x(t,r){const i=r&&r[0];if(O+=t,null==i)return d(),0;if("begin"===b.type&&"end"===r.type&&b.index===r.index&&""===i){if(O+=n.slice(r.index,r.index+1),!s){const t=new Error("0 width match regex");throw t.languageName=e,t.badRule=b.rule,t}return 1}if(b=r,"begin"===r.type)return v(r);if("illegal"===r.type&&!o){const e=new Error('Illegal lexeme "'+i+'" for mode "'+(C.className||"<unnamed>")+'"');throw e.mode=C,e}if("end"===r.type){const e=y(r);if(e!==te)return e}if("illegal"===r.type&&""===i)return 1;if(N>1e5&&N>3*r.index){throw new Error("potential infinite loop, way more iterations than matches")}return O+=i,i.length}const w=S(e);if(!w)throw X(l.replace("{}",e)),new Error('Unknown language: "'+e+'"');const k=H(w,{plugins:i});let M="",C=a||k;const E={},T=new u.__emitter(u);!function(){const e=[];for(let t=C;t!==w;t=t.parent)t.className&&e.unshift(t.className);e.forEach((e=>T.openNode(e)))}();let O="",A=0,R=0,N=0,I=!1;try{for(C.matcher.considerAll();;){N++,I?I=!1:C.matcher.considerAll(),C.matcher.lastIndex=R;const e=C.matcher.exec(n);if(!e)break;const t=x(n.substring(R,e.index),e);R=e.index+t}return x(n.substr(R)),T.closeAllNodes(),T.finalize(),M=T.toHTML(),{relevance:Math.floor(A),value:M,language:e,illegal:!1,emitter:T,top:C}}catch(t){if(t.message&&t.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:t.message,context:n.slice(R-100,R+100),mode:t.mode},sofar:M,relevance:0,value:Q(n),emitter:T};if(s)return{illegal:!1,relevance:0,value:Q(n),emitter:T,language:e,top:C,errorRaised:t};throw t}}function m(e,n){n=n||u.languages||Object.keys(t);const o=function(e){const t={relevance:0,emitter:new u.__emitter(u),value:Q(e),illegal:!1,top:c};return t.emitter.addText(e),t}(e),r=n.filter(S).filter(C).map((t=>f(t,e,!1)));r.unshift(o);const i=r.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(S(e.language).supersetOf===t.language)return 1;if(S(t.language).supersetOf===e.language)return-1}return 0})),[s,a]=i,l=s;return l.second_best=a,l}const g={"before:highlightElement":({el:e})=>{u.useBR&&(e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":({result:e})=>{u.useBR&&(e.value=e.value.replace(/\n/g,"<br>"))}},v=/^(<[^>]+>|\t)+/gm,y={"after:highlightElement":({result:e})=>{u.tabReplace&&(e.value=e.value.replace(v,(e=>e.replace(/\t/g,u.tabReplace))))}};function b(e){let t=null;const n=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=u.languageDetectRe.exec(t);if(n){const t=S(n[1]);return t||(Y(l.replace("{}",n[1])),Y("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>h(e)||S(e)))}(e);if(h(n))return;E("before:highlightElement",{el:e,language:n}),t=e;const r=t.textContent,i=n?p(r,{language:n,ignoreIllegals:!0}):m(r);E("after:highlightElement",{el:e,result:i,text:r}),e.innerHTML=i.value,function(e,t,n){const r=t?o[t]:n;e.classList.add("hljs"),r&&e.classList.add(r)}(e,n,i.language),e.result={language:i.language,re:i.relevance,relavance:i.relevance},i.second_best&&(e.second_best={language:i.second_best.language,re:i.second_best.relevance,relavance:i.second_best.relevance})}const x=()=>{if(x.called)return;x.called=!0,Z("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead.");document.querySelectorAll("pre code").forEach(b)};let w=!1;function k(){if("loading"===document.readyState)return void(w=!0);document.querySelectorAll("pre code").forEach(b)}function S(e){return e=(e||"").toLowerCase(),t[e]||t[o[e]]}function M(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach((e=>{o[e.toLowerCase()]=t}))}function C(e){const t=S(e);return t&&!t.disableAutodetect}function E(e,t){const n=e;i.forEach((function(e){e[n]&&e[n](t)}))}"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){w&&k()}),!1),Object.assign(e,{highlight:p,highlightAuto:m,highlightAll:k,fixMarkup:function(e){return Z("10.2.0","fixMarkup will be removed entirely in v11.0"),Z("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),t=e,u.tabReplace||u.useBR?t.replace(a,(e=>"\n"===e?u.useBR?"<br>":e:u.tabReplace?e.replace(/\t/g,u.tabReplace):e)):t;var t},highlightElement:b,highlightBlock:function(e){return Z("10.7.0","highlightBlock will be removed entirely in v12.0"),Z("10.7.0","Please use highlightElement now."),b(e)},configure:function(e){e.useBR&&(Z("10.3.0","'useBR' will be removed entirely in v11.0"),Z("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),u=ee(u,e)},initHighlighting:x,initHighlightingOnLoad:function(){Z("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),w=!0},registerLanguage:function(n,o){let r=null;try{r=o(e)}catch(e){if(X("Language definition for '{}' could not be registered.".replace("{}",n)),!s)throw e;X(e),r=c}r.name||(r.name=n),t[n]=r,r.rawDefinition=o.bind(null,e),r.aliases&&M(r.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(const t of Object.keys(o))o[t]===e&&delete o[t]},listLanguages:function(){return Object.keys(t)},getLanguage:S,registerAliases:M,requireLanguage:function(e){Z("10.4.0","requireLanguage will be removed entirely in v11."),Z("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const t=S(e);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",e))},autoDetection:C,inherit:ee,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),i.push(e)},vuePlugin:W(e).VuePlugin}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString="10.7.3";for(const e in P)"object"==typeof P[e]&&n(P[e]);return Object.assign(e,P),e.addPlugin(g),e.addPlugin(q),e.addPlugin(y),e}({});e.exports=ne},"./node_modules/orderedmap/index.js":e=>{function t(e){this.content=e}t.prototype={constructor:t,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,n,o){var r=o&&o!=e?this.remove(o):this,i=r.find(e),s=r.content.slice();return-1==i?s.push(o||e,n):(s[i+1]=n,o&&(s[i]=o)),new t(s)},remove:function(e){var n=this.find(e);if(-1==n)return this;var o=this.content.slice();return o.splice(n,2),new t(o)},addToStart:function(e,n){return new t([e,n].concat(this.remove(e).content))},addToEnd:function(e,n){var o=this.remove(e).content.slice();return o.push(e,n),new t(o)},addBefore:function(e,n,o){var r=this.remove(n),i=r.content.slice(),s=r.find(e);return i.splice(-1==s?i.length:s,0,n,o),new t(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=t.from(e)).size?new t(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=t.from(e)).size?new t(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var n=this;e=t.from(e);for(var o=0;o<e.content.length;o+=2)n=n.remove(e.content[o]);return n},get size(){return this.content.length>>1}},t.from=function(e){if(e instanceof t)return e;var n=[];if(e)for(var o in e)n.push(o,e[o]);return new t(n)},e.exports=t},"./node_modules/prosemirror-collab/dist/collab.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=function(e,t,n){this.step=e,this.inverted=t,this.origin=n};function i(e,t,n){for(var o=e.length-1;o>=0;o--)n.step(e[o].inverted);for(var i=0;i<t.length;i++)n.step(t[i]);for(var s=[],a=0,l=e.length;a<e.length;a++){var c=e[a].step.map(n.mapping.slice(l));l--,c&&!n.maybeStep(c).failed&&(n.mapping.setMirror(l,n.steps.length-1),s.push(new r(c,c.invert(n.docs[n.docs.length-1]),e[a].origin)))}return s}var s=function(e,t){this.version=e,this.unconfirmed=t};var a=new o.PluginKey("collab");t.rebaseSteps=i,t.collab=function(e){return void 0===e&&(e={}),e={version:e.version||0,clientID:null==e.clientID?Math.floor(4294967295*Math.random()):e.clientID},new o.Plugin({key:a,state:{init:function(){return new s(e.version,[])},apply:function(e,t){var n=e.getMeta(a);return n||(e.docChanged?new s(t.version,t.unconfirmed.concat(function(e){for(var t=[],n=0;n<e.steps.length;n++)t.push(new r(e.steps[n],e.steps[n].invert(e.docs[n]),e));return t}(e))):t)}},config:e,historyPreserveItems:!0})},t.receiveTransaction=function(e,t,n,r){for(var l=a.getState(e),c=l.version+t.length,d=a.get(e).spec.config.clientID,u=0;u<n.length&&n[u]==d;)++u;var h=l.unconfirmed.slice(u);if(!(t=u?t.slice(u):t).length)return e.tr.setMeta(a,new s(c,h));var p=h.length,f=e.tr;if(p)h=i(h,t,f);else{for(var m=0;m<t.length;m++)f.step(t[m]);h=[]}var g=new s(c,h);return r&&r.mapSelectionBackward&&e.selection instanceof o.TextSelection&&(f.setSelection(o.TextSelection.between(f.doc.resolve(f.mapping.map(e.selection.anchor,-1)),f.doc.resolve(f.mapping.map(e.selection.head,-1)),-1)),f.updated&=-2),f.setMeta("rebased",p).setMeta("addToHistory",!1).setMeta(a,g)},t.sendableSteps=function(e){var t=a.getState(e);return 0==t.unconfirmed.length?null:{version:t.version,steps:t.unconfirmed.map((function(e){return e.step})),clientID:a.get(e).spec.config.clientID,get origins(){return this._origins||(this._origins=t.unconfirmed.map((function(e){return e.origin})))}}},t.getVersion=function(e){return a.getState(e).version}},"./node_modules/prosemirror-commands/dist/commands.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-transform/dist/index.js"),r=n("./node_modules/prosemirror-model/dist/index.js"),i=n("./node_modules/prosemirror-state/dist/index.js");function s(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function a(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var s=d(r);if(!s){var a=r.blockRange(),c=a&&o.liftTarget(a);return null!=c&&(t&&t(e.tr.lift(a,c).scrollIntoView()),!0)}var u=s.nodeBefore;if(!u.type.spec.isolating&&x(e,s,t))return!0;if(0==r.parent.content.size&&(l(u,"end")||i.NodeSelection.isSelectable(u))){if(t){var h=e.tr.deleteRange(r.before(),r.after());h.setSelection(l(u,"end")?i.Selection.findFrom(h.doc.resolve(h.mapping.map(s.pos,-1)),-1):i.NodeSelection.create(h.doc,s.pos-u.nodeSize)),t(h.scrollIntoView())}return!0}return!(!u.isAtom||s.depth!=r.depth-1)&&(t&&t(e.tr.delete(s.pos-u.nodeSize,s.pos).scrollIntoView()),!0)}function l(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function c(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",e):o.parentOffset>0))return!1;var r=d(o),s=r&&r.nodeBefore;return!(!s||!i.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,r.pos-s.nodeSize)).scrollIntoView()),!0)}function d(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function u(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var r=p(o);if(!r)return!1;var s=r.nodeAfter;if(x(e,r,t))return!0;if(0==o.parent.content.size&&(l(s,"start")||i.NodeSelection.isSelectable(s))){if(t){var a=e.tr.deleteRange(o.before(),o.after());a.setSelection(l(s,"start")?i.Selection.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):i.NodeSelection.create(a.doc,a.mapping.map(r.pos))),t(a.scrollIntoView())}return!0}return!(!s.isAtom||r.depth!=o.depth-1)&&(t&&t(e.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0)}function h(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var r=p(o),s=r&&r.nodeAfter;return!(!s||!i.NodeSelection.isSelectable(s))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,r.pos)).scrollIntoView()),!0)}function p(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function f(e,t){var n=e.selection,o=n.$head,r=n.$anchor;return!(!o.parent.type.spec.code||!o.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function m(e,t){var n=e.selection,o=n.$head,r=n.$anchor;if(!o.parent.type.spec.code||!o.sameParent(r))return!1;var s=o.node(-1),a=o.indexAfter(-1),l=s.contentMatchAt(a).defaultType;if(!s.canReplaceWith(a,a,l))return!1;if(t){var c=o.after(),d=e.tr.replaceWith(c,c,l.createAndFill());d.setSelection(i.Selection.near(d.doc.resolve(c),1)),t(d.scrollIntoView())}return!0}function g(e,t){var n=e.selection,o=n.$from,r=n.$to;if(o.parent.inlineContent||r.parent.inlineContent)return!1;var s=o.parent.contentMatchAt(r.indexAfter()).defaultType;if(!s||!s.isTextblock)return!1;if(t){var a=(!o.parentOffset&&r.index()<r.parent.childCount?o:r).pos,l=e.tr.insert(a,s.createAndFill());l.setSelection(i.TextSelection.create(l.doc,a+1)),t(l.scrollIntoView())}return!0}function v(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(o.canSplit(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var i=n.blockRange(),s=i&&o.liftTarget(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}function y(e,t){var n=e.selection,s=n.$from,a=n.$to;if(e.selection instanceof i.NodeSelection&&e.selection.node.isBlock)return!(!s.parentOffset||!o.canSplit(e.doc,s.pos))&&(t&&t(e.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(t){var l=a.parentOffset==a.parent.content.size,c=e.tr;e.selection instanceof i.TextSelection&&c.deleteSelection();var d=0==s.depth?null:s.node(-1).contentMatchAt(s.indexAfter(-1)).defaultType,u=l&&d?[{type:d}]:null,h=o.canSplit(c.doc,c.mapping.map(s.pos),1,u);u||h||!o.canSplit(c.doc,c.mapping.map(s.pos),1,d&&[{type:d}])||(u=[{type:d}],h=!0),h&&(c.split(c.mapping.map(s.pos),1,u),l||s.parentOffset||s.parent.type==d||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),r.Fragment.from(d.create(),s.parent))||c.setNodeMarkup(c.mapping.map(s.before()),d)),t(c.scrollIntoView())}return!0}function b(e,t){return t&&t(e.tr.setSelection(new i.AllSelection(e.doc))),!0}function x(e,t,n){var s,a,l=t.nodeBefore,c=t.nodeAfter;if(l.type.spec.isolating||c.type.spec.isolating)return!1;if(function(e,t,n){var r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!(!(r&&i&&r.type.compatibleContent(i.type))||(!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(s,s+1)||!i.isTextblock&&!o.canJoin(e.doc,t.pos)||(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(s=(a=l.contentMatchAt(l.childCount)).findWrapping(c.type))&&a.matchType(s[0]||c.type).validEnd){if(n){for(var d=t.pos+c.nodeSize,u=r.Fragment.empty,h=s.length-1;h>=0;h--)u=r.Fragment.from(s[h].create(null,u));u=r.Fragment.from(l.copy(u));var p=e.tr.step(new o.ReplaceAroundStep(t.pos-1,d,t.pos,d,new r.Slice(u,1,0),s.length,!0)),f=d+2*s.length;o.canJoin(p.doc,f)&&p.join(f),n(p.scrollIntoView())}return!0}var m=i.Selection.findFrom(t,1),g=m&&m.$from.blockRange(m.$to),v=g&&o.liftTarget(g);return null!=v&&v>=t.depth&&(n&&n(e.tr.lift(g,v).scrollIntoView()),!0)}function w(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,o){for(var r=0;r<e.length;r++)if(e[r](t,n,o))return!0;return!1}}var k=w(s,a,c),S=w(s,u,h),M={Enter:w(f,g,v,y),"Mod-Enter":m,Backspace:k,"Mod-Backspace":k,Delete:S,"Mod-Delete":S,"Mod-a":b},C={"Ctrl-h":M.Backspace,"Alt-Backspace":M["Mod-Backspace"],"Ctrl-d":M.Delete,"Ctrl-Alt-Backspace":M["Mod-Delete"],"Alt-Delete":M["Mod-Delete"],"Alt-d":M["Mod-Delete"]};for(var E in M)C[E]=M[E];var T=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?C:M;t.deleteSelection=s,t.joinBackward=a,t.selectNodeBackward=c,t.joinForward=u,t.selectNodeForward=h,t.joinUp=function(e,t){var n,r=e.selection,s=r instanceof i.NodeSelection;if(s){if(r.node.isTextblock||!o.canJoin(e.doc,r.from))return!1;n=r.from}else if(null==(n=o.joinPoint(e.doc,r.from,-1)))return!1;if(t){var a=e.tr.join(n);s&&a.setSelection(i.NodeSelection.create(a.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(a.scrollIntoView())}return!0},t.joinDown=function(e,t){var n,r=e.selection;if(r instanceof i.NodeSelection){if(r.node.isTextblock||!o.canJoin(e.doc,r.to))return!1;n=r.to}else if(null==(n=o.joinPoint(e.doc,r.to,1)))return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},t.lift=function(e,t){var n=e.selection,r=n.$from,i=n.$to,s=r.blockRange(i),a=s&&o.liftTarget(s);return null!=a&&(t&&t(e.tr.lift(s,a).scrollIntoView()),!0)},t.newlineInCode=f,t.exitCode=m,t.createParagraphNear=g,t.liftEmptyBlock=v,t.splitBlock=y,t.splitBlockKeepMarks=function(e,t){return y(e,t&&function(n){var o=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();o&&n.ensureMarks(o),t(n)})},t.selectParentNode=function(e,t){var n,o=e.selection,r=o.$from,s=o.to,a=r.sharedDepth(s);return 0!=a&&(n=r.before(a),t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,n))),!0)},t.selectAll=b,t.wrapIn=function(e,t){return function(n,r){var i=n.selection,s=i.$from,a=i.$to,l=s.blockRange(a),c=l&&o.findWrapping(l,e,t);return!!c&&(r&&r(n.tr.wrap(l,c).scrollIntoView()),!0)}},t.setBlockType=function(e,t){return function(n,o){var r=n.selection,i=r.from,s=r.to,a=!1;return n.doc.nodesBetween(i,s,(function(o,r){if(a)return!1;if(o.isTextblock&&!o.hasMarkup(e,t))if(o.type==e)a=!0;else{var i=n.doc.resolve(r),s=i.index();a=i.parent.canReplaceWith(s,s+1,e)}})),!!a&&(o&&o(n.tr.setBlockType(i,s,e,t).scrollIntoView()),!0)}},t.toggleMark=function(e,t){return function(n,o){var r=n.selection,i=r.empty,s=r.$cursor,a=r.ranges;if(i&&!s||!function(e,t,n){for(var o=function(o){var r=t[o],i=r.$from,s=r.$to,a=0==i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)})),a)return{v:!0}},r=0;r<t.length;r++){var i=o(r);if(i)return i.v}return!1}(n.doc,a,e))return!1;if(o)if(s)e.isInSet(n.storedMarks||s.marks())?o(n.tr.removeStoredMark(e)):o(n.tr.addStoredMark(e.create(t)));else{for(var l=!1,c=n.tr,d=0;!l&&d<a.length;d++){var u=a[d],h=u.$from,p=u.$to;l=n.doc.rangeHasMark(h.pos,p.pos,e)}for(var f=0;f<a.length;f++){var m=a[f],g=m.$from,v=m.$to;l?c.removeMark(g.pos,v.pos,e):c.addMark(g.pos,v.pos,e.create(t))}o(c.scrollIntoView())}return!0}},t.autoJoin=function(e,t){if(Array.isArray(t)){var n=t;t=function(e){return n.indexOf(e.type.name)>-1}}return function(n,r){return e(n,r&&function(e,t){return function(n){if(!n.isGeneric)return e(n);for(var r=[],i=0;i<n.mapping.maps.length;i++){for(var s=n.mapping.maps[i],a=0;a<r.length;a++)r[a]=s.map(r[a]);s.forEach((function(e,t,n,o){return r.push(n,o)}))}for(var l=[],c=0;c<r.length;c+=2)for(var d=r[c],u=r[c+1],h=n.doc.resolve(d),p=h.sharedDepth(u),f=h.node(p),m=h.indexAfter(p),g=h.after(p+1);g<=u;++m){var v=f.maybeChild(m);if(!v)break;if(m&&-1==l.indexOf(g)){var y=f.child(m-1);y.type==v.type&&t(y,v)&&l.push(g)}g+=v.nodeSize}l.sort((function(e,t){return e-t}));for(var b=l.length-1;b>=0;b--)o.canJoin(n.doc,l[b])&&n.join(l[b]);e(n)}}(r,t))}},t.chainCommands=w,t.pcBaseKeymap=M,t.macBaseKeymap=C,t.baseKeymap=T},"./node_modules/prosemirror-dropcursor/dist/dropcursor.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=n("./node_modules/prosemirror-transform/dist/index.js");var i=function(e,t){var n=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var o=function(e){return n[t](e)};return e.dom.addEventListener(t,o),{name:t,handler:o}}))};i.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var n=t.name,o=t.handler;return e.editorView.dom.removeEventListener(n,o)}))},i.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&this.updateOverlay()},i.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},i.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,o=t.nodeAfter;if(n||o){var r=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?r.bottom:r.top;n&&o&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:r.left,right:r.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var s=this.editorView.coordsAtPos(this.cursorPos);e={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var l=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=e.left-l.left+"px",this.element.style.top=e.top-l.top+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},i.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},i.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var n=t.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=r.dropPoint(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=t.pos),this.setCursor(n),this.scheduleRemoval(5e3)}}},i.prototype.dragend=function(){this.scheduleRemoval(20)},i.prototype.drop=function(){this.scheduleRemoval(20)},i.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)},t.dropCursor=function(e){return void 0===e&&(e={}),new o.Plugin({view:function(t){return new i(t,e)}})}},"./node_modules/prosemirror-gapcursor/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-keymap/dist/keymap.js"),r=n("./node_modules/prosemirror-state/dist/index.js"),i=n("./node_modules/prosemirror-view/dist/index.js"),s=n("./node_modules/prosemirror-model/dist/index.js"),a=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,o){var r=n.resolve(o.map(this.head));return t.valid(r)?new t(r):e.near(r)},t.prototype.content=function(){return s.Slice.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(n.pos))},t.prototype.getBookmark=function(){return new l(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var n=e.index(t);if(0!=n)for(var o=e.node(t).child(n-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),o=e.node(t);if(n!=o.childCount)for(var r=o.child(n);;r=r.firstChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(e))return!1;var n=t.type.spec.allowGapCursor;if(null!=n)return n;var o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock},t.findFrom=function(e,n,o){if(!o&&t.valid(e))return e;for(var r=e.pos,i=null,s=e.depth;;s--){var a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.maybeChild(n>0?e.indexAfter(s):e.index(s)-1);break}if(0==s)return null;r+=n;var l=e.doc.resolve(r);if(t.valid(l))return l}for(;i=n>0?i.firstChild:i.lastChild;){r+=n;var c=e.doc.resolve(r);if(t.valid(c))return c}return null},t}(r.Selection);a.prototype.visible=!1,r.Selection.jsonID("gapcursor",a);var l=function(e){this.pos=e};l.prototype.map=function(e){return new l(e.map(this.pos))},l.prototype.resolve=function(e){var t=e.resolve(this.pos);return a.valid(t)?new a(t):r.Selection.near(t)};var c=o.keydownHandler({ArrowLeft:d("horiz",-1),ArrowRight:d("horiz",1),ArrowUp:d("vert",-1),ArrowDown:d("vert",1)});function d(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,o,i){var s=e.selection,l=t>0?s.$to:s.$from,c=s.empty;if(s instanceof r.TextSelection){if(!i.endOfTextblock(n))return!1;c=!1,l=e.doc.resolve(t>0?l.after():l.before())}var d=a.findFrom(l,t,c);return!!d&&(o&&o(e.tr.setSelection(new a(d))),!0)}}function u(e,t,n){if(e.someProp("editable",(function(t){return!1===t(e.state)})))return!1;var o=e.state.doc.resolve(t);if(!a.valid(o))return!1;var i=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(i>-1&&r.NodeSelection.isSelectable(e.state.doc.nodeAt(i)))&&(e.dispatch(e.state.tr.setSelection(new a(o))),!0)}function h(e){if(!(e.selection instanceof a))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",i.DecorationSet.create(e.doc,[i.Decoration.widget(e.selection.head,t,{key:"gapcursor"})])}t.gapCursor=function(){return new r.Plugin({props:{decorations:h,createSelectionBetween:function(e,t,n){if(t.pos==n.pos&&a.valid(n))return new a(n)},handleClick:u,handleKeyDown:c}})},t.GapCursor=a},"./node_modules/prosemirror-history/dist/history.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n("./node_modules/rope-sequence/dist/index.js"))&&"object"==typeof o&&"default"in o?o.default:o,i=n("./node_modules/prosemirror-transform/dist/index.js"),s=n("./node_modules/prosemirror-state/dist/index.js"),a=function(e,t){this.items=e,this.eventCount=t};a.prototype.popEvent=function(e,t){var n=this;if(0==this.eventCount)return null;for(var o,r,i=this.items.length;;i--){if(n.items.get(i-1).selection){--i;break}}t&&(o=this.remapping(i,this.items.length),r=o.maps.length);var s,c,d=e.tr,u=[],h=[];return this.items.forEach((function(e,t){if(!e.step)return o||(o=n.remapping(i,t+1),r=o.maps.length),r--,void h.push(e);if(o){h.push(new l(e.map));var p,f=e.step.map(o.slice(r));f&&d.maybeStep(f).doc&&(p=d.mapping.maps[d.mapping.maps.length-1],u.push(new l(p,null,null,u.length+h.length))),r--,p&&o.appendMap(p,r)}else d.maybeStep(e.step);return e.selection?(s=o?e.selection.map(o.slice(r)):e.selection,c=new a(n.items.slice(0,i).append(h.reverse().concat(u)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:d,selection:s}},a.prototype.addTransform=function(e,t,n,o){for(var r=[],i=this.eventCount,s=this.items,c=!o&&s.length?s.get(s.length-1):null,u=0;u<e.steps.length;u++){var h,p=e.steps[u].invert(e.docs[u]),f=new l(e.mapping.maps[u],p,t);(h=c&&c.merge(f))&&(f=h,u?r.pop():s=s.slice(0,s.length-1)),r.push(f),t&&(i++,t=null),o||(c=f)}var m,g,v,y=i-n.depth;return y>d&&(g=y,(m=s).forEach((function(e,t){if(e.selection&&0==g--)return v=t,!1})),s=m.slice(v),i-=y),new a(s.append(r),i)},a.prototype.remapping=function(e,t){var n=new i.Mapping;return this.items.forEach((function(t,o){var r=null!=t.mirrorOffset&&o-t.mirrorOffset>=e?r=n.maps.length-t.mirrorOffset:null;n.appendMap(t.map,r)}),e,t),n},a.prototype.addMaps=function(e){return 0==this.eventCount?this:new a(this.items.append(e.map((function(e){return new l(e)}))),this.eventCount)},a.prototype.rebased=function(e,t){if(!this.eventCount)return this;var n=[],o=Math.max(0,this.items.length-t),r=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),o);var c=t;this.items.forEach((function(t){var o=r.getMirror(--c);if(null!=o){i=Math.min(i,o);var a=r.maps[o];if(t.step){var d=e.steps[o].invert(e.docs[o]),u=t.selection&&t.selection.map(r.slice(c+1,o));u&&s++,n.push(new l(a,d,u))}else n.push(new l(a))}}),o);for(var d=[],u=t;u<i;u++)d.push(new l(r.maps[u]));var h=this.items.slice(0,o).append(d).append(n),p=new a(h,s);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-n.length)),p},a.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},a.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),n=t.maps.length,o=[],i=0;return this.items.forEach((function(r,s){if(s>=e)o.push(r),r.selection&&i++;else if(r.step){var a=r.step.map(t.slice(n)),c=a&&a.getMap();if(n--,c&&t.appendMap(c,n),a){var d=r.selection&&r.selection.map(t.slice(n));d&&i++;var u,h=new l(c.invert(),a,d),p=o.length-1;(u=o.length&&o[p].merge(h))?o[p]=u:o.push(h)}}else r.map&&n--}),this.items.length,0),new a(r.from(o.reverse()),i)},a.empty=new a(r.empty,0);var l=function(e,t,n,o){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=o};l.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new l(t.getMap().invert(),t,this.selection)}};var c=function(e,t,n,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=o},d=20;function u(e){var t=[];return e.forEach((function(e,n,o,r){return t.push(o,r)})),t}function h(e,t){if(!e)return null;for(var n=[],o=0;o<e.length;o+=2){var r=t.map(e[o],1),i=t.map(e[o+1],-1);r<=i&&n.push(r,i)}return n}function p(e,t,n,o){var r=g(t),i=v.get(t).spec.config,s=(o?e.undone:e.done).popEvent(t,r);if(s){var a=s.selection.resolve(s.transform.doc),l=(o?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),d=new c(o?l:s.remaining,o?s.remaining:l,null,0);n(s.transform.setSelection(a).setMeta(v,{redo:o,historyState:d}).scrollIntoView())}}var f=!1,m=null;function g(e){var t=e.plugins;if(m!=t){f=!1,m=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){f=!0;break}}return f}var v=new s.PluginKey("history"),y=new s.PluginKey("closeHistory");t.HistoryState=c,t.closeHistory=function(e){return e.setMeta(y,!0)},t.history=function(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new s.Plugin({key:v,state:{init:function(){return new c(a.empty,a.empty,null,0)},apply:function(t,n,o){return function(e,t,n,o){var r,i=n.getMeta(v);if(i)return i.historyState;n.getMeta(y)&&(e=new c(e.done,e.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(v))return s.getMeta(v).redo?new c(e.done.addTransform(n,null,o,g(t)),e.undone,u(n.mapping.maps[n.steps.length-1]),e.prevTime):new c(e.done,e.undone.addTransform(n,null,o,g(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new c(e.done.rebased(n,r),e.undone.rebased(n,r),h(e.prevRanges,n.mapping),e.prevTime):new c(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),h(e.prevRanges,n.mapping),e.prevTime);var l=e.prevTime<(n.time||0)-o.newGroupDelay||!s&&!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach((function(e,o){for(var r=0;r<t.length;r+=2)e<=t[r+1]&&o>=t[r]&&(n=!0)})),n}(n,e.prevRanges),d=s?h(e.prevRanges,n.mapping):u(n.mapping.maps[n.steps.length-1]);return new c(e.done.addTransform(n,l?t.selection.getBookmark():null,o,g(t)),a.empty,d,n.time)}(n,o,t,e)}},config:e})},t.undo=function(e,t){var n=v.getState(e);return!(!n||0==n.done.eventCount)&&(t&&p(n,e,t,!1),!0)},t.redo=function(e,t){var n=v.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&p(n,e,t,!0),!0)},t.undoDepth=function(e){var t=v.getState(e);return t?t.done.eventCount:0},t.redoDepth=function(e){var t=v.getState(e);return t?t.undone.eventCount:0}},"./node_modules/prosemirror-inputrules/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=n("./node_modules/prosemirror-transform/dist/index.js"),i=function(e,t){var n;this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,o,r){var i=n;if(t[1]){var s=t[0].lastIndexOf(t[1]);i+=t[0].slice(s+t[1].length);var a=(o+=s)-r;a>0&&(i=t[0].slice(s-a,s)+i,o=r)}return e.tr.insertText(i,o,r)}):t};function s(e,t,n,o,r,i){if(e.composing)return!1;var s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"")+o,c=0;c<r.length;c++){var d=r[c].match.exec(l),u=d&&r[c].handler(s,d,t-(d[0].length-o.length),n);if(u)return e.dispatch(u.setMeta(i,{transform:u,from:t,to:n,text:o})),!0}return!1}var a=new i(/--$/,""),l=new i(/\.\.\.$/,""),c=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),d=new i(/"$/,""),u=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),h=new i(/'$/,""),p=[c,d,u,h];t.InputRule=i,t.inputRules=function(e){var t=e.rules,n=new o.Plugin({state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,o,r,i){return s(e,o,r,i,t,n)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var o=e.state.selection.$cursor;o&&s(e,o.pos,o.pos,"",t,n)}))}}},isInputRules:!0});return n},t.undoInputRule=function(e,t){for(var n=e.plugins,o=0;o<n.length;o++){var r=n[o],i=void 0;if(r.spec.isInputRules&&(i=r.getState(e))){if(t){for(var s=e.tr,a=i.transform,l=a.steps.length-1;l>=0;l--)s.step(a.steps[l].invert(a.docs[l]));var c=s.doc.resolve(i.from).marks();t(s.replaceWith(i.from,i.to,e.schema.text(i.text,c)))}return!0}}return!1},t.emDash=a,t.ellipsis=l,t.openDoubleQuote=c,t.closeDoubleQuote=d,t.openSingleQuote=u,t.closeSingleQuote=h,t.smartQuotes=p,t.wrappingInputRule=function(e,t,n,o){return new i(e,(function(e,i,s,a){var l=n instanceof Function?n(i):n,c=e.tr.delete(s,a),d=c.doc.resolve(s).blockRange(),u=d&&r.findWrapping(d,t,l);if(!u)return null;c.wrap(d,u);var h=c.doc.resolve(s-1).nodeBefore;return h&&h.type==t&&r.canJoin(c.doc,s-1)&&(!o||o(i,h))&&c.join(s-1),c}))},t.textblockTypeInputRule=function(e,t,n){return new i(e,(function(e,o,r,i){var s=e.doc.resolve(r),a=n instanceof Function?n(o):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(r,i).setBlockType(r,r,t,a):null}))}},"./node_modules/prosemirror-keymap/dist/keymap.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/w3c-keyname/index.es.js"),r=n("./node_modules/prosemirror-state/dist/index.js"),i="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function s(e){var t,n,o,r,s=e.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(var l=0;l<s.length-1;l++){var c=s[l];if(/^(cmd|meta|m)$/i.test(c))r=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))o=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);i?r=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),r&&(a="Meta-"+a),o&&(a="Shift-"+a),a}function a(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}function l(e){var t=function(e){var t=Object.create(null);for(var n in e)t[s(n)]=e[n];return t}(e);return function(e,n){var r,i=o.keyName(n),s=1==i.length&&" "!=i,l=t[a(i,n,!s)];if(l&&l(e.state,e.dispatch,e))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey)&&(r=o.base[n.keyCode])&&r!=i){var c=t[a(r,n,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}t.keymap=function(e){return new r.Plugin({props:{handleKeyDown:l(e)}})},t.keydownHandler=l},"./node_modules/prosemirror-model/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n("./node_modules/orderedmap/index.js"))&&"object"==typeof o&&"default"in o?o.default:o;function i(e,t,n){for(var o=0;;o++){if(o==e.childCount||o==t.childCount)return e.childCount==t.childCount?null:n;var r=e.child(o),s=t.child(o);if(r!=s){if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(var a=0;r.text[a]==s.text[a];a++)n++;return n}if(r.content.size||s.content.size){var l=i(r.content,s.content,n+1);if(null!=l)return l}n+=r.nodeSize}else n+=r.nodeSize}}function s(e,t,n,o){for(var r=e.childCount,i=t.childCount;;){if(0==r||0==i)return r==i?null:{a:n,b:o};var a=e.child(--r),l=t.child(--i),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:o};if(a.isText&&a.text!=l.text){for(var d=0,u=Math.min(a.text.length,l.text.length);d<u&&a.text[a.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,o--;return{a:n,b:o}}if(a.content.size||l.content.size){var h=s(a.content,l.content,n-1,o-1);if(h)return h}n-=c,o-=c}else n-=c,o-=c}}var a=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var n=0;n<e.length;n++)this.size+=e[n].nodeSize},l={firstChild:{},lastChild:{},childCount:{}};a.prototype.nodesBetween=function(e,t,n,o,r){void 0===o&&(o=0);for(var i=0,s=0;s<t;i++){var a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,o+s,r,i)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,o+c)}s=l}},a.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},a.prototype.textBetween=function(e,t,n,o){var r="",i=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(r+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf&&o?(r+=o,i=!n):!i&&s.isBlock&&(r+=n,i=!0)}),0),r},a.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,o=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(n)&&(o[o.length-1]=t.withText(t.text+n.text),r=1);r<e.content.length;r++)o.push(e.content[r]);return new a(o,this.size+e.size)},a.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],o=0;if(t>e)for(var r=0,i=0;i<t;r++){var s=this.content[r],l=i+s.nodeSize;l>e&&((i<e||l>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),o+=s.nodeSize),i=l}return new a(n,o)},a.prototype.cutByIndex=function(e,t){return e==t?a.empty:0==e&&t==this.content.length?this:new a(this.content.slice(e,t))},a.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var o=this.content.slice(),r=this.size+t.nodeSize-n.nodeSize;return o[e]=t,new a(o,r)},a.prototype.addToStart=function(e){return new a([e].concat(this.content),this.size+e.nodeSize)},a.prototype.addToEnd=function(e){return new a(this.content.concat(e),this.size+e.nodeSize)},a.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},l.firstChild.get=function(){return this.content.length?this.content[0]:null},l.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},l.childCount.get=function(){return this.content.length},a.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},a.prototype.maybeChild=function(e){return this.content[e]},a.prototype.forEach=function(e){for(var t=0,n=0;t<this.content.length;t++){var o=this.content[t];e(o,n,t),n+=o.nodeSize}},a.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),i(this,e,t)},a.prototype.findDiffEnd=function(e,t,n){return void 0===t&&(t=this.size),void 0===n&&(n=e.size),s(this,e,t,n)},a.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return d(0,e);if(e==this.size)return d(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var n=0,o=0;;n++){var r=o+this.child(n).nodeSize;if(r>=e)return r==e||t>0?d(n+1,r):d(n,o);o=r}},a.prototype.toString=function(){return"<"+this.toStringInner()+">"},a.prototype.toStringInner=function(){return this.content.join(", ")},a.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},a.fromJSON=function(e,t){if(!t)return a.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(t.map(e.nodeFromJSON))},a.fromArray=function(e){if(!e.length)return a.empty;for(var t,n=0,o=0;o<e.length;o++){var r=e[o];n+=r.nodeSize,o&&r.isText&&e[o-1].sameMarkup(r)?(t||(t=e.slice(0,o)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new a(t||e,n)},a.from=function(e){if(!e)return a.empty;if(e instanceof a)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new a([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(a.prototype,l);var c={index:0,offset:0};function d(e,t){return c.index=e,c.offset=t,c}function u(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!u(e[o],t[o]))return!1}else{for(var r in e)if(!(r in t)||!u(e[r],t[r]))return!1;for(var i in t)if(!(i in e))return!1}return!0}a.empty=new a([],0);var h=function(e,t){this.type=e,this.attrs=t};function p(e){var t=Error.call(this,e);return t.__proto__=p.prototype,t}h.prototype.addToSet=function(e){for(var t,n=this,o=!1,r=0;r<e.length;r++){var i=e[r];if(n.eq(i))return e;if(n.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(n.type))return e;!o&&i.type.rank>n.type.rank&&(t||(t=e.slice(0,r)),t.push(n),o=!0),t&&t.push(i)}}return t||(t=e.slice()),o||t.push(this),t},h.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},h.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},h.prototype.eq=function(e){return this==e||this.type==e.type&&u(this.attrs,e.attrs)},h.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},h.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type "+t.type+" in this schema");return n.create(t.attrs)},h.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0},h.setFrom=function(e){if(!e||0==e.length)return h.none;if(e instanceof h)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},h.none=[],p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="ReplaceError";var f=function(e,t,n){this.content=e,this.openStart=t,this.openEnd=n},m={size:{}};function g(e,t,n){var o=e.findIndex(t),r=o.index,i=o.offset,s=e.maybeChild(r),a=e.findIndex(n),l=a.index,c=a.offset;if(i==t||s.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(g(s.content,t-i-1,n-i-1)))}function v(e,t,n,o){var r=e.findIndex(t),i=r.index,s=r.offset,a=e.maybeChild(i);if(s==t||a.isText)return o&&!o.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=v(a.content,t-s-1,n);return l&&e.replaceChild(i,a.copy(l))}function y(e,t,n){if(n.openStart>e.depth)throw new p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new p("Inconsistent open depths");return b(e,t,n,0)}function b(e,t,n,o){var r=e.index(o),i=e.node(o);if(r==t.index(o)&&o<e.depth-n.openStart){var s=b(e,t,n,o+1);return i.copy(i.content.replaceChild(r,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=o||t.depth!=o){var l=function(e,t){for(var n=t.depth-e.openStart,o=t.node(n).copy(e.content),r=n-1;r>=0;r--)o=t.node(r).copy(a.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}(n,e);return M(i,C(e,l.start,l.end,t,o))}var c=e.parent,d=c.content;return M(c,d.cut(0,e.parentOffset).append(n.content).append(d.cut(t.parentOffset)))}return M(i,E(e,t,o))}function x(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function w(e,t,n){var o=e.node(n);return x(o,t.node(n)),o}function k(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function S(e,t,n,o){var r=(t||e).node(n),i=0,s=t?t.index(n):r.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(k(e.nodeAfter,o),i++));for(var a=i;a<s;a++)k(r.child(a),o);t&&t.depth==n&&t.textOffset&&k(t.nodeBefore,o)}function M(e,t){if(!e.type.validContent(t))throw new p("Invalid content for node "+e.type.name);return e.copy(t)}function C(e,t,n,o,r){var i=e.depth>r&&w(e,t,r+1),s=o.depth>r&&w(n,o,r+1),l=[];return S(null,e,r,l),i&&s&&t.index(r)==n.index(r)?(x(i,s),k(M(i,C(e,t,n,o,r+1)),l)):(i&&k(M(i,E(e,t,r+1)),l),S(t,n,r,l),s&&k(M(s,E(n,o,r+1)),l)),S(o,null,r,l),new a(l)}function E(e,t,n){var o=[];(S(null,e,n,o),e.depth>n)&&k(M(w(e,t,n+1),E(e,t,n+1)),o);return S(t,null,n,o),new a(o)}m.size.get=function(){return this.content.size-this.openStart-this.openEnd},f.prototype.insertAt=function(e,t){var n=v(this.content,e+this.openStart,t,null);return n&&new f(n,this.openStart,this.openEnd)},f.prototype.removeBetween=function(e,t){return new f(g(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},f.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},f.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},f.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},f.fromJSON=function(e,t){if(!t)return f.empty;var n=t.openStart||0,o=t.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(e,t.content),t.openStart||0,t.openEnd||0)},f.maxOpen=function(e,t){void 0===t&&(t=!0);for(var n=0,o=0,r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)o++;return new f(e,n,o)},Object.defineProperties(f.prototype,m),f.empty=new f(a.empty,0,0);var T=function(e,t,n){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=n},O={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};T.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},O.parent.get=function(){return this.node(this.depth)},O.doc.get=function(){return this.node(0)},T.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},T.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},T.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},T.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},T.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},T.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},T.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},O.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},O.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],o=e.child(t);return n?e.child(t).cut(n):o},O.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},T.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return h.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),o=e.maybeChild(t);if(!n){var r=n;n=o,o=r}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||o&&i[s].isInSet(o.marks)||(i=i[s--].removeFromSet(i));return i},T.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,o=e.parent.maybeChild(e.index()),r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||o&&n[r].isInSet(o.marks)||(n=n[r--].removeFromSet(n));return n},T.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},T.prototype.blockRange=function(e,t){var n=this;if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var o=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);o>=0;o--)if(e.pos<=n.end(o)&&(!t||t(n.node(o))))return new I(n,e,o)},T.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},T.prototype.max=function(e){return e.pos>this.pos?e:this},T.prototype.min=function(e){return e.pos<this.pos?e:this},T.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},T.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var n=[],o=0,r=t,i=e;;){var s=i.content.findIndex(r),a=s.index,l=s.offset,c=r-l;if(n.push(i,a,o+l),!c)break;if((i=i.child(a)).isText)break;r=c-1,o+=l+1}return new T(t,n,r)},T.resolveCached=function(e,t){for(var n=0;n<A.length;n++){var o=A[n];if(o.pos==t&&o.doc==e)return o}var r=A[R]=T.resolve(e,t);return R=(R+1)%N,r},Object.defineProperties(T.prototype,O);var A=[],R=0,N=12,I=function(e,t,n){this.$from=e,this.$to=t,this.depth=n},_={start:{},end:{},parent:{},startIndex:{},endIndex:{}};_.start.get=function(){return this.$from.before(this.depth+1)},_.end.get=function(){return this.$to.after(this.depth+1)},_.parent.get=function(){return this.$from.node(this.depth)},_.startIndex.get=function(){return this.$from.index(this.depth)},_.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(I.prototype,_);var P=Object.create(null),j=function(e,t,n,o){this.type=e,this.attrs=t,this.content=n||a.empty,this.marks=o||h.none},D={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};D.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},D.childCount.get=function(){return this.content.childCount},j.prototype.child=function(e){return this.content.child(e)},j.prototype.maybeChild=function(e){return this.content.maybeChild(e)},j.prototype.forEach=function(e){this.content.forEach(e)},j.prototype.nodesBetween=function(e,t,n,o){void 0===o&&(o=0),this.content.nodesBetween(e,t,n,o,this)},j.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},D.textContent.get=function(){return this.textBetween(0,this.content.size,"")},j.prototype.textBetween=function(e,t,n,o){return this.content.textBetween(e,t,n,o)},D.firstChild.get=function(){return this.content.firstChild},D.lastChild.get=function(){return this.content.lastChild},j.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},j.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},j.prototype.hasMarkup=function(e,t,n){return this.type==e&&u(this.attrs,t||e.defaultAttrs||P)&&h.sameSet(this.marks,n||h.none)},j.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},j.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},j.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},j.prototype.slice=function(e,t,n){if(void 0===t&&(t=this.content.size),void 0===n&&(n=!1),e==t)return f.empty;var o=this.resolve(e),r=this.resolve(t),i=n?0:o.sharedDepth(t),s=o.start(i),a=o.node(i).content.cut(o.pos-s,r.pos-s);return new f(a,o.depth-i,r.depth-i)},j.prototype.replace=function(e,t,n){return y(this.resolve(e),this.resolve(t),n)},j.prototype.nodeAt=function(e){for(var t=this;;){var n=t.content.findIndex(e),o=n.index,r=n.offset;if(!(t=t.maybeChild(o)))return null;if(r==e||t.isText)return t;e-=r+1}},j.prototype.childAfter=function(e){var t=this.content.findIndex(e),n=t.index,o=t.offset;return{node:this.content.maybeChild(n),index:n,offset:o}},j.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,o=t.offset;if(o<e)return{node:this.content.child(n),index:n,offset:o};var r=this.content.child(n-1);return{node:r,index:n-1,offset:o-r.nodeSize}},j.prototype.resolve=function(e){return T.resolveCached(this,e)},j.prototype.resolveNoCache=function(e){return T.resolve(this,e)},j.prototype.rangeHasMark=function(e,t,n){var o=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(o=!0),!o})),o},D.isBlock.get=function(){return this.type.isBlock},D.isTextblock.get=function(){return this.type.isTextblock},D.inlineContent.get=function(){return this.type.inlineContent},D.isInline.get=function(){return this.type.isInline},D.isText.get=function(){return this.type.isText},D.isLeaf.get=function(){return this.type.isLeaf},D.isAtom.get=function(){return this.type.isAtom},j.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),B(this.marks,e)},j.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},j.prototype.canReplace=function(e,t,n,o,r){void 0===n&&(n=a.empty),void 0===o&&(o=0),void 0===r&&(r=n.childCount);var i=this.contentMatchAt(e).matchFragment(n,o,r),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var l=o;l<r;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0},j.prototype.canReplaceWith=function(e,t,n,o){if(o&&!this.type.allowsMarks(o))return!1;var r=this.contentMatchAt(e).matchType(n),i=r&&r.matchFragment(this.content,t);return!!i&&i.validEnd},j.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},j.prototype.defaultContentType=function(e){return this.contentMatchAt(e).defaultType},j.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(e){return e.check()}))},j.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},j.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var o=a.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,o,n)},Object.defineProperties(j.prototype,D);var z=function(e){function t(t,n,o,r){if(e.call(this,t,n,null,r),!o)throw new RangeError("Empty text nodes are not allowed");this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={textContent:{},nodeSize:{}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},n.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,n),t}(j);function B(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var L=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},$={inlineContent:{},defaultType:{},edgeCount:{}};L.parse=function(e,t){var n=new F(e,t);if(null==n.next)return L.empty;var o=H(n);n.next&&n.err("Unexpected trailing text");var r=function(e){var t=Object.create(null);return n(G(e,0));function n(o){var r=[];o.forEach((function(t){e[t].forEach((function(t){var n=t.term,o=t.to;if(n){var i=r.indexOf(n),s=i>-1&&r[i+1];G(e,o).forEach((function(e){s||r.push(n,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var i=t[o.join(",")]=new L(o.indexOf(e.length-1)>-1),s=0;s<r.length;s+=2){var a=r[s+1].sort(K);i.next.push(r[s],t[a.join(",")]||n(a))}return i}}(function(e){var t=[[]];return r(i(e,0),n()),t;function n(){return t.push([])-1}function o(e,n,o){var r={term:o,to:n};return t[e].push(r),r}function r(e,t){e.forEach((function(e){return e.to=t}))}function i(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(i(n,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=i(e.exprs[s],t);if(s==e.exprs.length-1)return a;r(a,t=n())}else{if("star"==e.type){var l=n();return o(t,l),r(i(e.expr,l),l),[o(l)]}if("plus"==e.type){var c=n();return r(i(e.expr,t),c),r(i(e.expr,c),c),[o(c)]}if("opt"==e.type)return[o(t)].concat(i(e.expr,t));if("range"==e.type){for(var d=t,u=0;u<e.min;u++){var h=n();r(i(e.expr,d),h),d=h}if(-1==e.max)r(i(e.expr,d),d);else for(var p=e.min;p<e.max;p++){var f=n();o(d,f),r(i(e.expr,d),f),d=f}return[o(d)]}if("name"==e.type)return[o(t,null,e.value)]}}}(o));return function(e,t){for(var n=0,o=[e];n<o.length;n++){for(var r=o[n],i=!r.validEnd,s=[],a=0;a<r.next.length;a+=2){var l=r.next[a],c=r.next[a+1];s.push(l.name),!i||l.isText||l.hasRequiredAttrs()||(i=!1),-1==o.indexOf(c)&&o.push(c)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}(r,n),r},L.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},L.prototype.matchFragment=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.childCount);for(var o=this,r=t;o&&r<n;r++)o=o.matchType(e.child(r).type);return o},$.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},$.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},L.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var n=0;n<e.next.length;n+=2)if(this.next[t]==e.next[n])return!0;return!1},L.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var o=[this];return function r(i,s){var l=i.matchFragment(e,n);if(l&&(!t||l.validEnd))return a.from(s.map((function(e){return e.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var d=i.next[c],u=i.next[c+1];if(!d.isText&&!d.hasRequiredAttrs()&&-1==o.indexOf(u)){o.push(u);var h=r(u,s.concat(d));if(h)return h}}}(this,[])},L.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n},L.prototype.computeWrapping=function(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var o=n.shift(),r=o.match;if(r.matchType(e)){for(var i=[],s=o;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<r.next.length;a+=2){var l=r.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||o.type&&!r.next[a+1].validEnd||(n.push({match:l.contentMatch,type:l,via:o}),t[l.name]=!0)}}},$.edgeCount.get=function(){return this.next.length>>1},L.prototype.edge=function(e){var t=e<<1;if(t>this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},L.prototype.toString=function(){var e=[];return function t(n){e.push(n);for(var o=1;o<n.next.length;o+=2)-1==e.indexOf(n.next[o])&&t(n.next[o])}(this),e.map((function(t,n){for(var o=n+(t.validEnd?"*":" ")+" ",r=0;r<t.next.length;r+=2)o+=(r?", ":"")+t.next[r].name+"->"+e.indexOf(t.next[r+1]);return o})).join("\n")},Object.defineProperties(L.prototype,$),L.empty=new L(!0);var F=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},V={next:{}};function H(e){var t=[];do{t.push(U(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function U(e){var t=[];do{t.push(W(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function W(e){for(var t=function(e){if(e.eat("(")){var t=H(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=function(e,t){var n=e.nodeTypes,o=n[t];if(o)return[o];var r=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&r.push(s)}0==r.length&&e.err("No node type or group '"+t+"' found");return r}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=J(e,t)}return t}function q(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function J(e,t){var n=q(e),o=n;return e.eat(",")&&(o="}"!=e.next?q(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:o,expr:t}}function K(e,t){return t-e}function G(e,t){var n=[];return function t(o){var r=e[o];if(1==r.length&&!r[0].term)return t(r[0].to);n.push(o);for(var i=0;i<r.length;i++){var s=r[i],a=s.term,l=s.to;a||-1!=n.indexOf(l)||t(l)}}(t),n.sort(K)}function X(e){var t=Object.create(null);for(var n in e){var o=e[n];if(!o.hasDefault)return null;t[n]=o.default}return t}function Y(e,t){var n=Object.create(null);for(var o in e){var r=t&&t[o];if(void 0===r){var i=e[o];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+o);r=i.default}n[o]=r}return n}function Z(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new te(e[n]);return t}V.next.get=function(){return this.tokens[this.pos]},F.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},F.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(F.prototype,V);var Q=function(e,t,n){this.name=e,this.schema=t,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Z(n.attrs),this.defaultAttrs=X(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e},ee={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};ee.isInline.get=function(){return!this.isBlock},ee.isTextblock.get=function(){return this.isBlock&&this.inlineContent},ee.isLeaf.get=function(){return this.contentMatch==L.empty},ee.isAtom.get=function(){return this.isLeaf||this.spec.atom},Q.prototype.hasRequiredAttrs=function(e){for(var t in this.attrs)if(this.attrs[t].isRequired&&(!e||!(t in e)))return!0;return!1},Q.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},Q.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Y(this.attrs,e)},Q.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new j(this,this.computeAttrs(e),a.from(t),h.setFrom(n))},Q.prototype.createChecked=function(e,t,n){if(t=a.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new j(this,this.computeAttrs(e),t,h.setFrom(n))},Q.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=a.from(t)).size){var o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}var r=this.contentMatch.matchFragment(t).fillBefore(a.empty,!0);return r?new j(this,e,t.append(r),h.setFrom(n)):null},Q.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0},Q.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},Q.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},Q.prototype.allowedMarks=function(e){var t;if(null==this.markSet)return e;for(var n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:h.empty:e},Q.compile=function(e,t){var n=Object.create(null);e.forEach((function(e,o){return n[e]=new Q(e,t,o)}));var o=t.spec.topNode||"doc";if(!n[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var r in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Q.prototype,ee);var te=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},ne={isRequired:{}};ne.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(te.prototype,ne);var oe=function(e,t,n,o){this.name=e,this.schema=n,this.spec=o,this.attrs=Z(o.attrs),this.rank=t,this.excluded=null;var r=X(this.attrs);this.instance=r&&new h(this,r)};oe.prototype.create=function(e){return!e&&this.instance?this.instance:new h(this,Y(this.attrs,e))},oe.compile=function(e,t){var n=Object.create(null),o=0;return e.forEach((function(e,r){return n[e]=new oe(e,o++,t,r)})),n},oe.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e},oe.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},oe.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var re=function(e){var t=this;for(var n in this.spec={},e)t.spec[n]=e[n];this.spec.nodes=r.from(e.nodes),this.spec.marks=r.from(e.marks),this.nodes=Q.compile(this.spec.nodes,this),this.marks=oe.compile(this.spec.marks,this);var o=Object.create(null);for(var i in t.nodes){if(i in t.marks)throw new RangeError(i+" can not be both a node and a mark");var s=t.nodes[i],a=s.spec.content||"",l=s.spec.marks;s.contentMatch=o[a]||(o[a]=L.parse(a,t.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==l?null:l?ie(t,l.split(" ")):""!=l&&s.inlineContent?null:[]}for(var c in t.marks){var d=t.marks[c],u=d.spec.excludes;d.excluded=null==u?[d]:""==u?[]:ie(t,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ie(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o],i=e.marks[r],s=i;if(i)n.push(i);else for(var a in e.marks){var l=e.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[o]+"'")}return n}re.prototype.node=function(e,t,n,o){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Q))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,o)},re.prototype.text=function(e,t){var n=this.nodes.text;return new z(n,n.defaultAttrs,e,h.setFrom(t))},re.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},re.prototype.nodeFromJSON=function(e){return j.fromJSON(this,e)},re.prototype.markFromJSON=function(e){return h.fromJSON(this,e)},re.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var se=function(e,t){var n=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?n.tags.push(e):e.style&&n.styles.push(e)}))};se.prototype.parse=function(e,t){void 0===t&&(t={});var n=new he(this,t,!1);return n.addAll(e,null,t.from,t.to),n.finish()},se.prototype.parseSlice=function(e,t){void 0===t&&(t={});var n=new he(this,t,!0);return n.addAll(e,null,t.from,t.to),f.maxOpen(n.finish())},se.prototype.matchTag=function(e,t){for(var n=0;n<this.tags.length;n++){var o=this.tags[n];if(fe(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var r=o.getAttrs(e);if(!1===r)continue;o.attrs=r}return o}}},se.prototype.matchStyle=function(e,t,n){for(var o=0;o<this.styles.length;o++){var r=this.styles[o];if(!(0!=r.style.indexOf(e)||r.context&&!n.matchesContext(r.context)||r.style.length>e.length&&(61!=r.style.charCodeAt(e.length)||r.style.slice(e.length+1)!=t))){if(r.getAttrs){var i=r.getAttrs(t);if(!1===i)continue;r.attrs=i}return r}}},se.schemaRules=function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,o=0;o<t.length;o++){var r=t[o];if((null==r.priority?50:r.priority)<n)break}t.splice(o,0,e)}var o=function(t){var o=e.marks[t].spec.parseDOM;o&&o.forEach((function(e){n(e=me(e)),e.mark=t}))};for(var r in e.marks)o(r);var i;for(var s in e.nodes)i=void 0,(i=e.nodes[s].spec.parseDOM)&&i.forEach((function(e){n(e=me(e)),e.node=s}));return t},se.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new se(e,se.schemaRules(e)))};var ae={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},le={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ce={ol:!0,ul:!0};function de(e){return(e?1:0)|("full"===e?2:0)}var ue=function(e,t,n,o,r,i){this.type=e,this.attrs=t,this.solid=o,this.match=r||(4&i?null:e.contentMatch),this.options=i,this.content=[],this.marks=n,this.activeMarks=h.none};ue.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(a.from(e));if(!t){var n,o=this.type.contentMatch;return(n=o.findWrapping(e.type))?(this.match=o,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ue.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var o=a.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o};var he=function(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.pendingMarks=[];var o,r=t.topNode,i=de(t.preserveWhitespace)|(n?4:0);o=r?new ue(r.type,r.attrs,h.none,!0,t.topMatch||r.type.contentMatch,i):new ue(n?null:e.schema.topNodeType,null,h.none,!0,null,i),this.nodes=[o],this.open=0,this.find=t.findPositions,this.needsBlock=!1},pe={top:{},currentPos:{}};function fe(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function me(e){var t={};for(var n in e)t[n]=e[n];return t}pe.top.get=function(){return this.nodes[this.open]},he.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,o=[];for(;t=n.exec(e);)o.push(t[1],t[2].trim());return o}(t)):null;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(e),null!=n)for(var r=0;r<n.length;r++)this.removePendingMark(n[r])}},he.prototype.addTextNode=function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)2&n.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var o=n.content[n.content.length-1],r=e.previousSibling;(!o||r&&"BR"==r.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},he.prototype.addElement=function(e){var t=e.nodeName.toLowerCase();ce.hasOwnProperty(t)&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var o=1==t.nodeType?t.nodeName.toLowerCase():null;o&&ce.hasOwnProperty(o)&&n?(n.appendChild(t),t=n):"li"==o?n=t:o&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:le.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip){n&&n.skip.nodeType&&(e=n.skip);var o,r=this.top,i=this.needsBlock;if(ae.hasOwnProperty(t))o=!0,r.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(r),this.needsBlock=i}else this.addElementByRule(e,n)},he.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},he.prototype.readStyles=function(e){for(var t=this,n=h.none,o=0;o<e.length;o+=2){var r=t.parser.matchStyle(e[o],e[o+1],t);if(r){if(r.ignore)return null;n=t.parser.schema.marks[r.mark].create(r.attrs).addToSet(n)}}return n},he.prototype.addElementByRule=function(e,t){var n,o,r,i=this;t.node?(o=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):n=this.enter(o,t.attrs,t.preserveWhitespace):(r=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(r));var s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return i.insertNode(e)}));else{var a=t.contentElement;"string"==typeof a?a=e.querySelector(a):"function"==typeof a&&(a=a(e)),a||(a=e),this.findAround(e,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),r&&this.removePendingMark(r)},he.prototype.addAll=function(e,t,n,o){for(var r=this,i=n||0,s=n?e.childNodes[n]:e.firstChild,a=null==o?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)r.findAtPoint(e,i),r.addDOM(s),t&&ae.hasOwnProperty(s.nodeName.toLowerCase())&&r.sync(t);this.findAtPoint(e,i)},he.prototype.findPlace=function(e){for(var t,n,o=this.open;o>=0;o--){var r=this.nodes[o],i=r.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=r,!i.length))break;if(r.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},he.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(e.type));for(var o=n.activeMarks,r=0;r<e.marks.length;r++)n.type&&!n.type.allowsMarkType(e.marks[r].type)||(o=e.marks[r].addToSet(o));return n.content.push(e.mark(o)),!0}return!1},he.prototype.applyPendingMarks=function(e){for(var t=0;t<this.pendingMarks.length;t++){var n=this.pendingMarks[t];e.type&&!e.type.allowsMarkType(n.type)||n.isInSet(e.activeMarks)||(e.activeMarks=n.addToSet(e.activeMarks),this.pendingMarks.splice(t--,1))}},he.prototype.enter=function(e,t,n){var o=this.findPlace(e.create(t));return o&&(this.applyPendingMarks(this.top),this.enterInner(e,t,!0,n)),o},he.prototype.enterInner=function(e,t,n,o){this.closeExtra();var r=this.top;r.match=r.match&&r.match.matchType(e,t);var i=null==o?-5&r.options:de(o);4&r.options&&0==r.content.length&&(i|=4),this.nodes.push(new ue(e,t,r.activeMarks,n,null,i)),this.open++},he.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},he.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},he.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},he.prototype.addPendingMark=function(e){this.pendingMarks.push(e)},he.prototype.removePendingMark=function(e){var t=this.pendingMarks.lastIndexOf(e);if(t>-1)this.pendingMarks.splice(t,1);else{var n=this.top;n.activeMarks=e.removeFromSet(n.activeMarks)}},pe.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,o=n.length-1;o>=0;o--)e+=n[o].nodeSize;t&&e++}return e},he.prototype.findAtPoint=function(e,t){var n=this;if(this.find)for(var o=0;o<this.find.length;o++)n.find[o].node==e&&n.find[o].offset==t&&(n.find[o].pos=n.currentPos)},he.prototype.findInside=function(e){var t=this;if(this.find)for(var n=0;n<this.find.length;n++)null==t.find[n].pos&&1==e.nodeType&&e.contains(t.find[n].node)&&(t.find[n].pos=t.currentPos)},he.prototype.findAround=function(e,t,n){var o=this;if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==o.find[r].pos&&1==e.nodeType&&e.contains(o.find[r].node))t.compareDocumentPosition(o.find[r].node)&(n?2:4)&&(o.find[r].pos=o.currentPos)}},he.prototype.findInText=function(e){var t=this;if(this.find)for(var n=0;n<this.find.length;n++)t.find[n].node==e&&(t.find[n].pos=t.currentPos-(e.nodeValue.length-t.find[n].offset))},he.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),o=this.options.context,r=!(this.isOpen||o&&o.parent.type!=this.nodes[0].type),i=-(o?o.depth+1:0)+(r?0:1),s=function(e,a){for(;e>=0;e--){var l=n[e];if(""==l){if(e==n.length-1||0==e)continue;for(;a>=i;a--)if(s(e-1,a))return!0;return!1}var c=a>0||0==a&&r?t.nodes[a].type:o&&a>=i?o.node(a-i).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)},he.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var o in this.parser.schema.nodes){var r=this.parser.schema.nodes[o];if(r.isTextblock&&r.defaultAttrs)return r}},Object.defineProperties(he.prototype,pe);var ge=function(e,t){this.nodes=e||{},this.marks=t||{}};function ve(e){var t={};for(var n in e){var o=e[n].spec.toDOM;o&&(t[n]=o)}return t}function ye(e){return e.document||window.document}ge.prototype.serializeFragment=function(e,t,n){var o=this;void 0===t&&(t={}),n||(n=ye(t).createDocumentFragment());var r=n,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<e.marks.length;){var a=e.marks[s];if(o.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)r=i.pop(),i.pop();for(;s<e.marks.length;){var l=e.marks[s++],c=o.serializeMark(l,e.isInline,t);c&&(i.push(l,r),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(o.serializeNode(e,t))})),n},ge.prototype.serializeNode=function(e,t){void 0===t&&(t={});var n=ge.renderSpec(ye(t),this.nodes[e.type.name](e)),o=n.dom,r=n.contentDOM;if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,r,t):this.serializeFragment(e.content,t,r)}return o},ge.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var n=this.serializeNode(e,t),o=e.marks.length-1;o>=0;o--){var r=this.serializeMark(e.marks[o],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n},ge.prototype.serializeMark=function(e,t,n){void 0===n&&(n={});var o=this.marks[e.type.name];return o&&ge.renderSpec(ye(n),o(e,t))},ge.renderSpec=function(e,t){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};var n=e.createElement(t[0]),o=null,r=t[1],i=1;if(r&&"object"==typeof r&&null==r.nodeType&&!Array.isArray(r))for(var s in i=2,r)null!=r[s]&&n.setAttribute(s,r[s]);for(var a=i;a<t.length;a++){var l=t[a];if(0===l){if(a<t.length-1||a>i)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var c=ge.renderSpec(e,l),d=c.dom,u=c.contentDOM;if(n.appendChild(d),u){if(o)throw new RangeError("Multiple content holes");o=u}}return{dom:n,contentDOM:o}},ge.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new ge(this.nodesFromSchema(e),this.marksFromSchema(e)))},ge.nodesFromSchema=function(e){var t=ve(e.nodes);return t.text||(t.text=function(e){return e.text}),t},ge.marksFromSchema=function(e){return ve(e.marks)},t.Node=j,t.ResolvedPos=T,t.NodeRange=I,t.Fragment=a,t.Slice=f,t.ReplaceError=p,t.Mark=h,t.Schema=re,t.NodeType=Q,t.MarkType=oe,t.ContentMatch=L,t.DOMParser=se,t.DOMSerializer=ge},"./node_modules/prosemirror-schema-list/dist/schema-list.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-transform/dist/index.js"),r=n("./node_modules/prosemirror-model/dist/index.js"),i=["ol",0],s=["ul",0],a=["li",0],l={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?i:["ol",{start:e.attrs.order},0]}},c={parseDOM:[{tag:"ul"}],toDOM:function(){return s}},d={parseDOM:[{tag:"li"}],toDOM:function(){return a},defining:!0};function u(e,t){var n={};for(var o in e)n[o]=e[o];for(var r in t)n[r]=t[r];return n}t.orderedList=l,t.bulletList=c,t.listItem=d,t.addListNodes=function(e,t,n){return e.append({ordered_list:u(l,{content:"list_item+",group:n}),bullet_list:u(c,{content:"list_item+",group:n}),list_item:u(d,{content:t})})},t.wrapInList=function(e,t){return function(n,i){var s=n.selection,a=s.$from,l=s.$to,c=a.blockRange(l),d=!1,u=c;if(!c)return!1;if(c.depth>=2&&a.node(c.depth-1).type.compatibleContent(e)&&0==c.startIndex){if(0==a.index(c.depth-1))return!1;var h=n.doc.resolve(c.start-2);u=new r.NodeRange(h,h,c.depth),c.endIndex<c.parent.childCount&&(c=new r.NodeRange(a,n.doc.resolve(l.end(c.depth)),c.depth)),d=!0}var p=o.findWrapping(u,e,t,c);return!!p&&(i&&i(function(e,t,n,i,s){for(var a=r.Fragment.empty,l=n.length-1;l>=0;l--)a=r.Fragment.from(n[l].type.create(n[l].attrs,a));e.step(new o.ReplaceAroundStep(t.start-(i?2:0),t.end,t.start,t.end,new r.Slice(a,0,0),n.length,!0));for(var c=0,d=0;d<n.length;d++)n[d].type==s&&(c=d+1);for(var u=n.length-c,h=t.start+n.length-(i?2:0),p=t.parent,f=t.startIndex,m=t.endIndex,g=!0;f<m;f++,g=!1)!g&&o.canSplit(e.doc,h,u)&&(e.split(h,u),h+=2*u),h+=p.child(f).nodeSize;return e}(n.tr,c,p,d,e).scrollIntoView()),!0)}},t.splitListItem=function(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,l=i.node;if(l&&l.isBlock||s.depth<2||!s.sameParent(a))return!1;var c=s.node(-1);if(c.type!=e)return!1;if(0==s.parent.content.size){if(2==s.depth||s.node(-3).type!=e||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var d=r.Fragment.empty,u=s.index(-1)>0,h=s.depth-(u?1:2);h>=s.depth-3;h--)d=r.Fragment.from(s.node(h).copy(d));d=d.append(r.Fragment.from(e.createAndFill()));var p=t.tr.replace(s.before(u?null:-1),s.after(-3),new r.Slice(d,u?3:2,2));p.setSelection(t.selection.constructor.near(p.doc.resolve(s.pos+(u?3:2)))),n(p.scrollIntoView())}return!0}var f=a.pos==s.end()?c.contentMatchAt(0).defaultType:null,m=t.tr.delete(s.pos,a.pos),g=f&&[null,{type:f}];return!!o.canSplit(m.doc,s.pos,2,g)&&(n&&n(m.split(s.pos,2,g).scrollIntoView()),!0)}},t.liftListItem=function(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,l=s.blockRange(a,(function(t){return t.childCount&&t.firstChild.type==e}));return!!l&&(!n||(s.node(l.depth-1).type==e?function(e,t,n,i){var s=e.tr,a=i.end,l=i.$to.end(i.depth);a<l&&(s.step(new o.ReplaceAroundStep(a-1,l,a,l,new r.Slice(r.Fragment.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new r.NodeRange(s.doc.resolve(i.$from.pos),s.doc.resolve(l),i.depth));return t(s.lift(i,o.liftTarget(i)).scrollIntoView()),!0}(t,n,e,l):function(e,t,n){for(var i=e.tr,s=n.parent,a=n.end,l=n.endIndex-1,c=n.startIndex;l>c;l--)a-=s.child(l).nodeSize,i.delete(a-1,a+1);var d=i.doc.resolve(n.start),u=d.nodeAfter,h=0==n.startIndex,p=n.endIndex==s.childCount,f=d.node(-1),m=d.index(-1);if(!f.canReplace(m+(h?0:1),m+1,u.content.append(p?r.Fragment.empty:r.Fragment.from(s))))return!1;var g=d.pos,v=g+u.nodeSize;return i.step(new o.ReplaceAroundStep(g-(h?1:0),v+(p?1:0),g+1,v-1,new r.Slice((h?r.Fragment.empty:r.Fragment.from(s.copy(r.Fragment.empty))).append(p?r.Fragment.empty:r.Fragment.from(s.copy(r.Fragment.empty))),h?0:1,p?0:1),h?0:1)),t(i.scrollIntoView()),!0}(t,n,l)))}},t.sinkListItem=function(e){return function(t,n){var i=t.selection,s=i.$from,a=i.$to,l=s.blockRange(a,(function(t){return t.childCount&&t.firstChild.type==e}));if(!l)return!1;var c=l.startIndex;if(0==c)return!1;var d=l.parent,u=d.child(c-1);if(u.type!=e)return!1;if(n){var h=u.lastChild&&u.lastChild.type==d.type,p=r.Fragment.from(h?e.create():null),f=new r.Slice(r.Fragment.from(e.create(null,r.Fragment.from(d.type.create(null,p)))),h?3:1,0),m=l.start,g=l.end;n(t.tr.step(new o.ReplaceAroundStep(m-(h?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0}}},"./node_modules/prosemirror-state/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-model/dist/index.js"),r=n("./node_modules/prosemirror-transform/dist/index.js"),i=Object.create(null),s=function(e,t,n){this.ranges=n||[new l(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},a={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(e,t){void 0===t&&(t=o.Slice.empty);for(var n=t.content.lastChild,r=null,i=0;i<t.openEnd;i++)r=n,n=n.lastChild;for(var s=e.steps.length,a=this.ranges,l=0;l<a.length;l++){var c=a[l],d=c.$from,u=c.$to,h=e.mapping.slice(s);e.replaceRange(h.map(d.pos),h.map(u.pos),l?o.Slice.empty:t),0==l&&g(e,s,(n?n.isInline:r&&r.isTextblock)?-1:1)}},s.prototype.replaceWith=function(e,t){for(var n=e.steps.length,o=this.ranges,r=0;r<o.length;r++){var i=o[r],s=i.$from,a=i.$to,l=e.mapping.slice(n),c=l.map(s.pos),d=l.map(a.pos);r?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),g(e,n,t.isInline?-1:1))}},s.findFrom=function(e,t,n){var o=e.parent.inlineContent?new c(e):m(e.node(0),e.parent,e.pos,e.index(),t,n);if(o)return o;for(var r=e.depth-1;r>=0;r--){var i=t<0?m(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):m(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}},s.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new p(e.node(0))},s.atStart=function(e){return m(e,e,0,0,1)||new p(e)},s.atEnd=function(e){return m(e,e,e.content.size,e.childCount,-1)||new p(e)},s.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[t.type];if(!n)throw new RangeError("No selection type "+t.type+" defined");return n.fromJSON(e,t)},s.jsonID=function(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t},s.prototype.getBookmark=function(){return c.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var l=function(e,t){this.$from=e,this.$to=t},c=function(e){function t(t,n){void 0===n&&(n=t),e.call(this,t,n)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={$cursor:{}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(n,o){var r=n.resolve(o.map(this.head));if(!r.parent.inlineContent)return e.near(r);var i=n.resolve(o.map(this.anchor));return new t(i.parent.inlineContent?i:r,r)},t.prototype.replace=function(t,n){if(void 0===n&&(n=o.Slice.empty),e.prototype.replace.call(this,t,n),n==o.Slice.empty){var r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new d(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,t,n){void 0===n&&(n=t);var o=e.resolve(t);return new this(o,n==t?o:e.resolve(n))},t.between=function(n,o,r){var i=n.pos-o.pos;if(r&&!i||(r=i>=0?1:-1),!o.parent.inlineContent){var s=e.findFrom(o,r,!0)||e.findFrom(o,-r,!0);if(!s)return e.near(o,r);o=s.$head}return n.parent.inlineContent||(0==i||(n=(e.findFrom(n,-r,!0)||e.findFrom(n,r,!0)).$anchor).pos<o.pos!=i<0)&&(n=o),new t(n,o)},Object.defineProperties(t.prototype,n),t}(s);s.jsonID("text",c);var d=function(e,t){this.anchor=e,this.head=t};d.prototype.map=function(e){return new d(e.map(this.anchor),e.map(this.head))},d.prototype.resolve=function(e){return c.between(e.resolve(this.anchor),e.resolve(this.head))};var u=function(e){function t(t){var n=t.nodeAfter,o=t.node(0).resolve(t.pos+n.nodeSize);e.call(this,t,o),this.node=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(n,o){var r=o.mapResult(this.anchor),i=r.deleted,s=r.pos,a=n.resolve(s);return i?e.near(a):new t(a)},t.prototype.content=function(){return new o.Slice(o.Fragment.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new h(this.anchor)},t.fromJSON=function(e,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(s);u.prototype.visible=!1,s.jsonID("node",u);var h=function(e){this.anchor=e};h.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,o=t.pos;return n?new d(o,o):new h(o)},h.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&u.isSelectable(n)?new u(t):s.near(t)};var p=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return f},t}(s);s.jsonID("all",p);var f={map:function(){return this},resolve:function(e){return new p(e)}};function m(e,t,n,o,r,i){if(t.inlineContent)return c.create(e,n);for(var s=o-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){var a=t.child(s);if(a.isAtom){if(!i&&u.isSelectable(a))return u.create(e,n-(r<0?a.nodeSize:0))}else{var l=m(e,a,n+r,r<0?a.childCount:0,r,i);if(l)return l}n+=a.nodeSize*r}}function g(e,t,n){var o=e.steps.length-1;if(!(o<t)){var i,a=e.steps[o];if(a instanceof r.ReplaceStep||a instanceof r.ReplaceAroundStep)e.mapping.maps[o].forEach((function(e,t,n,o){null==i&&(i=o)})),e.setSelection(s.near(e.doc.resolve(i),n))}}var v=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return o.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,n){e.prototype.addStep.call(this,t,n),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var n=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||o.Mark.none))),n.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var r=this.storedMarks;if(!r){var i=this.doc.resolve(t);r=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,r)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},n.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,n),t}(r.Transform);function y(e,t){return t&&e?e.bind(t):e}var b=function(e,t,n){this.name=e,this.init=y(t.init,n),this.apply=y(t.apply,n)},x=[new b("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new b("selection",{init:function(e,t){return e.selection||s.atStart(t.doc)},apply:function(e){return e.selection}}),new b("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,o){return o.selection.$cursor?e.storedMarks:null}}),new b("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],w=function(e,t){var n=this;this.schema=e,this.fields=x.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new b(e.key,e.spec.state,e))}))},k=function(e){this.config=e},S={schema:{},plugins:{},tr:{}};S.schema.get=function(){return this.config.schema},S.plugins.get=function(){return this.config.plugins},k.prototype.apply=function(e){return this.applyTransaction(e).state},k.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var o=this.config.plugins[n];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0},k.prototype.applyTransaction=function(e){var t=this;if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var n=[e],o=this.applyInner(e),r=null;;){for(var i=!1,s=0;s<this.config.plugins.length;s++){var a=t.config.plugins[s];if(a.spec.appendTransaction){var l=r?r[s].n:0,c=r?r[s].state:t,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,o);if(d&&o.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<s?{state:o,n:n.length}:{state:t,n:0})}n.push(d),o=o.applyInner(d),i=!0}r&&(r[s]={state:o,n:n.length})}}if(!i)return{state:o,transactions:n}}},k.prototype.applyInner=function(e){var t=this;if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new k(this.config),o=this.config.fields,r=0;r<o.length;r++){var i=o[r];n[i.name]=i.apply(e,t[i.name],t,n)}for(var s=0;s<M.length;s++)M[s](t,e,n);return n},S.tr.get=function(){return new v(this)},k.create=function(e){for(var t=new w(e.schema||e.doc.type.schema,e.plugins),n=new k(t),o=0;o<t.fields.length;o++)n[t.fields[o].name]=t.fields[o].init(e,n);return n},k.prototype.reconfigure=function(e){for(var t=new w(e.schema||this.schema,e.plugins),n=t.fields,o=new k(t),r=0;r<n.length;r++){var i=n[r].name;o[i]=this.hasOwnProperty(i)?this[i]:n[r].init(e,o)}return o},k.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[n],r=o.spec.state;r&&r.toJSON&&(t[n]=r.toJSON.call(o,this[o.key]))}return t},k.fromJSON=function(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var r=new w(e.schema,e.plugins),i=new k(r);return r.fields.forEach((function(r){if("doc"==r.name)i.doc=o.Node.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(var a in n){var l=n[a],c=l.spec.state;if(l.key==r.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a))return void(i[r.name]=c.fromJSON.call(l,e,t[a],i))}i[r.name]=r.init(e,i)}})),i},k.addApplyListener=function(e){M.push(e)},k.removeApplyListener=function(e){var t=M.indexOf(e);t>-1&&M.splice(t,1)},Object.defineProperties(k.prototype,S);var M=[];function C(e,t,n){for(var o in e){var r=e[o];r instanceof Function?r=r.bind(t):"handleDOMEvents"==o&&(r=C(r,t,{})),n[o]=r}return n}var E=function(e){this.props={},e.props&&C(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:O("plugin")};E.prototype.getState=function(e){return e[this.key]};var T=Object.create(null);function O(e){return e in T?e+"$"+ ++T[e]:(T[e]=0,e+"$")}var A=function(e){void 0===e&&(e="key"),this.key=O(e)};A.prototype.get=function(e){return e.config.pluginsByKey[this.key]},A.prototype.getState=function(e){return e[this.key]},t.Selection=s,t.SelectionRange=l,t.TextSelection=c,t.NodeSelection=u,t.AllSelection=p,t.Transaction=v,t.EditorState=k,t.Plugin=E,t.PluginKey=A},"./node_modules/prosemirror-tables/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,i=n("./node_modules/prosemirror-state/dist/index.js"),s=n("./node_modules/prosemirror-view/dist/index.js"),a=n("./node_modules/prosemirror-model/dist/index.js"),l=n("./node_modules/prosemirror-transform/dist/index.js"),c=n("./node_modules/prosemirror-keymap/dist/keymap.js");if("undefined"!=typeof WeakMap){var d=new WeakMap;o=function(e){return d.get(e)},r=function(e,t){return d.set(e,t),t}}else{var u=[],h=0;o=function(e){for(var t=0;t<u.length;t+=2)if(u[t]==e)return u[t+1]},r=function(e,t){return 10==h&&(h=0),u[h++]=e,u[h++]=t}}var p=function(e,t,n,o){this.left=e,this.top=t,this.right=n,this.bottom=o},f=function(e,t,n,o){this.width=e,this.height=t,this.map=n,this.problems=o};function m(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}f.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var o=t%this.width,r=t/this.width|0,i=o+1,s=r+1,a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(var l=1;s<this.height&&this.map[t+this.width*l]==n;l++)s++;return new p(o,r,i,s)}}throw new RangeError("No cell with offset "+e+" found")},f.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},f.prototype.nextCell=function(e,t,n){var o=this.findCell(e),r=o.left,i=o.right,s=o.top,a=o.bottom;return"horiz"==t?(n<0?0==r:i==this.width)?null:this.map[s*this.width+(n<0?r-1:i)]:(n<0?0==s:a==this.height)?null:this.map[r+this.width*(n<0?s-1:a)]},f.prototype.rectBetween=function(e,t){var n=this.findCell(e),o=n.left,r=n.right,i=n.top,s=n.bottom,a=this.findCell(t),l=a.left,c=a.right,d=a.top,u=a.bottom;return new p(Math.min(o,l),Math.min(i,d),Math.max(r,c),Math.max(s,u))},f.prototype.cellsInRect=function(e){for(var t=[],n=[],o=e.top;o<e.bottom;o++)for(var r=e.left;r<e.right;r++){var i=o*this.width+r,s=this.map[i];n.indexOf(s)>-1||(n.push(s),r==e.left&&r&&this.map[i-1]==s||o==e.top&&o&&this.map[i-this.width]==s||t.push(s))}return t},f.prototype.positionAt=function(e,t,n){for(var o=0,r=0;;o++){var i=r+n.child(o).nodeSize;if(o==e){for(var s=t+e*this.width,a=(e+1)*this.width;s<a&&this.map[s]<r;)s++;return s==a?i-1:this.map[s]}r=i}},f.get=function(e){return o(e)||r(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,o=0;o<e.childCount;o++){var r=e.child(o),i=0;if(n)for(var s=0;s<o;s++)for(var a=e.child(s),l=0;l<a.childCount;l++){var c=a.child(l);s+c.attrs.rowspan>o&&(i+=c.attrs.colspan)}for(var d=0;d<r.childCount;d++){var u=r.child(d);i+=u.attrs.colspan,u.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,o=[],r=0,i=null,s=[],a=0,l=t*n;a<l;a++)o[a]=0;for(var c=0,d=0;c<n;c++){var u=e.child(c);d++;for(var h=0;;h++){for(;r<o.length&&0!=o[r];)r++;if(h==u.childCount)break;for(var p=u.child(h),g=p.attrs,v=g.colspan,y=g.rowspan,b=g.colwidth,x=0;x<y;x++){if(x+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:d,n:y-x});break}for(var w=r+x*t,k=0;k<v;k++){0==o[w+k]?o[w+k]=d:(i||(i=[])).push({type:"collision",row:c,pos:d,n:v-k});var S=b&&b[k];if(S){var M=(w+k)%t*2,C=s[M];null==C||C!=S&&1==s[M+1]?(s[M]=S,s[M+1]=1):C==S&&s[M+1]++}}}r+=v,d+=p.nodeSize}for(var E=(c+1)*t,T=0;r<E;)0==o[r++]&&T++;T&&(i||(i=[])).push({type:"missing",row:c,n:T}),d++}for(var O=new f(t,n,o,i),A=!1,R=0;!A&&R<s.length;R+=2)null!=s[R]&&s[R+1]<n&&(A=!0);A&&function(e,t,n){e.problems||(e.problems=[]);for(var o=0,r=[];o<e.map.length;o++){var i=e.map[o];if(!(r.indexOf(i)>-1)){r.push(i);for(var s=n.nodeAt(i),a=null,l=0;l<s.attrs.colspan;l++){var c=t[2*((o+l)%e.width)];null==c||s.attrs.colwidth&&s.attrs.colwidth[l]==c||((a||(a=m(s.attrs)))[l]=c)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}(O,s,e);return O}(e))};var g=new i.PluginKey("selectingCells");function v(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function y(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function b(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:v(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(n)}for(var r=e.nodeBefore,i=e.pos;r;r=r.lastChild,i--){var s=r.type.spec.tableRole;if("cell"==s||"header_cell"==s)return e.doc.resolve(i-r.nodeSize)}}(t.$head)}function x(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function w(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function k(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function S(e,t,n){var o=e.start(-1),r=f.get(e.node(-1)).nextCell(e.pos-o,t,n);return null==r?null:e.node(0).resolve(o+r)}function M(e,t,n){var o={};for(var r in e)o[r]=e[r];return o[t]=n,o}function C(e,t,n){void 0===n&&(n=1);var o=M(e,"colspan",e.colspan-n);return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(t,n),o.colwidth.some((function(e){return e>0}))||(o.colwidth=null)),o}function E(e,t,n){void 0===n&&(n=1);var o=M(e,"colspan",e.colspan+n);if(o.colwidth){o.colwidth=o.colwidth.slice();for(var r=0;r<n;r++)o.colwidth.splice(t,0,0)}return o}var T=function(e){function t(t,n){void 0===n&&(n=t);var o=t.node(-1),r=f.get(o),s=t.start(-1),a=r.rectBetween(t.pos-s,n.pos-s),l=t.node(0),c=r.cellsInRect(a).filter((function(e){return e!=n.pos-s}));c.unshift(n.pos-s);var d=c.map((function(e){var t=o.nodeAt(e),n=e+s+1;return new i.SelectionRange(l.resolve(n),l.resolve(n+t.content.size))}));e.call(this,d[0].$from,d[0].$to,d),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var o=e.resolve(n.map(this.$anchorCell.pos)),r=e.resolve(n.map(this.$headCell.pos));if(x(o)&&x(r)&&k(o,r)){var s=this.$anchorCell.node(-1)!=o.node(-1);return s&&this.isRowSelection()?t.rowSelection(o,r):s&&this.isColSelection()?t.colSelection(o,r):new t(o,r)}return i.TextSelection.between(o,r)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=f.get(e),n=this.$anchorCell.start(-1),o=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),r=[],i=[],s=o.top;s<o.bottom;s++){for(var l=[],c=s*t.width+o.left,d=o.left;d<o.right;d++,c++){var u=t.map[c];if(-1==r.indexOf(u)){r.push(u);var h=t.findCell(u),p=e.nodeAt(u),m=o.left-h.left,g=h.right-o.right;if(m>0||g>0){var v=p.attrs;m>0&&(v=C(v,0,m)),g>0&&(v=C(v,v.colspan-g,g)),p=h.left<o.left?p.type.createAndFill(v):p.type.create(v,p.content)}if(h.top<o.top||h.bottom>o.bottom){var y=M(p.attrs,"rowspan",Math.min(h.bottom,o.bottom)-Math.max(h.top,o.top));p=h.top<o.top?p.type.createAndFill(y):p.type.create(y,p.content)}l.push(p)}}i.push(e.child(s).copy(a.Fragment.from(l)))}var b=this.isColSelection()&&this.isRowSelection()?e:i;return new a.Slice(a.Fragment.from(b),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=a.Slice.empty);for(var o=t.steps.length,r=this.ranges,i=0;i<r.length;i++){var s=r[i],l=s.$from,c=s.$to,d=t.mapping.slice(o);t.replace(d.map(l.pos),d.map(c.pos),i?a.Slice.empty:n)}var u=e.findFrom(t.doc.resolve(t.mapping.slice(o).map(this.to)),-1);u&&t.setSelection(u)},t.prototype.replaceWith=function(e,t){this.replace(e,new a.Slice(a.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=f.get(t),o=this.$anchorCell.start(-1),r=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o)),i=0;i<r.length;i++)e(t.nodeAt(r[i]),o+r[i])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,o)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var o=f.get(e.node(-1)),r=e.start(-1),i=o.findCell(e.pos-r),s=o.findCell(n.pos-r),a=e.node(0);return i.top<=s.top?(i.top>0&&(e=a.resolve(r+o.map[i.left])),s.bottom<o.height&&(n=a.resolve(r+o.map[o.width*(o.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(r+o.map[s.left])),i.bottom<o.height&&(e=a.resolve(r+o.map[o.width*(o.height-1)+i.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=f.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),o=e.colCount(this.$headCell.pos-t);if(Math.min(n,o)>0)return!1;var r=n+this.$anchorCell.nodeAfter.attrs.colspan,i=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(r,i)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var o=f.get(e.node(-1)),r=e.start(-1),i=o.findCell(e.pos-r),s=o.findCell(n.pos-r),a=e.node(0);return i.left<=s.left?(i.left>0&&(e=a.resolve(r+o.map[i.top*o.width])),s.right<o.width&&(n=a.resolve(r+o.map[o.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(r+o.map[s.top*o.width])),i.right<o.width&&(e=a.resolve(r+o.map[o.width*(i.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,o){return void 0===o&&(o=n),new t(e.resolve(n),e.resolve(o))},t.prototype.getBookmark=function(){return new O(this.$anchorCell.pos,this.$headCell.pos)},t}(i.Selection);T.prototype.visible=!1,i.Selection.jsonID("cell",T);var O=function(e,t){this.anchor=e,this.head=t};function A(e){if(!(e.selection instanceof T))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(s.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))})),s.DecorationSet.create(e.doc,t)}function R(e,t){var n=e.getAttribute("data-colwidth"),o=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(e){return Number(e)})):null,r=Number(e.getAttribute("colspan")||1),i={colspan:r,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:o&&o.length==r?o:null};for(var s in t){var a=t[s].getFromDOM,l=a&&a(e);null!=l&&(i[s]=l)}return i}function N(e,t){var n={};for(var o in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var r=t[o].setDOMAttr;r&&r(e.attrs[o],n)}return n}function I(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var o=e.nodes[n],r=o.spec.tableRole;r&&(t[r]=o)}return t}function _(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,o=e.openEnd;1==t.childCount&&(n>0&&o>0||"table"==t.firstChild.type.spec.tableRole);)n--,o--,t=t.firstChild.content;var r=t.firstChild,i=r.type.spec.tableRole,s=r.type.schema,l=[];if("row"==i)for(var c=0;c<t.childCount;c++){var d=t.child(c).content,u=c?0:Math.max(0,n-1),h=c<t.childCount-1?0:Math.max(0,o-1);(u||h)&&(d=P(I(s).row,new a.Slice(d,u,h)).content),l.push(d)}else{if("cell"!=i&&"header_cell"!=i)return null;l.push(n||o?P(I(s).row,new a.Slice(t,n,o)).content:t)}return function(e,t){for(var n=[],o=0;o<t.length;o++)for(var r=t[o],i=r.childCount-1;i>=0;i--)for(var s=r.child(i).attrs,l=s.rowspan,c=s.colspan,d=o;d<o+l;d++)n[d]=(n[d]||0)+c;for(var u=0,h=0;h<n.length;h++)u=Math.max(u,n[h]);for(var p=0;p<n.length;p++)if(p>=t.length&&t.push(a.Fragment.empty),n[p]<u){for(var f=I(e).cell.createAndFill(),m=[],g=n[p];g<u;g++)m.push(f);t[p]=t[p].append(a.Fragment.from(m))}return{height:t.length,width:u,rows:t}}(s,l)}function P(e,t){var n=e.createAndFill();return new l.Transform(n).replace(0,n.content.size,t).doc}function j(e,t,n){var o=e.width,r=e.height,i=e.rows;if(o!=t){for(var s=[],l=[],c=0;c<i.length;c++){for(var d=i[c],u=[],h=s[c]||0,p=0;h<t;p++){var f=d.child(p%d.childCount);h+f.attrs.colspan>t&&(f=f.type.create(C(f.attrs,f.attrs.colspan,h+f.attrs.colspan-t),f.content)),u.push(f),h+=f.attrs.colspan;for(var m=1;m<f.attrs.rowspan;m++)s[c+m]=(s[c+m]||0)+f.attrs.colspan}l.push(a.Fragment.from(u))}i=l,o=t}if(r!=n){for(var g=[],v=0,y=0;v<n;v++,y++){for(var b=[],x=i[y%r],w=0;w<x.childCount;w++){var k=x.child(w);v+k.attrs.rowspan>n&&(k=k.type.create(M(k.attrs,"rowspan",n-k.attrs.rowspan),k.content)),b.push(k)}g.push(a.Fragment.from(b))}i=g,r=n}return{width:o,height:r,rows:i}}function D(e,t,n,o,r,i,s,a){if(0==s||s==t.height)return!1;for(var l=!1,c=r;c<i;c++){var d=s*t.width+c,u=t.map[d];if(t.map[d-t.width]==u){l=!0;var h=n.nodeAt(u),p=t.findCell(u),f=p.top,m=p.left;e.setNodeMarkup(e.mapping.slice(a).map(u+o),null,M(h.attrs,"rowspan",s-f)),e.insert(e.mapping.slice(a).map(t.positionAt(s,m,n)),h.type.createAndFill(M(h.attrs,"rowspan",f+h.attrs.rowspan-s))),c+=h.attrs.colspan-1}}return l}function z(e,t,n,o,r,i,s,a){if(0==s||s==t.width)return!1;for(var l=!1,c=r;c<i;c++){var d=c*t.width+s,u=t.map[d];if(t.map[d-1]==u){l=!0;var h=n.nodeAt(u),p=t.colCount(u),f=e.mapping.slice(a).map(u+o);e.setNodeMarkup(f,null,C(h.attrs,s-p,h.attrs.colspan-(s-p))),e.insert(f+h.nodeSize,h.type.createAndFill(C(h.attrs,0,s-p))),c+=h.attrs.rowspan-1}}return l}function B(e,t,n,o,r){var i=n?e.doc.nodeAt(n-1):e.doc,s=f.get(i),l=o.top,c=o.left,d=c+r.width,u=l+r.height,h=e.tr,p=0;function m(){i=n?h.doc.nodeAt(n-1):h.doc,s=f.get(i),p=h.mapping.maps.length}(function(e,t,n,o,r,i,s){var l,c,d=I(e.doc.type.schema);if(r>t.width)for(var u=0,h=0;u<t.height;u++){var p=n.child(u);h+=p.nodeSize;var f=[],m=void 0;m=null==p.lastChild||p.lastChild.type==d.cell?l||(l=d.cell.createAndFill()):c||(c=d.header_cell.createAndFill());for(var g=t.width;g<r;g++)f.push(m);e.insert(e.mapping.slice(s).map(h-1+o),f)}if(i>t.height){for(var v=[],y=0,b=(t.height-1)*t.width;y<Math.max(t.width,r);y++){var x=!(y>=t.width)&&n.nodeAt(t.map[b+y]).type==d.header_cell;v.push(x?c||(c=d.header_cell.createAndFill()):l||(l=d.cell.createAndFill()))}for(var w=d.row.create(null,a.Fragment.from(v)),k=[],S=t.height;S<i;S++)k.push(w);e.insert(e.mapping.slice(s).map(o+n.nodeSize-2),k)}return!(!l&&!c)})(h,s,i,n,d,u,p)&&m(),D(h,s,i,n,c,d,l,p)&&m(),D(h,s,i,n,c,d,u,p)&&m(),z(h,s,i,n,l,u,c,p)&&m(),z(h,s,i,n,l,u,d,p)&&m();for(var g=l;g<u;g++){var v=s.positionAt(g,c,i),y=s.positionAt(g,d,i);h.replace(h.mapping.slice(p).map(v+n),h.mapping.slice(p).map(y+n),new a.Slice(r.rows[g-l],0,0))}m(),h.setSelection(new T(h.doc.resolve(n+s.positionAt(l,c,i)),h.doc.resolve(n+s.positionAt(u-1,d-1,i)))),t(h)}O.prototype.map=function(e){return new O(e.map(this.anchor),e.map(this.head))},O.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&k(t,n)?new T(t,n):i.Selection.near(n,1)};var L=c.keydownHandler({ArrowLeft:F("horiz",-1),ArrowRight:F("horiz",1),ArrowUp:F("vert",-1),ArrowDown:F("vert",1),"Shift-ArrowLeft":V("horiz",-1),"Shift-ArrowRight":V("horiz",1),"Shift-ArrowUp":V("vert",-1),"Shift-ArrowDown":V("vert",1),Backspace:H,"Mod-Backspace":H,Delete:H,"Mod-Delete":H});function $(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function F(e,t){return function(n,o,r){var s=n.selection;if(s instanceof T)return $(n,o,i.Selection.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var a=J(r,e,t);if(null==a)return!1;if("horiz"==e)return $(n,o,i.Selection.near(n.doc.resolve(s.head+t),t));var l,c=n.doc.resolve(a),d=S(c,e,t);return l=d?i.Selection.near(d,1):t<0?i.Selection.near(n.doc.resolve(c.before(-1)),-1):i.Selection.near(n.doc.resolve(c.after(-1)),1),$(n,o,l)}}function V(e,t){return function(n,o,r){var i=n.selection;if(!(i instanceof T)){var s=J(r,e,t);if(null==s)return!1;i=new T(n.doc.resolve(s))}var a=S(i.$headCell,e,t);return!!a&&$(n,o,new T(i.$anchorCell,a))}}function H(e,t){var n=e.selection;if(!(n instanceof T))return!1;if(t){var o=e.tr,r=I(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(r)||o.replace(o.mapping.map(t+1),o.mapping.map(t+e.nodeSize-1),new a.Slice(r,0,0))})),o.docChanged&&t(o)}return!0}function U(e,t){var n=v(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new T(n))),!0)}function W(e,t,n){if(!y(e.state))return!1;var o=_(n),r=e.state.selection;if(r instanceof T){o||(o={width:1,height:1,rows:[a.Fragment.from(P(I(e.state.schema).cell,n))]});var i=r.$anchorCell.node(-1),s=r.$anchorCell.start(-1),l=f.get(i).rectBetween(r.$anchorCell.pos-s,r.$headCell.pos-s);return o=j(o,l.right-l.left,l.bottom-l.top),B(e.state,e.dispatch,s,l,o),!0}if(o){var c=b(e.state),d=c.start(-1);return B(e.state,e.dispatch,d,f.get(c.node(-1)).findCell(c.pos-d),o),!0}return!1}function q(e,t){if(!t.ctrlKey&&!t.metaKey){var n,o=K(e,t.target);if(t.shiftKey&&e.state.selection instanceof T)r(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&null!=(n=v(e.state.selection.$anchor))&&G(e,t).pos!=n.pos)r(n,t),t.preventDefault();else if(!o)return;e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",s)}function r(t,n){var o=G(e,n),r=null==g.getState(e.state);if(!o||!k(t,o)){if(!r)return;o=t}var i=new T(t,o);if(r||!e.state.selection.eq(i)){var s=e.state.tr.setSelection(i);r&&s.setMeta(g,t.pos),e.dispatch(s)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",s),null!=g.getState(e.state)&&e.dispatch(e.state.tr.setMeta(g,-1))}function s(n){var s,a=g.getState(e.state);if(null!=a)s=e.state.doc.resolve(a);else if(K(e,n.target)!=o&&!(s=G(e,t)))return i();s&&r(s,n)}}function J(e,t,n){if(!(e.state.selection instanceof i.TextSelection))return null;for(var o=e.state.selection.$head,r=o.depth-1;r>=0;r--){var s=o.node(r);if((n<0?o.index(r):o.indexAfter(r))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var a=o.before(r),l="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(l)?a:null}}return null}function K(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function G(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?v(e.state.doc.resolve(n.pos)):null}function X(e,t,n,o){var r=e.childCount,i=t.childCount;e:for(var s=0,a=0;s<i;s++){for(var l=t.child(s),c=a,d=Math.min(r,s+3);c<d;c++)if(e.child(c)==l){a=c+1,n+=l.nodeSize;continue e}o(l,n),a<r&&e.child(a).sameMarkup(l)?X(e.child(a),l,n+1,o):l.nodesBetween(0,l.content.size,o,n+1),n+=l.nodeSize}}function Y(e,t){var n,o=function(t,o){"table"==t.type.spec.tableRole&&(n=function(e,t,n,o){var r=f.get(t);if(!r.problems)return o;o||(o=e.tr);for(var i,s,a=[],l=0;l<r.height;l++)a.push(0);for(var c=0;c<r.problems.length;c++){var d=r.problems[c];if("collision"==d.type){for(var u=t.nodeAt(d.pos),h=0;h<u.attrs.rowspan;h++)a[d.row+h]+=d.n;o.setNodeMarkup(o.mapping.map(n+1+d.pos),null,C(u.attrs,u.attrs.colspan-d.n,d.n))}else if("missing"==d.type)a[d.row]+=d.n;else if("overlong_rowspan"==d.type){var p=t.nodeAt(d.pos);o.setNodeMarkup(o.mapping.map(n+1+d.pos),null,M(p.attrs,"rowspan",p.attrs.rowspan-d.n))}else if("colwidth mismatch"==d.type){var m=t.nodeAt(d.pos);o.setNodeMarkup(o.mapping.map(n+1+d.pos),null,M(m.attrs,"colwidth",d.colwidth))}}for(var g=0;g<a.length;g++)a[g]&&(null==i&&(i=g),s=g);for(var v=0,y=n+1;v<r.height;v++){var b=t.child(v),x=y+b.nodeSize,w=a[v];if(w>0){var k="cell";b.firstChild&&(k=b.firstChild.type.spec.tableRole);for(var S=[],E=0;E<w;E++)S.push(I(e.schema)[k].createAndFill());var T=0!=v&&i!=v-1||s!=v?x-1:y+1;o.insert(o.mapping.map(T),S)}y=x}return o}(e,t,o,n))};return t?t.doc!=e.doc&&X(t.doc,e.doc,0,o):e.doc.descendants(o),n}function Z(e){var t,n=e.selection,o=b(e),r=o.node(-1),i=o.start(-1),s=f.get(r);return(t=n instanceof T?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(o.pos-i)).tableStart=i,t.map=s,t.table=r,t}function Q(e,t,n){var o=t.map,r=t.tableStart,i=t.table,s=n>0?-1:0;(function(e,t,n){for(var o=I(t.type.schema).header_cell,r=0;r<e.height;r++)if(t.nodeAt(e.map[n+r*e.width]).type!=o)return!1;return!0})(o,i,n+s)&&(s=0==n||n==o.width?null:0);for(var a=0;a<o.height;a++){var l=a*o.width+n;if(n>0&&n<o.width&&o.map[l-1]==o.map[l]){var c=o.map[l],d=i.nodeAt(c);e.setNodeMarkup(e.mapping.map(r+c),null,E(d.attrs,n-o.colCount(c))),a+=d.attrs.rowspan-1}else{var u=null==s?I(i.type.schema).cell:i.nodeAt(o.map[l+s]).type,h=o.positionAt(a,n,i);e.insert(e.mapping.map(r+h),u.createAndFill())}}return e}function ee(e,t,n){for(var o=t.map,r=t.table,i=t.tableStart,s=e.mapping.maps.length,a=0;a<o.height;){var l=a*o.width+n,c=o.map[l],d=r.nodeAt(c);if(n>0&&o.map[l-1]==c||n<o.width-1&&o.map[l+1]==c)e.setNodeMarkup(e.mapping.slice(s).map(i+c),null,C(d.attrs,n-o.colCount(c)));else{var u=e.mapping.slice(s).map(i+c);e.delete(u,u+d.nodeSize)}a+=d.attrs.rowspan}}function te(e,t,n){for(var o=t.map,r=t.tableStart,i=t.table,s=r,a=0;a<n;a++)s+=i.child(a).nodeSize;var l=[],c=n>0?-1:0;(function(e,t,n){for(var o=I(t.type.schema).header_cell,r=0;r<e.width;r++)if(t.nodeAt(e.map[r+n*e.width]).type!=o)return!1;return!0})(o,i,n+c)&&(c=0==n||n==o.height?null:0);for(var d=0,u=o.width*n;d<o.width;d++,u++)if(n>0&&n<o.height&&o.map[u]==o.map[u-o.width]){var h=o.map[u],p=i.nodeAt(h).attrs;e.setNodeMarkup(r+h,null,M(p,"rowspan",p.rowspan+1)),d+=p.colspan-1}else{var f=null==c?I(i.type.schema).cell:i.nodeAt(o.map[u+c*o.width]).type;l.push(f.createAndFill())}return e.insert(s,I(i.type.schema).row.create(null,l)),e}function ne(e,t,n){for(var o=t.map,r=t.table,i=t.tableStart,s=0,a=0;a<n;a++)s+=r.child(a).nodeSize;var l=s+r.child(n).nodeSize,c=e.mapping.maps.length;e.delete(s+i,l+i);for(var d=0,u=n*o.width;d<o.width;d++,u++){var h=o.map[u];if(n>0&&h==o.map[u-o.width]){var p=r.nodeAt(h).attrs;e.setNodeMarkup(e.mapping.slice(c).map(h+i),null,M(p,"rowspan",p.rowspan-1)),d+=p.colspan-1}else if(n<o.width&&h==o.map[u+o.width]){var f=r.nodeAt(h),m=f.type.create(M(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),g=o.positionAt(n+1,d,r);e.insert(e.mapping.slice(c).map(i+g),m),d+=f.attrs.colspan-1}}}function oe(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function re(e){return function(t,n){if(!y(t))return!1;if(n){for(var o=I(t.schema),r=Z(t),i=t.tr,s=r.map.cellsInRect("column"==e?new p(r.left,0,r.right,r.map.height):"row"==e?new p(0,r.top,r.map.width,r.bottom):r),a=s.map((function(e){return r.table.nodeAt(e)})),l=0;l<s.length;l++)a[l].type==o.header_cell&&i.setNodeMarkup(r.tableStart+s[l],o.cell,a[l].attrs);if(0==i.steps.length)for(var c=0;c<s.length;c++)i.setNodeMarkup(r.tableStart+s[c],o.header_cell,a[c].attrs);n(i)}return!0}}var ie=re("row"),se=re("column"),ae=re("cell");var le=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ce(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function ce(e,t,n,o,r,i){for(var s=0,a=!0,l=t.firstChild,c=e.firstChild,d=0,u=0;d<c.childCount;d++)for(var h=c.child(d).attrs,p=h.colspan,f=h.colwidth,m=0;m<p;m++,u++){var g=r==u?i:f&&f[m],v=g?g+"px":"";s+=g||o,g||(a=!1),l?(l.style.width!=v&&(l.style.width=v),l=l.nextSibling):t.appendChild(document.createElement("col")).style.width=v}for(;l;){var y=l.nextSibling;l.parentNode.removeChild(l),l=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}le.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,ce(e,this.colgroup,this.table,this.cellMinWidth),!0)},le.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var de=new i.PluginKey("tableColumnResizing");var ue=function(e,t){this.activeHandle=e,this.dragging=t};function he(e,t,n){var o=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,r=v(e.state.doc.resolve(o));if(!r)return-1;if("right"==n)return r.pos;var i=f.get(r.node(-1)),s=r.start(-1),a=i.map.indexOf(r.pos-s);return a%i.width==0?-1:s+i.map[a-1]}function pe(e,t,n){var o=t.clientX-e.startX;return Math.max(n,e.startWidth+o)}function fe(e,t){e.dispatch(e.state.tr.setMeta(de,{setHandle:t}))}function me(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}ue.prototype.apply=function(e){var t=this,n=e.getMeta(de);if(n&&null!=n.setHandle)return new ue(n.setHandle,null);if(n&&void 0!==n.setDragging)return new ue(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var o=e.mapping.map(t.activeHandle,-1);x(e.doc.resolve(o))||(o=null),t=new ue(o,t.dragging)}return t},t.tableEditing=function(){return new i.Plugin({key:g,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(g);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var o=e.mapping.mapResult(t),r=o.deleted,i=o.pos;return r?null:i}},props:{decorations:A,handleDOMEvents:{mousedown:q},createSelectionBetween:function(e){if(null!=g.getState(e.state))return e.state.selection},handleTripleClick:U,handleKeyDown:L,handlePaste:W},appendTransaction:function(e,t,n){return function(e,t){var n,o,r=(t||e).selection,s=(t||e).doc;if(r instanceof i.NodeSelection&&(o=r.node.type.spec.tableRole))if("cell"==o||"header_cell"==o)n=T.create(s,r.from);else if("row"==o){var a=s.resolve(r.from+1);n=T.rowSelection(a,a)}else{var l=f.get(r.node),c=r.from+1,d=c+l.map[l.width*l.height-1];n=T.create(s,c+1,d)}else r instanceof i.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var o=t.pos,r=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,o++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,r--);return o==r&&/row|table/.test(t.node(i).type.spec.tableRole)}(r)?n=i.TextSelection.create(s,r.from):r instanceof i.TextSelection&&function(e){for(var t,n,o=e.$from,r=e.$to,i=o.depth;i>0;i--){var s=o.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){t=s;break}}for(var a=r.depth;a>0;a--){var l=r.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){n=l;break}}return t!==n&&0===r.parentOffset}(r)&&(n=i.TextSelection.create(s,r.$from.start(),r.$from.end()));return n&&(t||(t=e.tr)).setSelection(n),t}(n,Y(n,t))}})},t.fixTables=Y,t.handlePaste=W,t.cellAround=v,t.isInTable=y,t.selectionCell=b,t.moveCellForward=w,t.inSameTable=k,t.findCell=function(e){return f.get(e.node(-1)).findCell(e.pos-e.start(-1))},t.colCount=function(e){return f.get(e.node(-1)).colCount(e.pos-e.start(-1))},t.nextCell=S,t.tableNodes=function(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var o in t)n[o]={default:t[o].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return R(e,t)}}],toDOM:function(e){return["td",N(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return R(e,t)}}],toDOM:function(e){return["th",N(e,t),0]}}}},t.CellSelection=T,t.TableMap=f,t.columnResizing=function(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var o=e.View;void 0===o&&(o=le);var r=e.lastColumnResizable;return void 0===r&&(r=!0),new i.Plugin({key:de,state:{init:function(e,t){return this.spec.props.nodeViews[I(t.schema).table.name]=function(e,t){return new o(e,n,t)},new ue(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return de.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,n){!function(e,t,n,o,r){var i=de.getState(e.state);if(!i.dragging){var s=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=-1;if(s){var l=s.getBoundingClientRect(),c=l.left,d=l.right;t.clientX-c<=n?a=he(e,t,"left"):d-t.clientX<=n&&(a=he(e,t,"right"))}if(a!=i.activeHandle){if(!r&&-1!==a){var u=e.state.doc.resolve(a),h=u.node(-1),p=f.get(h),m=u.start(-1);if(p.colCount(u.pos-m)+u.nodeAfter.attrs.colspan-1==p.width-1)return}fe(e,a)}}}(e,n,t,0,r)},mouseleave:function(e){!function(e){var t=de.getState(e.state);t.activeHandle>-1&&!t.dragging&&fe(e,-1)}(e)},mousedown:function(e,t){!function(e,t,n){var o=de.getState(e.state);if(-1==o.activeHandle||o.dragging)return!1;var r=e.state.doc.nodeAt(o.activeHandle),i=function(e,t,n){var o=n.colspan,r=n.colwidth,i=r&&r[r.length-1];if(i)return i;var s=e.domAtPos(t),a=s.node.childNodes[s.offset].offsetWidth,l=o;if(r)for(var c=0;c<o;c++)r[c]&&(a-=r[c],l--);return a/l}(e,o.activeHandle,r.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var o=de.getState(e.state);o.dragging&&(!function(e,t,n){for(var o=e.state.doc.resolve(t),r=o.node(-1),i=f.get(r),s=o.start(-1),a=i.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,l=e.state.tr,c=0;c<i.height;c++){var d=c*i.width+a;if(!c||i.map[d]!=i.map[d-i.width]){var u=i.map[d],h=r.nodeAt(u).attrs,p=1==h.colspan?0:a-i.colCount(u);if(!h.colwidth||h.colwidth[p]!=n){var m=h.colwidth?h.colwidth.slice():me(h.colspan);m[p]=n,l.setNodeMarkup(s+u,null,M(h,"colwidth",m))}}}l.docChanged&&e.dispatch(l)}(e,o.activeHandle,pe(o.dragging,t,n)),e.dispatch(e.state.tr.setMeta(de,{setDragging:null})))}function a(t){if(!t.which)return s(t);var o=de.getState(e.state),r=pe(o.dragging,t,n);!function(e,t,n,o){var r=e.state.doc.resolve(t),i=r.node(-1),s=r.start(-1),a=f.get(i).colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.domAtPos(r.start(-1)).node;for(;"TABLE"!=l.nodeName;)l=l.parentNode;ce(i,l.firstChild,l,o,a,n)}(e,o.activeHandle,r,n)}e.dispatch(e.state.tr.setMeta(de,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault()}(e,t,n)}},decorations:function(e){var t=de.getState(e);if(t.activeHandle>-1)return function(e,t){for(var n=[],o=e.doc.resolve(t),r=o.node(-1),i=f.get(r),a=o.start(-1),l=i.colCount(o.pos-a)+o.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var d=l+c*i.width-1;if(!(l!=i.width&&i.map[d]==i.map[d+1]||0!=c&&i.map[d-1]==i.map[d-1-i.width])){var u=i.map[d],h=a+u+r.nodeAt(u).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",n.push(s.Decoration.widget(h,p))}}return s.DecorationSet.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})},t.columnResizingPluginKey=de,t.updateColumnsOnResize=ce,t.__pastedCells=_,t.__insertCells=B,t.__clipCells=j,t.addColumn=Q,t.addColumnBefore=function(e,t){if(!y(e))return!1;if(t){var n=Z(e);t(Q(e.tr,n,n.left))}return!0},t.addColumnAfter=function(e,t){if(!y(e))return!1;if(t){var n=Z(e);t(Q(e.tr,n,n.right))}return!0},t.removeColumn=ee,t.deleteColumn=function(e,t){if(!y(e))return!1;if(t){var n=Z(e),o=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var r=n.right-1;ee(o,n,r),r!=n.left;r--)n.table=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc,n.map=f.get(n.table);t(o)}return!0},t.addRow=te,t.addRowBefore=function(e,t){if(!y(e))return!1;if(t){var n=Z(e);t(te(e.tr,n,n.top))}return!0},t.addRowAfter=function(e,t){if(!y(e))return!1;if(t){var n=Z(e);t(te(e.tr,n,n.bottom))}return!0},t.removeRow=ne,t.deleteRow=function(e,t){if(!y(e))return!1;if(t){var n=Z(e),o=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var r=n.bottom-1;ne(o,n,r),r!=n.top;r--)n.table=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc,n.map=f.get(n.table);t(o)}return!0},t.mergeCells=function(e,t){var n=e.selection;if(!(n instanceof T)||n.$anchorCell.pos==n.$headCell.pos)return!1;var o=Z(e),r=o.map;if(function(e,t){for(var n=e.width,o=e.height,r=e.map,i=t.top*n+t.left,s=i,a=(t.bottom-1)*n+t.left,l=i+(t.right-t.left-1),c=t.top;c<t.bottom;c++){if(t.left>0&&r[s]==r[s-1]||t.right<n&&r[l]==r[l+1])return!0;s+=n,l+=n}for(var d=t.left;d<t.right;d++){if(t.top>0&&r[i]==r[i-n]||t.bottom<o&&r[a]==r[a+n])return!0;i++,a++}return!1}(r,o))return!1;if(t){for(var i,s,l=e.tr,c=[],d=a.Fragment.empty,u=o.top;u<o.bottom;u++)for(var h=o.left;h<o.right;h++){var p=r.map[u*r.width+h],f=o.table.nodeAt(p);if(!(c.indexOf(p)>-1))if(c.push(p),null==i)i=p,s=f;else{oe(f)||(d=d.append(f.content));var m=l.mapping.map(p+o.tableStart);l.delete(m,m+f.nodeSize)}}for(var g=o.tableStart,v=l.doc.nodeAt(Math.max(g-1,0)),y=0;y<v.childCount;y++){var b=v.child(y);if(!b.childCount){var x=l.mapping.map(g);l.delete(x,x+b.nodeSize)}g+=b.nodeSize}if(l.setNodeMarkup(i+o.tableStart,null,M(E(s.attrs,s.attrs.colspan,o.right-o.left-s.attrs.colspan),"rowspan",o.bottom-o.top)),d.size){var w=i+1+s.content.size,k=oe(s)?i+1:w;l.replaceWith(k+o.tableStart,w+o.tableStart,d)}l.setSelection(new T(l.doc.resolve(i+o.tableStart))),t(l)}return!0},t.splitCell=function(e,t){var n,o,r=e.selection;if(r instanceof T){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;n=r.$anchorCell.nodeAfter,o=r.$anchorCell.pos}else{if(!(n=function(e){for(var t=e.depth-1;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(r.$from)))return!1;o=v(r.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(t){var i=n.attrs,s=[],a=i.colwidth;i.rowspan>1&&(i=M(i,"rowspan",1)),i.colspan>1&&(i=M(i,"colspan",1));for(var l=Z(e),c=e.tr,d=0;d<l.right-l.left;d++)s.push(a?M(i,"colwidth",a&&a[d]?[a[d]]:null):i);for(var u,h=I(e.schema)[n.type.spec.tableRole],p=0;p<l.bottom;p++)if(p>=l.top){var f=l.map.positionAt(p,l.left,l.table);p==l.top&&(f+=n.nodeSize);for(var m=l.left,g=0;m<l.right;m++,g++)m==l.left&&p==l.top||c.insert(u=c.mapping.map(f+l.tableStart,1),h.createAndFill(s[g]))}c.setNodeMarkup(o,null,s[0]),r instanceof T&&c.setSelection(new T(c.doc.resolve(r.$anchorCell.pos),u&&c.doc.resolve(u))),t(c)}return!0},t.setCellAttr=function(e,t){return function(n,o){if(!y(n))return!1;var r=b(n);if(r.nodeAfter.attrs[e]===t)return!1;if(o){var i=n.tr;n.selection instanceof T?n.selection.forEachCell((function(n,o){n.attrs[e]!==t&&i.setNodeMarkup(o,null,M(n.attrs,e,t))})):i.setNodeMarkup(r.pos,null,M(r.nodeAfter.attrs,e,t)),o(i)}return!0}},t.toggleHeaderRow=ie,t.toggleHeaderColumn=se,t.toggleHeaderCell=ae,t.goToNextCell=function(e){return function(t,n){if(!y(t))return!1;var o=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var o=e.index(-1)-1,r=e.before();o>=0;o--){var i=e.node(-1).child(o);if(i.childCount)return r-1-i.lastChild.nodeSize;r-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),a=e.indexAfter(-1),l=e.after();a<s.childCount;a++){var c=s.child(a);if(c.childCount)return l+1;l+=c.nodeSize}}}(b(t),e);if(null!=o){if(n){var r=t.doc.resolve(o);n(t.tr.setSelection(i.TextSelection.between(r,w(r))).scrollIntoView())}return!0}}},t.deleteTable=function(e,t){for(var n=e.selection.$anchor,o=n.depth;o>0;o--){if("table"==n.node(o).type.spec.tableRole)return t&&t(e.tr.delete(n.before(o),n.after(o)).scrollIntoView()),!0}return!1}},"./node_modules/prosemirror-transform/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-model/dist/index.js"),r=Math.pow(2,16);function i(e){return 65535&e}var s=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},a=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};a.prototype.recover=function(e){var t=0,n=i(e);if(!this.inverted)for(var o=0;o<n;o++)t+=this.ranges[3*o+2]-this.ranges[3*o+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/r}(e)},a.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},a.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},a.prototype._map=function(e,t,n){for(var o=this,i=0,a=this.inverted?2:1,l=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var d=o.ranges[c]-(o.inverted?i:0);if(d>e)break;var u=o.ranges[c+a],h=o.ranges[c+l],p=d+u;if(e<=p){var f=d+i+((u?e==d?-1:e==p?1:t:t)<0?0:h);if(n)return f;var m=c/3+(e-d)*r;return new s(f,t<0?e!=d:e!=p,m)}i+=h-u}return n?e+i:new s(e+i)},a.prototype.touches=function(e,t){for(var n=this,o=0,r=i(t),s=this.inverted?2:1,a=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var c=n.ranges[l]-(n.inverted?o:0);if(c>e)break;var d=n.ranges[l+s];if(e<=c+d&&l==3*r)return!0;o+=n.ranges[l+a]-d}return!1},a.prototype.forEach=function(e){for(var t=this,n=this.inverted?2:1,o=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var s=t.ranges[r],a=s-(t.inverted?i:0),l=s+(t.inverted?0:i),c=t.ranges[r+n],d=t.ranges[r+o];e(a,a+c,l,l+d),i+=d-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(e){return 0==e?a.empty:new a(e<0?[0,-e,0]:[0,0,e])},a.empty=new a([]);var l=function(e,t,n,o){this.maps=e||[],this.from=n||0,this.to=null==o?this.maps.length:o,this.mirror=t};function c(e){var t=Error.call(this,e);return t.__proto__=c.prototype,t}l.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new l(this.maps,this.mirror,e,t)},l.prototype.copy=function(){return new l(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},l.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},l.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var o=e.getMirror(t);this.appendMap(e.maps[t],null!=o&&o<t?n+o:null)}},l.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},l.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},l.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var o=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=o&&o>t?n-o-1:null)}},l.prototype.invert=function(){var e=new l;return e.appendMappingInverted(this),e},l.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},l.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},l.prototype._map=function(e,t,n){for(var o=this,r=!1,i=null,a=this.from;a<this.to;a++){var l=o.maps[a],c=i&&i[a];if(null!=c&&l.touches(e,c))e=l.recover(c);else{var d=l.mapResult(e,t);if(null!=d.recover){var u=o.getMirror(a);if(null!=u&&u>a&&u<o.to){if(d.deleted){a=u,e=o.maps[u].recover(d.recover);continue}(i||(i=Object.create(null)))[u]=d.recover}}d.deleted&&(r=!0),e=d.pos}}return n?e:new s(e,r)},c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="TransformError";var d=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new l},u={before:{},docChanged:{}};function h(){throw new Error("Override me")}u.before.get=function(){return this.docs.length?this.docs[0]:this.doc},d.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new c(t.failed);return this},d.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},u.docChanged.get=function(){return this.steps.length>0},d.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(d.prototype,u);var p=Object.create(null),f=function(){};f.prototype.apply=function(e){return h()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(e){return h()},f.prototype.map=function(e){return h()},f.prototype.merge=function(e){return null},f.prototype.toJSON=function(){return h()},f.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=p[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},f.jsonID=function(e,t){if(e in p)throw new RangeError("Duplicate use of step JSON ID "+e);return p[e]=t,t.prototype.jsonID=e,t};var m=function(e,t){this.doc=e,this.failed=t};m.ok=function(e){return new m(e,null)},m.fail=function(e){return new m(null,e)},m.fromReplace=function(e,t,n,r){try{return m.ok(e.replace(t,n,r))}catch(e){if(e instanceof o.ReplaceError)return m.fail(e.message);throw e}};var g=function(e){function t(t,n,o,r){e.call(this),this.from=t,this.to=n,this.slice=o,this.structure=!!r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&y(e,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return n.deleted&&o.deleted?null:new t(n.pos,Math.max(n.pos,o.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?o.Slice.empty:new o.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?o.Slice.empty:new o.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,o.Slice.fromJSON(e,n.slice),!!n.structure)},t}(f);f.jsonID("replace",g);var v=function(e){function t(t,n,o,r,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=o,this.gapTo=r,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(y(e,this.from,this.gapFrom)||y(e,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?m.fromReplace(e,this.from,this.to,n):m.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&o.deleted||r<n.pos||i>o.pos?null:new t(n.pos,o.pos,r,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,o.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(f);function y(e,t,n){for(var o=e.resolve(t),r=n-t,i=o.depth;r>0&&i>0&&o.indexAfter(i)==o.node(i).childCount;)i--,r--;if(r>0)for(var s=o.node(i).maybeChild(o.indexAfter(i));r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}return!1}function b(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function x(e){return{type:e,attrs:null}}function w(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function k(e,t,n){var o=e.resolve(t);if(o.parent.canReplaceWith(o.index(),o.index(),n))return t;if(0==o.parentOffset)for(var r=o.depth-1;r>=0;r--){var i=o.index(r);if(o.node(r).canReplaceWith(i,i,n))return o.before(r+1);if(i>0)return null}if(o.parentOffset==o.parent.content.size)for(var s=o.depth-1;s>=0;s--){var a=o.indexAfter(s);if(o.node(s).canReplaceWith(a,a,n))return o.after(s+1);if(a<o.node(s).childCount)return null}}function S(e,t,n){for(var r=[],i=0;i<e.childCount;i++){var s=e.child(i);s.content.size&&(s=s.copy(S(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return o.Fragment.fromArray(r)}f.jsonID("replaceAround",v),d.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,i=e.depth,s=n.before(i+1),a=r.after(i+1),l=s,c=a,d=o.Fragment.empty,u=0,h=i,p=!1;h>t;h--)p||n.index(h)>0?(p=!0,d=o.Fragment.from(n.node(h).copy(d)),u++):l--;for(var f=o.Fragment.empty,m=0,g=i,y=!1;g>t;g--)y||r.after(g+1)<r.end(g)?(y=!0,f=o.Fragment.from(r.node(g).copy(f)),m++):c++;return this.step(new v(l,c,s,a,new o.Slice(d.append(f),u,m),d.size-u,!0))},d.prototype.wrap=function(e,t){for(var n=o.Fragment.empty,r=t.length-1;r>=0;r--)n=o.Fragment.from(t[r].type.create(t[r].attrs,n));var i=e.start,s=e.end;return this.step(new v(i,s,i,s,new o.Slice(n,0,0),t.length,!0))},d.prototype.setBlockType=function(e,t,n,r){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&function(e,t,n){var o=e.resolve(t),r=o.index();return o.parent.canReplaceWith(r,r+1,n)}(i.doc,i.mapping.slice(s).map(t),n)){i.clearIncompatible(i.mapping.slice(s).map(t,1),n);var a=i.mapping.slice(s),l=a.map(t,1),c=a.map(t+e.nodeSize,1);return i.step(new v(l,c,l+1,c-1,new o.Slice(o.Fragment.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},d.prototype.setNodeMarkup=function(e,t,n,r){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var s=t.create(n,null,r||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new v(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new o.Slice(o.Fragment.from(s),0,0),1,!0))},d.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),i=o.Fragment.empty,s=o.Fragment.empty,a=r.depth,l=r.depth-t,c=t-1;a>l;a--,c--){i=o.Fragment.from(r.node(a).copy(i));var d=n&&n[c];s=o.Fragment.from(d?d.type.create(d.attrs,s):r.node(a).copy(s))}return this.step(new g(e,e,new o.Slice(i.append(s),t,t),!0))},d.prototype.join=function(e,t){void 0===t&&(t=1);var n=new g(e-t,e+t,o.Slice.empty,!0);return this.step(n)};var M=function(e){function t(t,n,o){e.call(this),this.from=t,this.to=n,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new o.Slice(S(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),i),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,s)},t.prototype.invert=function(){return new C(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new t(n.pos,o.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);f.jsonID("addMark",M);var C=function(e){function t(t,n,o){e.call(this),this.from=t,this.to=n,this.mark=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new o.Slice(S(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new M(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),o=e.mapResult(this.to,-1);return n.deleted&&o.deleted||n.pos>=o.pos?null:new t(n.pos,o.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(f);function E(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=o.Slice.empty),t==n&&!r.size)return null;var i=e.resolve(t),s=e.resolve(n);if(I(i,s,r))return new g(t,n,r);var a=function(e,t){var n=T(e,0,t,!1),r=n.content,i=n.openEnd;return new o.Slice(r,e.depth,i||0)}(i,function(e,t){for(var n=new _(e),o=1;t.size&&o<=3;o++){var r=n.placeSlice(t.content,t.openStart,t.openEnd,o);3==o&&r!=t&&r.size&&(o=0),t=r}for(;n.open.length;)n.closeNode();return n.placed}(i,r)),l=N(i,s,a);if(!l)return null;if(a.size!=l.size&&function(e,t,n){if(!t.parent.isTextblock)return!1;var o,r=n.openEnd?function(e,t){for(var n=1;n<t;n++)e=e.lastChild.content;return e.lastChild}(n.content,n.openEnd):e.node(e.depth-(n.openStart-n.openEnd));if(!r.isTextblock)return!1;for(var i=t.index();i<t.parent.childCount;i++)if(!r.type.allowsMarks(t.parent.child(i).marks))return!1;n.openEnd?o=r.contentMatchAt(r.childCount):(o=r.contentMatchAt(r.childCount),n.size&&(o=o.matchFragment(n.content,n.openStart?1:0)));return(o=o.matchFragment(t.parent.content,t.index()))&&o.validEnd}(i,s,a)){for(var c=s.depth,d=s.after(c);c>1&&d==s.end(--c);)++d;var u=N(i,e.resolve(d),a);if(u)return new v(t,d,n,s.end(),u,a.size)}return l.size||t!=n?new g(t,n,l):null}function T(e,t,n,r){var i=o.Fragment.empty,s=0,a=n[t];if(e.depth>t){var l=T(e,t+1,n,r||a);s=l.openEnd+1,i=o.Fragment.from(e.node(t+1).copy(l.content))}return a&&(i=i.append(a.content),s=a.openEnd),r&&(i=i.append(e.node(t).contentMatchAt(e.indexAfter(t)).fillBefore(o.Fragment.empty,!0)),s=0),{content:i,openEnd:s}}function O(e,t,n,o,r,i,s){var a,l=e.childCount,c=l-(s>0?1:0),d=i<0?t:n.node(r);a=i<0?d.contentMatchAt(c):1==l&&s>0?d.contentMatchAt(i?n.index(r):n.indexAfter(r)):d.contentMatchAt(n.indexAfter(r)).matchFragment(e,l>0&&i?1:0,c);var u=o.node(r);if(s>0&&r<o.depth){var h=u.content.cutByIndex(o.indexAfter(r)).addToStart(e.lastChild),p=a.fillBefore(h,!0);if(p&&p.size&&i>0&&1==l&&(p=null),p){var f=O(e.lastChild.content,e.lastChild,n,o,r+1,1==l?i-1:-1,s-1);if(f){var m=e.lastChild.copy(f);return p.size?e.cutByIndex(0,l-1).append(p).addToEnd(m):e.replaceChild(l-1,m)}}}s>0&&(a=a.matchType((1==l&&i>0?n.node(r+1):e.lastChild).type));var g=o.index(r);if(g==u.childCount&&!u.type.compatibleContent(t.type))return null;for(var v=a.fillBefore(u.content,!0,g),y=g;v&&y<u.content.childCount;y++)d.type.allowsMarks(u.content.child(y).marks)||(v=null);if(!v)return null;if(s>0){var b=A(e.lastChild,s-1,n,r+1,1==l?i-1:-1);e=e.replaceChild(l-1,b)}return e=e.append(v),o.depth>r&&(e=e.addToEnd(R(o,r+1))),e}function A(e,t,n,r,i){var s,a=e.content,l=a.childCount;if(s=i>=0?n.node(r).contentMatchAt(n.indexAfter(r)).matchFragment(a,i>0?1:0,l):e.contentMatchAt(l),t>0){var c=A(a.lastChild,t-1,n,r+1,1==l?i-1:-1);a=a.replaceChild(l-1,c)}return e.copy(a.append(s.fillBefore(o.Fragment.empty,!0)))}function R(e,t){var n=e.node(t),o=n.contentMatchAt(0).fillBefore(n.content,!0,e.index(t));return e.depth>t&&(o=o.addToEnd(R(e,t+1))),n.copy(o)}function N(e,t,n){var r=O(n.content,e.node(0),e,t,0,n.openStart,n.openEnd);return r?function(e,t,n){for(;t>0&&n>0&&1==e.childCount;)e=e.firstChild.content,t--,n--;return new o.Slice(e,t,n)}(r,n.openStart,t.depth):null}function I(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}f.jsonID("removeMark",C),d.prototype.addMark=function(e,t,n){var o=this,r=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(o,l,c){if(o.isInline){var d=o.marks;if(!n.isInSet(d)&&c.type.allowsMarkType(n.type)){for(var u=Math.max(l,e),h=Math.min(l+o.nodeSize,t),p=n.addToSet(d),f=0;f<d.length;f++)d[f].isInSet(p)||(s&&s.to==u&&s.mark.eq(d[f])?s.to=h:r.push(s=new C(u,h,d[f])));a&&a.to==u?a.to=h:i.push(a=new M(u,h,n))}}})),r.forEach((function(e){return o.step(e)})),i.forEach((function(e){return o.step(e)})),this},d.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(e,t,(function(r,a){if(r.isInline){s++;var l=null;if(n instanceof o.MarkType){var c=n.isInSet(r.marks);c&&(l=[c])}else n?n.isInSet(r.marks)&&(l=[n]):l=r.marks;if(l&&l.length)for(var d=Math.min(a+r.nodeSize,t),u=0;u<l.length;u++){for(var h=l[u],p=void 0,f=0;f<i.length;f++){var m=i[f];m.step==s-1&&h.eq(i[f].style)&&(p=m)}p?(p.to=d,p.step=s):i.push({style:h,from:Math.max(a,e),to:d,step:s})}}})),i.forEach((function(e){return r.step(new C(e.from,e.to,e.style))})),this},d.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),i=[],s=e+1,a=0;a<r.childCount;a++){var l=r.child(a),c=s+l.nodeSize,d=n.matchType(l.type,l.attrs);if(d){n=d;for(var u=0;u<l.marks.length;u++)t.allowsMarkType(l.marks[u].type)||this.step(new C(s,c,l.marks[u]))}else i.push(new g(s,c,o.Slice.empty));s=c}if(!n.validEnd){var h=n.fillBefore(o.Fragment.empty,!0);this.replace(s,s,new o.Slice(h,0,0))}for(var p=i.length-1;p>=0;p--)this.step(i[p]);return this},d.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=o.Slice.empty);var r=E(this.doc,e,t,n);return r&&this.step(r),this},d.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new o.Slice(o.Fragment.from(n),0,0))},d.prototype.delete=function(e,t){return this.replace(e,t,o.Slice.empty)},d.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var _=function(e){this.open=[];for(var t=0;t<=e.depth;t++){var n=e.node(t),r=n.contentMatchAt(e.indexAfter(t));this.open.push({parent:n,match:r,content:o.Fragment.empty,wrapper:!1,openEnd:0,depth:t})}this.placed=[]};function P(e,t,n){var o=e.content;if(t>1){var r=P(e.firstChild,t-1,1==e.childCount?n-1:0);o=e.content.replaceChild(0,r)}var i=e.type.contentMatch.fillBefore(o,0==n);return e.copy(i.append(o))}function j(e,t){var n=e.content;if(t>1){var r=j(e.lastChild,t-1);n=e.content.replaceChild(e.childCount-1,r)}var i=e.contentMatchAt(e.childCount).fillBefore(o.Fragment.empty,!0);return e.copy(n.append(i))}function D(e,t,n,r,i){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(D(s.content,t+1,n,r,s)))}if(t>r){var a=i.contentMatchAt(0),l=a.fillBefore(e).append(e);e=l.append(a.matchFragment(l).fillBefore(o.Fragment.empty,!0))}return e}function z(e,t){for(var n=[],o=Math.min(e.depth,t.depth);o>=0;o--){var r=e.start(o);if(r<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;r==t.start(o)&&n.push(o)}return n}_.prototype.placeSlice=function(e,t,n,r,i){if(t>0){var s=e.firstChild,a=this.placeSlice(s.content,Math.max(0,t-1),n&&1==e.childCount?n-1:0,r,s);a.content!=s.content&&(a.content.size?(e=e.replaceChild(0,s.copy(a.content)),t=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),t=0))}var l=this.placeContent(e,t,n,r,i);if(r>2&&l.size&&0==t){var c=l.content.firstChild,d=1==l.content.childCount;this.placeContent(c.content,0,n&&d?n-1:0,r,c),l=d?o.Fragment.empty:new o.Slice(l.content.cutByIndex(1),0,n)}return l},_.prototype.placeContent=function(e,t,n,r,i){for(var s=this,a=0;a<e.childCount;a++){for(var l=e.child(a),c=!1,d=a==e.childCount-1,u=this.open.length-1;u>=0;u--){var h=s.open[u],p=void 0;if(r>1&&(p=h.match.findWrapping(l.type))&&(!i||!p.length||p[p.length-1]!=i.type)){for(;this.open.length-1>u;)s.closeNode();for(var f=0;f<p.length;f++)h.match=h.match.matchType(p[f]),u++,h={parent:p[f].create(),match:p[f].contentMatch,content:o.Fragment.empty,wrapper:!0,openEnd:0,depth:u+f},s.open.push(h)}var m=h.match.matchType(l.type);if(!m){var g=h.match.fillBefore(o.Fragment.from(l));if(!g){if(i&&h.match.matchType(i.type))break;continue}for(var v=0;v<g.childCount;v++){var y=g.child(v);s.addNode(h,y,0),m=h.match.matchFragment(y)}}for(;this.open.length-1>u;)s.closeNode();l=l.mark(h.parent.type.allowedMarks(l.marks)),t&&(l=P(l,t,d?n:0),t=0),s.addNode(h,l,d?n:0),h.match=m,d&&(n=0),c=!0;break}if(!c)break}return this.open.length>1&&(a>0&&a==e.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new o.Slice(e.cutByIndex(a),t,n)},_.prototype.addNode=function(e,t,n){var o,r;e.content=(o=e.content,r=e.openEnd,r?o.replaceChild(o.childCount-1,j(o.lastChild,r)):o).addToEnd(t),e.openEnd=n},_.prototype.closeNode=function(){var e=this.open.pop();0==e.content.size||(e.wrapper?this.addNode(this.open[this.open.length-1],e.parent.copy(e.content),e.openEnd+1):this.placed[e.depth]={depth:e.depth,content:e.content,openEnd:e.openEnd})},d.prototype.replaceRange=function(e,t,n){var r=this;if(!n.size)return this.deleteRange(e,t);var i=this.doc.resolve(e),s=this.doc.resolve(t);if(I(i,s,n))return this.step(new g(e,t,n));var a=z(i,this.doc.resolve(t));0==a[a.length-1]&&a.pop();var l=-(i.depth+1);a.unshift(l);for(var c=i.depth,d=i.pos-1;c>0;c--,d--){var u=i.node(c).type.spec;if(u.defining||u.isolating)break;a.indexOf(c)>-1?l=c:i.before(c)==d&&a.splice(1,0,-c)}for(var h=a.indexOf(l),p=[],f=n.openStart,m=n.content,v=0;;v++){var y=m.firstChild;if(p.push(y),v==n.openStart)break;m=y.content}f>0&&p[f-1].type.spec.defining&&i.node(h).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&i.node(h).type!=p[f-2].type&&(f-=2);for(var b=n.openStart;b>=0;b--){var x=(b+f+1)%(n.openStart+1),w=p[x];if(w)for(var k=0;k<a.length;k++){var S=a[(k+h)%a.length],M=!0;S<0&&(M=!1,S=-S);var C=i.node(S-1),E=i.index(S-1);if(C.canReplaceWith(E,E,w.type,w.marks))return r.replace(i.before(S),M?s.after(S):t,new o.Slice(D(n.content,0,n.openStart,x),x,n.openEnd))}}for(var T=this.steps.length,O=a.length-1;O>=0&&(r.replace(e,t,n),!(r.steps.length>T));O--){var A=a[O];O<0||(e=i.before(A),t=s.after(A))}return this},d.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=k(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new o.Slice(o.Fragment.from(n),0,0))},d.prototype.deleteRange=function(e,t){for(var n=this,o=this.doc.resolve(e),r=this.doc.resolve(t),i=z(o,r),s=0;s<i.length;s++){var a=i[s],l=s==i.length-1;if(l&&0==a||o.node(a).type.contentMatch.validEnd)return n.delete(o.start(a),r.end(a));if(a>0&&(l||o.node(a-1).canReplace(o.index(a-1),r.indexAfter(a-1))))return n.delete(o.before(a),r.after(a))}for(var c=1;c<=o.depth;c++)if(e-o.start(c)==o.depth-c&&t>o.end(c))return n.delete(o.before(c),t);return this.delete(e,t)},t.Transform=d,t.TransformError=c,t.Step=f,t.StepResult=m,t.joinPoint=function(e,t,n){void 0===n&&(n=-1);for(var o=e.resolve(t),r=o.depth;;r--){var i=void 0,s=void 0;if(r==o.depth?(i=o.nodeBefore,s=o.nodeAfter):n>0?(i=o.node(r+1),s=o.node(r).maybeChild(o.index(r)+1)):(i=o.node(r).maybeChild(o.index(r)-1),s=o.node(r+1)),i&&!i.isTextblock&&w(i,s))return t;if(0==r)break;t=n<0?o.before(r):o.after(r)}},t.canJoin=function(e,t){var n=e.resolve(t),o=n.index();return w(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(o,o+1)},t.canSplit=function(e,t,n,o){void 0===n&&(n=1);var r=e.resolve(t),i=r.depth-n,s=o&&o[o.length-1]||r.parent;if(i<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,l=n-2;a>i;a--,l--){var c=r.node(a),d=r.index(a);if(c.type.spec.isolating)return!1;var u=c.content.cutByIndex(d,c.childCount),h=o&&o[l]||c;if(h!=c&&(u=u.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(d+1,c.childCount)||!h.type.validContent(u))return!1}var p=r.indexAfter(i),f=o&&o[0];return r.node(i).canReplaceWith(p,p,f?f.type:r.node(i+1).type)},t.insertPoint=k,t.dropPoint=function(e,t,n){var o=e.resolve(t);if(!n.content.size)return t;for(var r=n.content,i=0;i<n.openStart;i++)r=r.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=o.depth;a>=0;a--){var l=a==o.depth?0:o.pos<=(o.start(a+1)+o.end(a+1))/2?-1:1,c=o.index(a)+(l>0?1:0);if(1==s?o.node(a).canReplace(c,c,r):o.node(a).contentMatchAt(c).findWrapping(r.firstChild.type))return 0==l?o.pos:l<0?o.before(a+1):o.after(a+1)}return null},t.liftTarget=function(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var o=e.$from.node(n),r=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&o.canReplace(r,i,t))return n;if(0==n||o.type.spec.isolating||!b(o,r,i))break}},t.findWrapping=function(e,t,n,o){void 0===o&&(o=e);var r=function(e,t){var n=e.parent,o=e.startIndex,r=e.endIndex,i=n.contentMatchAt(o).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(o,r,s)?i:null}(e,t),i=r&&function(e,t){var n=e.parent,o=e.startIndex,r=e.endIndex,i=n.child(o),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,l=o;a&&l<r;l++)a=a.matchType(n.child(l).type);if(!a||!a.validEnd)return null;return s}(o,t);return i?r.map(x).concat({type:t,attrs:n}).concat(i.map(x)):null},t.StepMap=a,t.MapResult=s,t.Mapping=l,t.AddMarkStep=M,t.RemoveMarkStep=C,t.ReplaceStep=g,t.ReplaceAroundStep=v,t.replaceStep=E},"./node_modules/prosemirror-utils/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=n("./node_modules/prosemirror-model/dist/index.js"),i=n("./node_modules/prosemirror-tables/dist/index.js"),s=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var o=0,r=e.length;o<r;o++){var i=I(e[o])(n.selection);if(i){var s=m(i.pos,t)(n);if(s!==n)return s}}return n}},a=function(e){return function(t){if(h(t.selection)){var n=t.selection,i=n.$from,s=n.$to;if(e instanceof r.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),e)||i.parent.canReplaceWith(i.index(),i.indexAfter(),e.type))return f(t.replaceWith(i.pos,s.pos,e).setSelection(new o.NodeSelection(t.doc.resolve(i.pos))))}return t}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var r=o.Selection.findFrom(n.doc.resolve(e),t,!0);return r?n.setSelection(r):n}},c=function(e){return e.type&&e.type.spec.selectable},d=function(e,t,n){return function(e){return c(e)&&e.type.isLeaf}(e)?n.setSelection(new o.NodeSelection(n.doc.resolve(t))):l(t)(n)},u=function(e,t,n){return function(o){var r="number"==typeof t,i=o.selection.$from,l=r?o.doc.resolve(t):h(o.selection)?o.doc.resolve(i.pos+1):i,u=l.parent;if(h(o.selection)&&n&&o!==(o=a(e)(o)))return o;if(x(u)&&o!==(o=s(u.type,e)(o))){var p=c(e)?l.before(l.depth):l.pos;return d(e,p,o)}if(b(l,e)){o.insert(l.pos,e);var m=r?l.pos:c(e)?o.selection.$anchor.pos-1:o.selection.$anchor.pos;return f(d(e,m,o))}for(var g=l.depth;g>0;g--){var v=l.after(g),y=o.doc.resolve(v);if(b(y,e))return o.insert(v,e),f(d(e,v,o))}return o}},h=function(e){return e instanceof o.NodeSelection},p=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},f=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},m=function(e,t){return function(n){var o=n.doc.nodeAt(e),r=n.doc.resolve(e);if(g(r,t)){var i=(n=n.replaceWith(e,e+o.nodeSize,t)).selection.$from.pos-1;return n=l(Math.max(i,0),-1)(n),n=l(n.selection.$from.start())(n),f(n)}return n}},g=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof r.Fragment?t:r.Fragment.from(t))},v=function(e){return function(t){var n=t.doc.nodeAt(e);return f(t.delete(e,e+n.nodeSize))}},y=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var o=e.nodes[n];o.spec.tableRole&&(t[o.spec.tableRole]=o)})),e.cached.tableNodeTypes=t,t},b=function(e,t){var n=e.index();return t instanceof r.Fragment?e.parent.canReplace(n,n,t):t instanceof r.Node&&e.parent.canReplaceWith(n,n,t.type)},x=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},k=function(e){return function(t){for(var n=i.TableMap.get(t.$anchorCell.node(-1)),o=t.$anchorCell.start(-1),r=n.cellsInRect(e),s=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o)),a=0,l=r.length;a<l;a++)if(-1===s.indexOf(r[a]))return!1;return!0}},S=function(e){return e[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},M=function(e){for(var t=i.TableMap.get(e),n=[],o=0;o<t.height;o++){for(var r=[],s={},a=0;a<t.width;a++){var l=t.map[o*t.width+a],c=e.nodeAt(l),d=t.findCell(l);s[l]||d.top!==o?r.push(null):(s[l]=!0,r.push(c))}n.push(r)}return n},C=function(e,t){for(var n=[],o=i.TableMap.get(e),r=0;r<o.height;r++){for(var s=e.child(r),a=[],l=0;l<o.width;l++)if(t[r][l]){var c=o.map[r*o.width+l],d=t[r][l],u=e.nodeAt(c).type.createChecked(Object.assign({},d.attrs),d.content,d.marks);a.push(u)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return e.type.createChecked(e.attrs,n,e.marks)},E=function(e,t,n,o){var r=t[0]>n[0]?-1:1,i=e.splice(t[0],t.length),s=i.length%2==0?1:0,a=void 0;return a=-1===o&&1===r?n[0]-1:1===o&&-1===r?n[n.length-1]-s+1:-1===r?n[0]:n[n.length-1]-s,e.splice.apply(e,[a,0].concat(i)),e},T=function(e,t,n,o){var r="Target position is invalid, you can't move the "+o+" "+e+" to "+t+", the target can't be split. You could use tryToFit option.";if(1===(e>t?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(t))throw new Error(r)}else if(-1!==n.slice(1).indexOf(t))throw new Error(r);return!0},O=function(e){return function(t){var n=t.$from;return A(n,e)}},A=function(e,t){for(var n=e.depth;n>0;n--){var o=e.node(n);if(t(o))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:o}}},R=function(e,t){return function(n){var o=O(e)(n);if(o)return P(o.pos,t)}},N=function(e){return function(t){return!!O(e)(t)}},I=function(e){return function(t){return O((function(t){return p(e,t)}))(t)}},_=function(e){var t=e.$from.nodeBefore,n=o.Selection.findFrom(e.$from,-1);if(n&&t){var r=I(t.type)(n);return r?r.pos:n.$from.pos}},P=function(e,t){var n=t(e),o=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:o&&o.nodeType!==Node.TEXT_NODE?o:n.node},j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,o){if(n.push({node:e,pos:o}),!t)return!1})),n},D=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return j(e,n).filter((function(e){return t(e.node)}))},z=function(e,t,n){return D(e,(function(e){return e.type===t}),n)};var B=function(e){return O((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},L=function(e){return e instanceof i.CellSelection},$=function(e){if(L(e)){var t=i.TableMap.get(e.$anchorCell.node(-1));return k({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},F=function(e){return function(t){var n=B(t);if(n){var o=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=o.width-1){var r=o.cellsInRect({left:t,right:t+1,top:0,bottom:o.height});return e.concat(r.map((function(e){var t=n.node.nodeAt(e),o=e+n.start;return{pos:o,start:o+1,node:t}})))}}),[])}}},V=function(e){return function(t){var n=B(t);if(n){var o=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=o.height-1){var r=o.cellsInRect({left:0,right:o.width,top:t,bottom:t+1});return e.concat(r.map((function(e){var t=n.node.nodeAt(e),o=e+n.start;return{pos:o,start:o+1,node:t}})))}}),[])}}},H=function(e){return function(t,n){return function(o){var r=B(o.selection),s="row"===e;if(r){var a=i.TableMap.get(r.node);if(t>=0&&t<(s?a.height:a.width)){var l=s?0:t,c=s?t:0,d=s?a.width:t+1,u=s?t+1:a.height;if(n){var h=Y(o.selection.$from);if(!h)return o;var p=a.findCell(h.pos-r.start);s?(c=Math.min(c,p.top),u=Math.max(u,p.bottom)):(l=Math.min(l,p.left),d=Math.max(d,p.right))}var m=a.cellsInRect({left:l,top:c,right:s?d:l+1,bottom:s?c+1:u}),g=u-c==1?m:a.cellsInRect({left:s?l:d-1,top:s?u-1:c,right:d,bottom:u}),v=r.start+m[0],y=r.start+g[g.length-1],b=o.doc.resolve(v),x=o.doc.resolve(y);return f(o.setSelection(new i.CellSelection(x,b)))}}return o}}},U=H("column"),W=H("row"),q=function(e){return function(t){var n=B(t.selection);if(n){var o=i.TableMap.get(n.node);if(e>=0&&e<=o.height){for(var r=n.node,s=y(r.type.schema),a=n.start,l=0;l<e+1;l++)a+=r.child(l).nodeSize;var c=r.child(e),d=[],h=0;if(c.forEach((function(e){1===e.attrs.rowspan&&(h+=e.attrs.colspan,d.push(s[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),h<o.width){for(var p=[],f=function(n){var o=Q(n,(function(t,o){var r=t.node.attrs.rowspan;return r>1&&n+r>e}))(t);p.push.apply(p,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o))},m=e;m>=0;m--)f(m);p.length&&p.forEach((function(e){t=X(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return u(s.row.create(c.attrs,d),a)(t)}}return t}},J=function(e){return function(t){var n=B(t.selection);if(n){var o=i.TableMap.get(n.node);if(0===e&&1===o.width)return G(t);if(e>=0&&e<=o.width)return i.removeColumn(t,{map:o,tableStart:n.start,table:n.node},e),f(t)}return t}},K=function(e){return function(t){var n=B(t.selection);if(n){var o=i.TableMap.get(n.node);if(0===e&&1===o.height)return G(t);if(e>=0&&e<=o.height)return i.removeRow(t,{map:o,tableStart:n.start,table:n.node},e),f(t)}return t}},G=function(e){for(var t=e.selection.$from,n=t.depth;n>0;n--){if("table"===t.node(n).type.spec.tableRole)return f(e.delete(t.before(n),t.after(n)))}return e},X=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),f(n)):n}},Y=function(e){return A(e,(function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)}))},Z=function(e){var t=Y(e);if(t){var n=function(e){return A(e,(function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)}))}(e),o=i.TableMap.get(n.node),r=t.pos-n.start;return o.rectBetween(r,r)}},Q=function(e,t){return function(n){var o=[],r=V(e)(n.selection);if(r)for(var i=r.length-1;i>=0;i--)t(r[i],n)&&o.push(r[i]);return o}},ee=function(e){return function(t){for(var n=e,o=e,r=function(e){var r=F(e)(t.selection);r&&r.forEach((function(t){var r=t.node.attrs.colspan+e-1;r>=n&&(n=e),r>o&&(o=r)}))},i=e;i>=0;i--)r(i);var s=function(e){var n=F(e)(t.selection);n&&n.forEach((function(t){var n=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&n>o&&(o=n)}))};for(i=e;i<=o;i++)s(i);var a=[];for(i=n;i<=o;i++){var l=F(i)(t.selection);l&&l.length&&a.push(i)}n=a[0],o=a[a.length-1];for(var c=F(n)(t.selection),d=V(0)(t.selection),u=t.doc.resolve(c[c.length-1].pos),h=void 0,p=o;p>=n;p--){var f=F(p)(t.selection);if(f&&f.length){for(var m=d.length-1;m>=0;m--)if(d[m].pos===f[0].pos){h=f[0];break}if(h)break}}return{$anchor:u,$head:t.doc.resolve(h.pos),indexes:a}}},te=function(e){return function(t){for(var n=e,o=e,r=function(e){V(e)(t.selection).forEach((function(t){var r=t.node.attrs.rowspan+e-1;r>=n&&(n=e),r>o&&(o=r)}))},i=e;i>=0;i--)r(i);var s=function(e){V(e)(t.selection).forEach((function(t){var n=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&n>o&&(o=n)}))};for(i=e;i<=o;i++)s(i);var a=[];for(i=n;i<=o;i++){var l=V(i)(t.selection);l&&l.length&&a.push(i)}n=a[0],o=a[a.length-1];for(var c=V(n)(t.selection),d=F(0)(t.selection),u=t.doc.resolve(c[c.length-1].pos),h=void 0,p=o;p>=n;p--){var f=V(p)(t.selection);if(f&&f.length){for(var m=d.length-1;m>=0;m--)if(d[m].pos===f[0].pos){h=f[0];break}if(h)break}}return{$anchor:u,$head:t.doc.resolve(h.pos),indexes:a}}};t.isNodeSelection=h,t.canInsert=b,t.convertTableNodeToArrayOfRows=M,t.convertArrayOfRowsToTableNode=C,t.findParentNode=O,t.findParentNodeClosestToPos=A,t.findParentDomRef=R,t.hasParentNode=N,t.findParentNodeOfType=I,t.findParentNodeOfTypeClosestToPos=function(e,t){return A(e,(function(e){return p(t,e)}))},t.hasParentNodeOfType=function(e){return function(t){return N((function(t){return p(e,t)}))(t)}},t.findParentDomRefOfType=function(e,t){return function(n){return R((function(t){return p(e,t)}),t)(n)}},t.findSelectedNodeOfType=function(e){return function(t){if(h(t)){var n=t.node,o=t.$from;if(p(e,n))return{node:n,pos:o.pos,depth:o.depth}}}},t.findPositionOfNodeBefore=_,t.findDomRefAtPos=P,t.flatten=j,t.findChildren=D,t.findTextNodes=function(e,t){return D(e,(function(e){return e.isText}),t)},t.findInlineNodes=function(e,t){return D(e,(function(e){return e.isInline}),t)},t.findBlockNodes=function(e,t){return D(e,(function(e){return e.isBlock}),t)},t.findChildrenByAttr=function(e,t,n){return D(e,(function(e){return!!t(e.attrs)}),n)},t.findChildrenByType=z,t.findChildrenByMark=function(e,t,n){return D(e,(function(e){return t.isInSet(e.marks)}),n)},t.contains=function(e,t){return!!z(e,t).length},t.findTable=B,t.isCellSelection=L,t.getSelectionRect=function(e){if(L(e)){var t=e.$anchorCell.start(-1);return i.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},t.isColumnSelected=function(e){return function(t){if(L(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return k({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},t.isRowSelected=function(e){return function(t){if(L(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return k({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},t.isTableSelected=$,t.getCellsInColumn=F,t.getCellsInRow=V,t.getCellsInTable=function(e){var t=B(e);if(t){var n=i.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(e){var n=t.node.nodeAt(e),o=e+t.start;return{pos:o,start:o+1,node:n}}))}},t.selectColumn=U,t.selectRow=W,t.selectTable=function(e){var t=B(e.selection);if(t){var n=i.TableMap.get(t.node).map;if(n&&n.length){var o=t.start+n[0],r=t.start+n[n.length-1],s=e.doc.resolve(o),a=e.doc.resolve(r);return f(e.setSelection(new i.CellSelection(a,s)))}}return e},t.emptyCell=function(e,t){return function(n){if(e){var o=y(t).cell.createAndFill().content;if(!e.node.content.eq(o))return n.replaceWith(e.pos+1,e.pos+e.node.nodeSize,o),f(n)}return n}},t.addColumnAt=function(e){return function(t){var n=B(t.selection);if(n){var o=i.TableMap.get(n.node);if(e>=0&&e<=o.width)return f(i.addColumn(t,{map:o,tableStart:n.start,table:n.node},e))}return t}},t.moveRow=function(e,t,n){return function(o){var r=Object.assign({tryToFit:!1,direction:0},n),i=B(o.selection);if(!i)return o;var s=te(e)(o).indexes,a=te(t)(o).indexes;if(s.indexOf(t)>-1)return o;!r.tryToFit&&a.length>1&&T(e,t,a,"row");var l=function(e,t,n,o){var r=M(e.node);return r=E(r,t,n,o),C(e.node,r)}(i,s,a,r.direction);return f(o).replaceWith(i.pos,i.pos+i.node.nodeSize,l)}},t.moveColumn=function(e,t,n){return function(o){var r=Object.assign({tryToFit:!1,direction:0},n),i=B(o.selection);if(!i)return o;var s=ee(e)(o).indexes,a=ee(t)(o).indexes;if(s.indexOf(t)>-1)return o;!r.tryToFit&&a.length>1&&T(e,t,a,"column");var l=function(e,t,n,o){var r=S(M(e.node));return r=E(r,t,n,o),r=S(r),C(e.node,r)}(i,s,a,r.direction);return f(o).replaceWith(i.pos,i.pos+i.node.nodeSize,l)}},t.addRowAt=function(e,t){return function(n){var o=B(n.selection);if(o){var r=i.TableMap.get(o.node),s=e-1;if(t&&s>=0)return f(q(s)(n));if(e>=0&&e<=r.height)return f(i.addRow(n,{map:r,tableStart:o.start,table:o.node},e))}return n}},t.cloneRowAt=q,t.removeColumnAt=J,t.removeRowAt=K,t.removeTable=G,t.removeSelectedColumns=function(e){var t=e.selection;if($(t))return G(e);if(L(t)){var n=B(t);if(n){var o=i.TableMap.get(n.node),r=o.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==r.left&&r.right==o.width)return!1;for(var s=Object.assign({},r,{map:o,table:n.node,tableStart:n.start}),a=s.right-1;i.removeColumn(e,s,a),a!==s.left;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table);return f(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if($(t))return G(e);if(L(t)){var n=B(t);if(n){var o=i.TableMap.get(n.node),r=o.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==r.top&&r.bottom==o.height)return!1;for(var s=Object.assign({},r,{map:o,table:n.node,tableStart:n.start}),a=s.bottom-1;i.removeRow(e,s,a),a!==s.top;a--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table);return f(e)}}return e},t.removeColumnClosestToPos=function(e){return function(t){var n=Z(e);return n?J(n.left)(l(e.pos)(t)):t}},t.removeRowClosestToPos=function(e){return function(t){var n=Z(e);return n?K(n.top)(l(e.pos)(t)):t}},t.forEachCellInColumn=function(e,t,n){return function(r){var i=F(e)(r.selection);if(i){for(var s=i.length-1;s>=0;s--)r=t(i[s],r);if(n){var a=r.doc.resolve(r.mapping.map(i[i.length-1].pos));r.setSelection(o.Selection.near(a))}return f(r)}return r}},t.forEachCellInRow=function(e,t,n){return function(r){var i=V(e)(r.selection);if(i){for(var s=i.length-1;s>=0;s--)r=t(i[s],r);if(n){var a=r.doc.resolve(r.mapping.map(i[i.length-1].pos));r.setSelection(o.Selection.near(a))}}return r}},t.setCellAttrs=X,t.createTable=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=y(e),s=i.cell,a=i.header_cell,l=i.row,c=i.table,d=[],u=[],h=0;h<n;h++)d.push(w(s,r)),o&&u.push(w(a,r));for(var p=[],f=0;f<t;f++)p.push(l.createChecked(null,o&&0===f?u:d));return c.createChecked(null,p)},t.findCellClosestToPos=Y,t.findCellRectClosestToPos=Z,t.getSelectionRangeInColumn=ee,t.getSelectionRangeInRow=te,t.removeParentNodeOfType=function(e){return function(t){var n=I(e)(t.selection);return n?v(n.pos)(t):t}},t.replaceParentNodeOfType=s,t.removeSelectedNode=function(e){if(h(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return f(e.delete(t,n))}return e},t.replaceSelectedNode=a,t.setTextSelection=l,t.safeInsert=u,t.setParentNodeMarkup=function(e,t,n,o){return function(r){var i=I(e)(r.selection);return i?f(r.setNodeMarkup(i.pos,t,Object.assign({},i.node.attrs,n),o)):r}},t.selectParentNodeOfType=function(e){return function(t){if(!h(t.selection)){var n=I(e)(t.selection);if(n)return f(t.setSelection(o.NodeSelection.create(t.doc,n.pos)))}return t}},t.removeNodeBefore=function(e){var t=_(e.selection);return"number"==typeof t?v(t)(e):e}},"./node_modules/prosemirror-view/dist/index.js":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=n("./node_modules/prosemirror-model/dist/index.js"),i=n("./node_modules/prosemirror-transform/dist/index.js"),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),l=/MSIE \d/.test(navigator.userAgent),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var d=s.ie=!!(l||c||a);s.ie_version=l?document.documentMode||6:c?+c[1]:a?+a[1]:null,s.gecko=!d&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var u=!d&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!u,s.chrome_version=u&&+u[1],s.ios=!d&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit=!d&&"WebkitAppearance"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var h=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},p=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,n){var o=document.createRange();return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o},m=function(e,t,n,o){return n&&(v(e,t,n,o,-1)||v(e,t,n,o,1))},g=/^(img|br|input|textarea|hr)$/i;function v(e,t,n,o,r){for(;;){if(e==n&&t==o)return!0;if(t==(r<0?0:y(e))){var i=e.parentNode;if(1!=i.nodeType||b(e)||g.test(e.nodeName)||"false"==e.contentEditable)return!1;t=h(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(r<0?-1:0)],t=r<0?y(e):0}}}function y(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function b(e){for(var t,n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var x=function(e){var t=e.isCollapsed;return t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function w(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function k(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function S(e,t){return"number"==typeof e?e:e[t]}function M(e,t,n){for(var o=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=i.defaultView,a=n||e.dom;a;a=p(a))if(1==a.nodeType){var l=a==i.body||1!=a.nodeType,c=l?k(s):a.getBoundingClientRect(),d=0,u=0;if(t.top<c.top+S(o,"top")?u=-(c.top-t.top+S(r,"top")):t.bottom>c.bottom-S(o,"bottom")&&(u=t.bottom-c.bottom+S(r,"bottom")),t.left<c.left+S(o,"left")?d=-(c.left-t.left+S(r,"left")):t.right>c.right-S(o,"right")&&(d=t.right-c.right+S(r,"right")),(d||u)&&(l?s.scrollBy(d,u):(u&&(a.scrollTop+=u),d&&(a.scrollLeft+=d))),l)break}}function C(e,t){for(var n,o,r=2e8,i=0,s=t.top,a=t.top,l=e.firstChild,c=0;l;l=l.nextSibling,c++){var d=void 0;if(1==l.nodeType)d=l.getClientRects();else{if(3!=l.nodeType)continue;d=f(l).getClientRects()}for(var u=0;u<d.length;u++){var h=d[u];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);var p=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(p<r){n=l,r=p,o=p&&3==n.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==l.nodeType&&p&&(i=c+(t.left>=(h.left+h.right)/2?1:0));continue}}!n&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(i=c+1)}}return n&&3==n.nodeType?function(e,t){for(var n=e.nodeValue.length,o=document.createRange(),r=0;r<n;r++){o.setEnd(e,r+1),o.setStart(e,r);var i=A(o,1);if(i.top!=i.bottom&&E(t,i))return{node:e,offset:r+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(n,o):!n||r&&1==n.nodeType?{node:e,offset:i}:C(n,o)}function E(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function T(e,t,n){var o=e.childNodes.length;if(o&&n.top<n.bottom)for(var r=Math.max(0,Math.min(o-1,Math.floor(o*(t.top-n.top)/(n.bottom-n.top))-2)),i=r;;){var s=e.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),l=0;l<a.length;l++){var c=a[l];if(E(t,c))return T(s,t,c)}if((i=(i+1)%o)==r)break}return e}function O(e,t){var n,o,r=e.root;if(r.caretPositionFromPoint){var i,a=r.caretPositionFromPoint(t.left,t.top);if(a)n=(i=a).offsetNode,o=i.offset}if(!n&&r.caretRangeFromPoint){var l,c=r.caretRangeFromPoint(t.left,t.top);if(c)n=(l=c).startContainer,o=l.startOffset}var d,u=r.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var h=e.dom.getBoundingClientRect();if(!E(t,h))return null;if(!(u=T(e.dom,t,h)))return null}if(u=function(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(u,t),n){if(s.gecko&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length))<n.childNodes.length){var p,f=n.childNodes[o];"IMG"==f.nodeName&&(p=f.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&o++}n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?d=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(d=function(e,t,n,o){for(var r=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>o.left||a.top>o.top)r=s.posBefore;else{if(!(a.right<o.left||a.bottom<o.top))break;r=s.posAfter}}i=s.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,n)}(e,n,o,t))}null==d&&(d=function(e,t,n){var o=C(t,n),r=o.node,i=o.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}(e,u,t));var m=e.docView.nearestDesc(u,!0);return{pos:d,inside:m?m.posAtStart-m.border:-1}}function A(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function R(e,t){var n=e.docView.domFromPos(t),o=n.node,r=n.offset;if(3==o.nodeType&&(s.chrome||s.gecko)){var i=A(f(o,r,r),0);if(s.gecko&&r&&/\s/.test(o.nodeValue[r-1])&&r<o.nodeValue.length){var a=A(f(o,r-1,r-1),-1);if(Math.abs(a.left-i.left)<1&&a.top==i.top){var l=A(f(o,r,r+1),-1);return N(l,l.left<a.left)}}return i}if(1==o.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var c,d=!0;if(r<o.childNodes.length){var u=o.childNodes[r];1==u.nodeType&&(c=u.getBoundingClientRect())}if(!c&&r){var h=o.childNodes[r-1];1==h.nodeType&&(c=h.getBoundingClientRect(),d=!1)}return function(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}(c||o.getBoundingClientRect(),d)}for(var p=-1;p<2;p+=2)if(p<0&&r){var m=void 0,g=3==o.nodeType?f(o,r-1,r):3==(m=o.childNodes[r-1]).nodeType?f(m):1==m.nodeType&&"BR"!=m.nodeName?m:null;if(g){var v=A(g,1);if(v.top<v.bottom)return N(v,!1)}}else if(p>0&&r<y(o)){var b=void 0,x=3==o.nodeType?f(o,r,r+1):3==(b=o.childNodes[r]).nodeType?f(b):1==b.nodeType?b:null;if(x){var w=A(x,-1);if(w.top<w.bottom)return N(w,!0)}}return N(A(3==o.nodeType?f(o):o,0),!1)}function N(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function I(e,t,n){var o=e.state,r=e.root.activeElement;o!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return n()}finally{o!=t&&e.updateState(o),r!=e.dom&&r.focus()}}var _=/[\u0590-\u08ac]/;var P=null,j=null,D=!1;function z(e,t,n){return P==t&&j==n?D:(P=t,j=n,D="up"==n||"down"==n?function(e,t,n){var o=t.selection,r="up"==n?o.$anchor.min(o.$head):o.$anchor.max(o.$head);return I(e,t,(function(){for(var t=e.docView.domFromPos(r.pos).node;;){var o=e.docView.nearestDesc(t,!0);if(!o)break;if(o.node.isBlock){t=o.dom;break}t=o.dom.parentNode}for(var i=R(e,r.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==n?c.bottom<i.top+1:c.top>i.bottom-1))return!1}}return!0}))}(e,t,n):function(e,t,n){var o=t.selection.$head;if(!o.parent.isTextblock)return!1;var r=o.parentOffset,i=!r,s=r==o.parent.content.size,a=getSelection();return _.test(o.parent.textContent)&&a.modify?I(e,t,(function(){var t=a.getRangeAt(0),r=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var l=!(o.depth?e.docView.domAfterPos(o.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),l})):"left"==n||"backward"==n?i:s}(e,t,n))}var B=function(e,t,n,o){this.parent=e,this.children=t,this.dom=n,n.pmViewDesc=this,this.contentDOM=o,this.dirty=0},L={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};B.prototype.matchesWidget=function(){return!1},B.prototype.matchesMark=function(){return!1},B.prototype.matchesNode=function(){return!1},B.prototype.matchesHack=function(){return!1},L.beforePosition.get=function(){return!1},B.prototype.parseRule=function(){return null},B.prototype.stopEvent=function(){return!1},L.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},L.border.get=function(){return 0},B.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},B.prototype.posBeforeChild=function(e){for(var t=0,n=this.posAtStart;t<this.children.length;t++){var o=this.children[t];if(o==e)return n;n+=o.size}},L.posBefore.get=function(){return this.parent.posBeforeChild(this)},L.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},L.posAfter.get=function(){return this.posBefore+this.size},L.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},B.prototype.localPosFromDOM=function(e,t,n){var o;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,i;if(e==this.contentDOM)r=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;r=e.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var s,a;if(e==this.contentDOM)s=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){o=!1;break}if(l.parentNode.firstChild!=l)break}if(null==o&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){o=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==o?n>0:o)?this.posAtEnd:this.posAtStart},B.prototype.nearestDesc=function(e,t){for(var n=!0,o=e;o;o=o.parentNode){var r=this.getDesc(o);if(r&&(!t||r.node)){if(!n||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(e):r.nodeDOM==e))return r;n=!1}}},B.prototype.getDesc=function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t},B.prototype.posFromDOM=function(e,t,n){for(var o=e;;o=o.parentNode){var r=this.getDesc(o);if(r)return r.localPosFromDOM(e,t,n)}},B.prototype.descAt=function(e){for(var t=0,n=0;t<this.children.length;t++){var o=this.children[t],r=n+o.size;if(n==e&&r!=n){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<r)return o.descAt(e-n-o.border);n=r}},B.prototype.domFromPos=function(e){var t=this;if(!this.contentDOM)return{node:this.dom,offset:0};for(var n=0,o=0;;o++){if(n==e){for(;o<this.children.length&&(this.children[o].beforePosition||this.children[o].dom.parentNode!=this.contentDOM);)o++;return{node:t.contentDOM,offset:o==t.children.length?t.contentDOM.childNodes.length:h(t.children[o].dom)}}if(o==t.children.length)throw new Error("Invalid position "+e);var r=t.children[o],i=n+r.size;if(e<i)return r.domFromPos(e-n-r.border);n=i}},B.prototype.parseRange=function(e,t,n){var o=this;if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,s=n,a=0;;a++){var l=o.children[a],c=s+l.size;if(-1==r&&e<=c){var d=s+l.border;if(e>=d&&t<=c-l.border&&l.node&&l.contentDOM&&o.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,d);e=s;for(var u=a;u>0;u--){var p=o.children[u-1];if(p.size&&p.dom.parentNode==o.contentDOM&&!p.emptyChildAt(1)){r=h(p.dom)+1;break}e-=p.size}-1==r&&(r=0)}if(r>-1&&t<=c){t=c;for(var f=a+1;f<this.children.length;f++){var m=o.children[f];if(m.size&&m.dom.parentNode==o.contentDOM&&!m.emptyChildAt(-1)){i=h(m.dom);break}t+=m.size}-1==i&&(i=o.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}},B.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},B.prototype.domAfterPos=function(e){var t=this.domFromPos(e),n=t.node,o=t.offset;if(1!=n.nodeType||o==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[o]},B.prototype.setSelection=function(e,t,n,o){for(var r=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(r>a&&i<c)return l.setSelection(e-a-l.border,t-a-l.border,n,o);a=c}var d=this.domFromPos(e),u=this.domFromPos(t),h=n.getSelection(),p=document.createRange();if(o||!m(d.node,d.offset,h.anchorNode,h.anchorOffset)||!m(u.node,u.offset,h.focusNode,h.focusOffset)){if(h.extend)p.setEnd(d.node,d.offset),p.collapse(!1);else{if(e>t){var f=d;d=u,u=f}p.setEnd(u.node,u.offset),p.setStart(d.node,d.offset)}h.removeAllRanges(),h.addRange(p),h.extend&&h.extend(u.node,u.offset)}},B.prototype.ignoreMutation=function(e){return!this.contentDOM},L.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},B.prototype.markDirty=function(e,t){for(var n=this,o=0,r=0;r<this.children.length;r++){var i=n.children[r],s=o+i.size;if(o==s?e<=s&&t>=o:e<s&&t>o){var a=o+i.border,l=s-i.border;if(e>=a&&t<=l)return n.dirty=e==o||t==s?2:1,void(e!=a||t!=l||!i.contentLost&&i.dom.parentNode==n.contentDOM?i.markDirty(e-a,t-a):i.dirty=3);i.dirty=3}o=s}this.dirty=2},B.prototype.markParentsDirty=function(){for(var e=this.parent;e;e=e.parent){e.dirty<2&&(e.dirty=2)}},Object.defineProperties(B.prototype,L);var $=[],F=function(e){function t(t,n,o,r){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(o,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:r}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,$,s,null),this.widget=n,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={beforePosition:{}};return n.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,n),t}(B),V=function(e){function t(t,n,o,r){e.call(this,t,$,n,null),this.textDOM=o,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{}};return n.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,n),t}(B),H=function(e){function t(t,n,o,r){e.call(this,t,[],o,r),this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,n,o,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,o);return a&&a.dom||(a=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,o))),new t(e,n,a.dom,a.contentDOM||a.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,n){if(e.prototype.markDirty.call(this,t,n),0!=this.dirty){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,n,o){var r=t.create(this.parent,this.mark,!0,o),i=this.children,s=this.size;n<s&&(i=se(i,n,s,o)),e>0&&(i=se(i,0,e,o));for(var a=0;a<i.length;a++)i[a].parent=r;return r.children=i,r},t}(B),U=function(e){function t(t,n,o,r,i,s,a,l,c){e.call(this,t,n.isLeaf?$:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=o,this.innerDeco=r,s&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{},border:{}};return t.create=function(e,n,o,i,s,a){var l,c=s.nodeViews[n.type.name],d=c&&c(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),o),u=d&&d.dom,h=d&&d.contentDOM;if(n.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(n.text);else if(!u){var p;u=(p=r.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,h=p.contentDOM}h||n.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable=!1),n.type.spec.draggable&&(u.draggable=!0));var f=u;return u=te(u,o,n),d?l=new K(e,n,o,i,u,h,f,d,s,a+1):n.isText?new q(e,n,o,i,u,f,s):new t(e,n,o,i,u,h,f,s,a+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?r.Fragment.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,n){return 0==this.dirty&&e.eq(this.node)&&ne(t,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var n=this,o=this.node.inlineContent,i=t,s=o&&e.composing&&this.localCompositionNode(e,t),a=new re(this,s&&s.node);!function(e,t,n,o){var r=t.locals(e),i=0;if(0==r.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);o(a,r,t.forChild(i,a),s),i+=a.nodeSize}return}for(var l=0,c=[],d=null,u=0;;){if(l<r.length&&r[l].to==i){for(var h=r[l++],p=void 0;l<r.length&&r[l].to==i;)(p||(p=[h])).push(r[l++]);if(p){p.sort(ie);for(var f=0;f<p.length;f++)n(p[f],u)}else n(h,u)}var m=void 0,g=void 0;if(d)g=-1,m=d,d=null;else{if(!(u<e.childCount))break;g=u,m=e.child(u++)}for(var v=0;v<c.length;v++)c[v].to<=i&&c.splice(v--,1);for(;l<r.length&&r[l].from==i;)c.push(r[l++]);var y=i+m.nodeSize;if(m.isText){var b=y;l<r.length&&r[l].from<b&&(b=r[l].from);for(var x=0;x<c.length;x++)c[x].to<b&&(b=c[x].to);b<y&&(d=m.cut(b-i),m=m.cut(0,b-i),y=b,g=-1)}o(m,c.length?c.slice():$,t.forChild(i,m),g),i=y}}(this.node,this.innerDeco,(function(t,s){t.spec.marks?a.syncToMarks(t.spec.marks,o,e):t.type.side>=0&&a.syncToMarks(s==n.node.childCount?r.Mark.none:n.node.child(s).marks,o,e),a.placeWidget(t,e,i)}),(function(t,n,r,s){a.syncToMarks(t.marks,o,e),a.findNodeMatch(t,n,r,s)||a.updateNextNode(t,n,r,e,s)||a.addNode(t,n,r,e,i),i+=t.nodeSize})),a.syncToMarks($,o,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),this.renderChildren())},t.prototype.renderChildren=function(){G(this.contentDOM,this.children,t.is),s.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom)},t.prototype.localCompositionNode=function(e,t){var n=e.state.selection,r=n.from,i=n.to;if(!(!(e.state.selection instanceof o.TextSelection)||r<t||i>t+this.node.content.size)){var s=e.root.getSelection(),a=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=y(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var l=a.nodeValue,c=function(e,t,n,o){for(var r="",i=0,s=0;i<e.childCount;i++){var a=e.child(i),l=s+a.nodeSize;if(a.isText){if(r+=a.text,l>=o){for(var c=l-r.length,d=r.lastIndexOf(t);d>-1&&c+d>n;)d=r.lastIndexOf(t,d-1);if(d>-1&&c+d+t.length>=o)return c+d;if(l>o)break}}else r="";s=l}return-1}(this.node.content,l,r-t,i-t);return c<0?null:{node:a,pos:c,text:l}}}},t.prototype.protectLocalComposition=function(e,t){var n=t.node,o=t.pos,r=t.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new V(this,i,n,r);e.compositionNodes.push(s),this.children=se(this.children,o,o+r.length,e,s)}},t.prototype.update=function(e,t,n,o){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,o),!0)},t.prototype.updateInner=function(e,t,n,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!ne(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Q(this.dom,this.nodeDOM,Z(this.outerDeco,this.node,t),Z(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(t.prototype,n),t}(B);function W(e,t,n,o,r){return te(o,t,e),new U(null,e,t,n,o,o,o,r,0)}var q=function(e){function t(t,n,o,r,i,s,a){e.call(this,t,n,o,r,i,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},t.prototype.update=function(e,t){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,n,o){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,n,o)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,n,o){var r=this.node.cut(e,n),i=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,i,i,o)},t}(U),J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},t}(B),K=function(e){function t(t,n,o,r,i,s,a,l,c,d){e.call(this,t,n,o,r,i,s,a,c,d),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,n,o,r){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,n);return i&&this.updateInner(t,n,o,r),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,n,o,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,n,o,r){this.spec.setSelection?this.spec.setSelection(t,n,o):e.prototype.setSelection.call(this,t,n,o,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(U);function G(e,t){for(var n=e.firstChild,o=0;o<t.length;o++){var r=t[o],i=r.dom;if(i.parentNode==e){for(;i!=n;)n=oe(n);n=n.nextSibling}else e.insertBefore(i,n);if(r instanceof H){var s=n?n.previousSibling:e.lastChild;G(r.contentDOM,r.children),n=s?s.nextSibling:e.firstChild}}for(;n;)n=oe(n)}function X(e){e&&(this.nodeName=e)}X.prototype=Object.create(null);var Y=[new X];function Z(e,t,n){if(0==e.length)return Y;for(var o=n?Y[0]:new X,r=[o],i=0;i<e.length;i++){var s=e[i].type.attrs,a=o;if(s)for(var l in s.nodeName&&r.push(a=new X(s.nodeName)),s){var c=s[l];null!=c&&(n&&1==r.length&&r.push(a=o=new X(t.isInline?"span":"div")),"class"==l?a.class=(a.class?a.class+" ":"")+c:"style"==l?a.style=(a.style?a.style+";":"")+c:"nodeName"!=l&&(a[l]=c))}}return r}function Q(e,t,n,o){if(n==Y&&o==Y)return t;for(var r=t,i=0;i<o.length;i++){var s=o[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&r!=e&&(l=t.parentNode)&&l.tagName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName)).appendChild(r),r=l}ee(r,a||Y[0],s)}return r}function ee(e,t,n){for(var o in t)"class"==o||"style"==o||"nodeName"==o||o in n||e.removeAttribute(o);for(var r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){for(var i=t.class?t.class.split(" "):$,s=n.class?n.class.split(" "):$,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&e.classList.add(s[l])}if(t.style!=n.style){if(t.style)for(var c,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=d.exec(t.style);)e.style[c[1].toLowerCase()]="";n.style&&(e.style.cssText+=n.style)}}function te(e,t,n){return Q(e,e,Y,Z(t,n,1!=e.nodeType))}function ne(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function oe(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var re=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var n=function(e,t){for(var n=[],o=e.childCount,r=t.length-1;o>0&&r>=0;r--){var i=t[r],s=i.node;if(s){if(s!=e.child(o-1))break;n.push(i),--o}}return{nodes:n.reverse(),offset:o}}(e.node.content,e.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function ie(e,t){return e.type.side-t.type.side}function se(e,t,n,o,r){for(var i=[],s=0,a=0;s<e.length;s++){var l=e[s],c=a,d=a+=l.size;c>=n||d<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,o)),r&&(i.push(r),r=null),d>n&&i.push(l.slice(n-c,l.size,o)))}return i}function ae(e,t){var n=e.selection,r=n.$anchor,i=n.$head,s=t>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?e.doc.resolve(t>0?s.after():s.before()):null:s;return a&&o.Selection.findFrom(a,t)}function le(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ce(e,t,n){var r=e.state.selection;if(r instanceof o.TextSelection){if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=ae(e.state,t);return!!(i&&i instanceof o.NodeSelection)&&le(e,i)}var a,l=r.$head,c=l.textOffset?null:t<0?l.nodeBefore:l.nodeAfter;if(!c||c.isText)return!1;var d=t<0?l.pos-c.nodeSize:l.pos;return!!(c.isAtom||(a=e.docView.descAt(d))&&!a.contentDOM)&&(o.NodeSelection.isSelectable(c)?le(e,new o.NodeSelection(t<0?e.state.doc.resolve(l.pos-c.nodeSize):l)):!!s.webkit&&le(e,new o.TextSelection(e.state.doc.resolve(t<0?d:d+c.nodeSize))))}if(r instanceof o.NodeSelection&&r.node.isInline)return le(e,new o.TextSelection(t>0?r.$to:r.$from));var u=ae(e.state,t);return!!u&&le(e,u)}function de(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function ue(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function he(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){var r,i,a=!1;for(s.gecko&&1==n.nodeType&&o<de(n)&&ue(n.childNodes[o])&&(a=!0);;)if(o>0){if(1!=n.nodeType)break;var l=n.childNodes[o-1];if(ue(l))r=n,i=--o;else{if(3!=l.nodeType)break;o=(n=l).nodeValue.length}}else{if(fe(n))break;for(var c=n.previousSibling;c&&ue(c);)r=n.parentNode,i=h(c),c=c.previousSibling;if(c)o=de(n=c);else{if((n=n.parentNode)==e.dom)break;o=0}}a?me(e,t,n,o):r&&me(e,t,r,i)}}function pe(e){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n){for(var r,i,s=de(n);;)if(o<s){if(1!=n.nodeType)break;if(!ue(n.childNodes[o]))break;r=n,i=++o}else{if(fe(n))break;for(var a=n.nextSibling;a&&ue(a);)r=a.parentNode,i=h(a)+1,a=a.nextSibling;if(a)o=0,s=de(n=a);else{if((n=n.parentNode)==e.dom)break;o=s=0}}r&&me(e,t,r,i)}}function fe(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function me(e,t,n,o){if(x(t)){var r=document.createRange();r.setEnd(n,o),r.setStart(n,o),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(n,o);e.domObserver.setCurSelection()}function ge(e,t,n){var r=e.state.selection;if(r instanceof o.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;var i=r.$from,s=r.$to;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var a=ae(e.state,t);if(a&&a instanceof o.NodeSelection)return le(e,a)}if(!i.parent.inlineContent){var l=o.Selection.findFrom(t<0?i:s,t);return!l||le(e,l)}return!1}function ve(e,t){if(!(e.state.selection instanceof o.TextSelection))return!0;var n=e.state.selection,r=n.$head,i=n.$anchor,s=n.empty;if(!r.sameParent(i))return!0;if(!s)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var a=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var l=e.state.tr;return t<0?l.delete(r.pos-a.nodeSize,r.pos):l.delete(r.pos,r.pos+a.nodeSize),e.dispatch(l),!0}return!1}function ye(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function be(e,t){var n=t.keyCode,o=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==n||s.mac&&72==n&&"c"==o?ve(e,-1)||he(e):46==n||s.mac&&68==n&&"c"==o?ve(e,1)||pe(e):13==n||27==n||(37==n?ce(e,-1,o)||he(e):39==n?ce(e,1,o)||pe(e):38==n?ge(e,-1,o)||he(e):40==n?function(e){if(s.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),n=t.focusNode,o=t.focusOffset;if(n&&1==n.nodeType&&0==o&&n.firstChild&&"false"==n.firstChild.contentEditable){var r=n.firstChild;ye(e,r,!0),setTimeout((function(){return ye(e,r,!1)}),20)}}}(e)||ge(e,1,o)||pe(e):o==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function xe(e,t,n){var r=e.state.selection;if(Se(e,r),e.editable&&!e.hasFocus()){if(!t)return;s.gecko&&s.gecko_version<=55&&(e.domObserver.disconnectSelection(),e.dom.focus(),e.domObserver.connectSelection())}else if(!(e.editable||Ee(e)&&document.activeElement.contains(e.dom)||t))return;if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),n=document.createRange(),o=e.cursorWrapper.dom,r="IMG"==o.nodeName;r?n.setEnd(o.parentNode,h(o)+1):n.setEnd(o,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!r&&!e.state.selection.visible&&s.ie&&s.ie_version<=11&&(o.disabled=!0,o.disabled=!1)}(e);else{var i,a,l=r.anchor,c=r.head;!we||r instanceof o.TextSelection||(r.$from.parent.inlineContent||(i=ke(e,r.from)),r.empty||r.$from.parent.inlineContent||(a=ke(e,r.to))),e.docView.setSelection(l,c,e.root,n),we&&(i&&(i.contentEditable="false"),a&&(a.contentEditable="false")),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):l!=c&&(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var n=e.root.getSelection(),o=n.anchorNode,r=n.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){n.anchorNode==o&&n.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}re.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},re.prototype.destroyBetween=function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}},re.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},re.prototype.syncToMarks=function(e,t,n){for(var o=this,r=0,i=this.stack.length>>1,s=Math.min(i,e.length);r<s&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)o.destroyRest(),o.top.dirty=0,o.index=o.stack.pop(),o.top=o.stack.pop(),i--;for(;i<e.length;){o.stack.push(o.top,o.index+1);for(var a=-1,l=this.index;l<Math.min(this.index+3,this.top.children.length);l++)if(o.top.children[l].matchesMark(e[i])){a=l;break}if(a>-1)a>o.index&&(o.changed=!0,o.destroyBetween(o.index,a)),o.top=o.top.children[o.index];else{var c=H.create(o.top,e[i],t,n);o.top.children.splice(o.index,0,c),o.top=c,o.changed=!0}o.index=0,i++}},re.prototype.findNodeMatch=function(e,t,n,o){var r=-1,i=o<0?void 0:this.getPreMatch(o),s=this.top.children;if(i&&i.matchesNode(e,t,n))r=s.indexOf(i);else for(var a=this.index,l=Math.min(s.length,a+5);a<l;a++){var c=s[a];if(c.matchesNode(e,t,n)&&this.preMatched.indexOf(c)<0){r=a;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)},re.prototype.updateNextNode=function(e,t,n,o,r){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof U){var s=this.preMatched.indexOf(i);if(s>-1&&s+this.preMatchOffset!=r)return!1;var a=i.dom;if(!(this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))&&!(e.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==e.text&&3!=i.dirty&&ne(t,i.outerDeco)))&&i.update(e,t,n,o))return i.dom!=a&&(this.changed=!0),this.index++,!0}return!1},re.prototype.addNode=function(e,t,n,o,r){this.top.children.splice(this.index++,0,U.create(this.top,e,t,n,o,r)),this.changed=!0},re.prototype.placeWidget=function(e,t,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var o=new F(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}},re.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof H;)e=e.children[e.children.length-1];if(!e||!(e instanceof q)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new J(this.top,$,t,null)),this.changed=!0}};var we=s.safari||s.chrome&&s.chrome_version<63;function ke(e,t){var n=e.docView.domFromPos(t),o=n.node,r=n.offset,i=r<o.childNodes.length?o.childNodes[r]:null,s=r?o.childNodes[r-1]:null;if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return i.contentEditable="true",i;if(s)return s.contentEditable="true",s}}function Se(e,t){if(t instanceof o.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Me(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Me(e)}function Me(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Ce(e,t,n,r){return e.someProp("createSelectionBetween",(function(o){return o(e,t,n)}))||o.TextSelection.between(t,n,r)}function Ee(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Te(e,t){return function(n){var o=n.pmViewDesc;if(o)return o.parseRule();if("BR"==n.nodeName&&n.parentNode){if(s.safari&&/^(ul|ol)$/i.test(n.parentNode.nodeName))return e.matchTag(document.createElement("li"),t);if(n.parentNode.lastChild==n||s.safari&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if("IMG"==n.nodeName&&n.getAttribute("mark-placeholder"))return{ignore:!0}}}function Oe(e,t,n,i){if(t<0){var a=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,l=function(e,t){var n,r,i=e.root.getSelection(),s=e.state.doc,a=e.docView.nearestDesc(i.focusNode),l=a&&0==a.size,c=e.docView.posFromDOM(i.focusNode,i.focusOffset),d=s.resolve(c);if(x(i)){for(n=d;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&o.NodeSelection.isSelectable(a.node)&&a.parent){var u=a.posBefore;r=new o.NodeSelection(c==u?d:s.resolve(u))}}else n=s.resolve(e.docView.posFromDOM(i.anchorNode,i.anchorOffset));return r||(r=Ce(e,n,d,"pointer"==t||e.state.selection.head<d.pos&&!l?1:-1)),r}(e,a);if(!e.state.selection.eq(l)){var c=e.state.tr.setSelection(l);"pointer"==a?c.setMeta("pointer",!0):"key"==a&&c.scrollIntoView(),e.dispatch(c)}}else{var d=e.state.doc.resolve(t),u=d.sharedDepth(n);t=d.before(u+1),n=e.state.doc.resolve(n).after(u+1);var h,p,f=e.state.selection,m=function(e,t,n){var o=e.docView.parseRange(t,n),i=o.node,a=o.fromOffset,l=o.toOffset,c=o.from,d=o.to,u=e.root.getSelection(),h=null,p=u.anchorNode;if(p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(h=[{node:p,offset:u.anchorOffset}],x(u)||h.push({node:u.focusNode,offset:u.focusOffset})),s.chrome&&8===e.lastKeyCode)for(var f=l;f>a;f--){var m=i.childNodes[f-1],g=m.pmViewDesc;if("BR"==m.nodeType&&!g){l=f;break}if(!g||g.size)break}var v=e.state.doc,y=e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema),b=v.resolve(c),w=null,k=y.parse(i,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:l,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:Te(y,b),context:b});if(h&&null!=h[0].pos){var S=h[0].pos,M=h[1]&&h[1].pos;null==M&&(M=S),w={anchor:S+c,head:M+c}}return{doc:k,sel:w,from:c,to:d}}(e,t,n),g=e.state.doc,v=g.slice(m.from,m.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(h=e.state.selection.to,p="end"):(h=e.state.selection.from,p="start"),e.lastKeyCode=null;var y=function(e,t,n,o,r){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,l=s.b;if("end"==r){o-=a+Math.max(0,i-Math.min(a,l))-i}if(a<i&&e.size<t.size){l=(i-=o<=i&&o>=a?i-o:0)+(l-a),a=i}else if(l<i){a=(i-=o<=i&&o>=l?i-o:0)+(a-l),l=i}return{start:i,endA:a,endB:l}}(v.content,m.doc.content,m.from,h,p);if(!y){if(!(i&&f instanceof o.TextSelection&&!f.empty&&f.$head.sameParent(f.$anchor))||e.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var b=Ae(e,e.state.doc,m.sel);b&&!b.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(b))}return}y={start:f.from,endA:f.to,endB:f.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&y.start==y.endB&&e.state.selection instanceof o.TextSelection&&(y.start>e.state.selection.from&&y.start<=e.state.selection.from+2?y.start=e.state.selection.from:y.endA<e.state.selection.to&&y.endA>=e.state.selection.to-2&&(y.endB+=e.state.selection.to-y.endA,y.endA=e.state.selection.to)),s.ie&&s.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>m.from&&" "==m.doc.textBetween(y.start-m.from-1,y.start-m.from+1)&&(y.start--,y.endA--,y.endB--);var k,S=m.doc.resolveNoCache(y.start-m.from),M=m.doc.resolveNoCache(y.endB-m.from);if(!(!S.sameParent(M)&&S.pos<m.doc.content.size&&(k=o.Selection.findFrom(m.doc.resolve(S.pos+1),1,!0))&&k.head==M.pos&&e.someProp("handleKeyDown",(function(t){return t(e,w(13,"Enter"))}))))if(e.state.selection.anchor>y.start&&function(e,t,n,o,r){if(!o.parent.isTextblock||n-t<=r.pos-o.pos||Re(o,!0,!1)<r.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(Re(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||Re(s,!0,!1)<n)return!1;return o.parent.content.cut(o.parentOffset).eq(s.parent.content)}(g,y.start,y.endA,S,M)&&e.someProp("handleKeyDown",(function(t){return t(e,w(8,"Backspace"))})))s.android&&s.chrome&&e.domObserver.suppressSelectionUpdates();else{var C,E,T,O,A=y.start,R=y.endA;if(S.sameParent(M)&&S.parent.inlineContent)if(S.pos==M.pos)s.ie&&s.ie_version<=11&&0==S.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return xe(e)}),20)),C=e.state.tr.delete(A,R),E=g.resolve(y.start).marksAcross(g.resolve(y.endA));else if(y.endA==y.endB&&(O=g.resolve(y.start))&&(T=function(e,t){for(var n,o,i,s=e.firstChild.marks,a=t.firstChild.marks,l=s,c=a,d=0;d<a.length;d++)l=a[d].removeFromSet(l);for(var u=0;u<s.length;u++)c=s[u].removeFromSet(c);if(1==l.length&&0==c.length)o=l[0],n="add",i=function(e){return e.mark(o.addToSet(e.marks))};else{if(0!=l.length||1!=c.length)return null;o=c[0],n="remove",i=function(e){return e.mark(o.removeFromSet(e.marks))}}for(var h=[],p=0;p<t.childCount;p++)h.push(i(t.child(p)));if(r.Fragment.from(h).eq(e))return{mark:o,type:n}}(S.parent.content.cut(S.parentOffset,M.parentOffset),O.parent.content.cut(O.parentOffset,y.endA-O.start()))))C=e.state.tr,"add"==T.type?C.addMark(A,R,T.mark):C.removeMark(A,R,T.mark);else if(S.parent.child(S.index()).isText&&S.index()==M.index()-(M.textOffset?0:1)){var N=S.parent.textBetween(S.parentOffset,M.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,A,R,N)})))return;C=e.state.tr.insertText(N,A,R)}if(C||(C=e.state.tr.replace(A,R,m.doc.slice(y.start-m.from,y.endB-m.from))),m.sel){var I=Ae(e,C.doc,m.sel);!I||s.chrome&&s.android&&e.composing&&I.empty&&I.head==A||C.setSelection(I)}E&&C.ensureMarks(E),e.dispatch(C.scrollIntoView())}}}function Ae(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ce(e,t.resolve(n.anchor),t.resolve(n.head))}function Re(e,t,n){for(var o=e.depth,r=t?e.end():e.pos;o>0&&(t||e.indexAfter(o)==e.node(o).childCount);)o--,r++,t=!1;if(n)for(var i=e.node(o).maybeChild(e.indexAfter(o));i&&!i.isLeaf;)i=i.firstChild,r++;return r}function Ne(e,t){for(var n=[],o=t.content,i=t.openStart,s=t.openEnd;i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount;){i--,s--;var a=o.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),o=a.content}var l=e.someProp("clipboardSerializer")||r.DOMSerializer.fromSchema(e.state.schema),c=Le(),d=c.createElement("div");d.appendChild(l.serializeFragment(o,{document:c}));for(var u,h=d.firstChild;h&&1==h.nodeType&&(u=ze[h.nodeName.toLowerCase()]);){for(var p=u.length-1;p>=0;p--){for(var f=c.createElement(u[p]);d.firstChild;)f.appendChild(d.firstChild);d.appendChild(f)}h=d.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:d,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Ie(e,t,n,o,i){var s,a,l=i.parent.type.spec.code;if(!n&&!t)return null;var c=t&&(o||l||!n);if(c){if(e.someProp("transformPastedText",(function(e){t=e(t)})),l)return new r.Slice(r.Fragment.from(e.state.schema.text(t)),0,0);var d=e.someProp("clipboardTextParser",(function(e){return e(t,i)}));d?a=d:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,o=Le().createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(n=r&&ze[r[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join(""),i=n.length);o.innerHTML=e;for(var s=0;s<i;s++)o=o.firstChild;return o}(n);var u=s&&s.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!a){var p=e.someProp("clipboardParser")||e.someProp("domParser")||r.DOMParser.fromSchema(e.state.schema);a=p.parseSlice(s,{preserveWhitespace:!(!c&&!h),context:i})}return a=h?function(e,t){if(!e.size)return e;var n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,l=n.length-2;l>=0;l-=2){var c=o.nodes[n[l]];if(!c||c.hasRequiredAttrs())break;i=r.Fragment.from(c.create(n[l+1],i)),s++,a++}return new r.Slice(i,s,a)}(function(e,t,n){t<e.openStart&&(e=new r.Slice(De(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));n<e.openEnd&&(e=new r.Slice(De(e.content,1,n,e.openEnd,0,0),e.openStart,n));return e}(a,+h[1],+h[2]),h[3]):r.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var o=t.node(n).contentMatchAt(t.index(n)),i=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=o.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&i.length&&Pe(n,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=je(s[s.length-1],i.length));var r=_e(e,n);s.push(r),o=o.matchType(r.type,r.attrs),i=n}}})),s)return{v:r.Fragment.from(s)}},o=t.depth;o>=0;o--){var i=n(o);if(i)return i.v}return e}(a.content,i),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function _e(e,t,n){void 0===n&&(n=0);for(var o=t.length-1;o>=n;o--)e=t[o].create(null,r.Fragment.from(e));return e}function Pe(e,t,n,o,i){if(i<e.length&&i<t.length&&e[i]==t[i]){var s=Pe(e,t,n,o.lastChild,i+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(i==e.length-1?n.type:e[i+1]))return o.copy(o.content.append(r.Fragment.from(_e(n,e,i+1))))}}function je(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,je(e.lastChild,t-1)),o=e.contentMatchAt(e.childCount).fillBefore(r.Fragment.empty,!0);return e.copy(n.append(o))}function De(e,t,n,o,i,s){var a=t<0?e.firstChild:e.lastChild,l=a.content;return i<o-1&&(l=De(l,t,n,o,i+1,s)),i>=n&&(l=t<0?a.contentMatchAt(0).fillBefore(l,e.childCount>1||s<=i).append(l):l.append(a.contentMatchAt(a.childCount).fillBefore(r.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(l))}var ze={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Be=null;function Le(){return Be||(Be=document.implementation.createHTMLDocument("title"))}var $e={childList:!0,characterData:!0,attributes:!0,subtree:!0,characterDataOldValue:!0},Fe=s.ie&&s.ie_version<=11,Ve=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ve.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Ve.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var He=function(e,t){var n=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)n.queue.push(e[t]);s.ie&&s.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Ve,Fe&&(this.onCharData=function(e){n.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};He.prototype.flushSoon=function(){var e=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout((function(){e.flushingSoon=!1,e.flush()}),20))},He.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,$e),Fe&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},He.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)e.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}Fe&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},He.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},He.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},He.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},He.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Ee(e)){var e;if(this.suppressingSelectionUpdates)return xe(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&m(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},He.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},He.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(t);return n&&n.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})},He.prototype.flush=function(){if(this.view.docView&&!this.flushingSoon){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Ee(this.view)&&!this.ignoreSelectionChange(t),o=-1,r=-1,i=!1;if(this.view.editable)for(var s=0;s<e.length;s++){var a=this.registerMutation(e[s]);a&&(o=o<0?a.from:Math.min(a.from,o),r=r<0?a.to:Math.max(a.to,r),a.typeOver&&!this.view.composing&&(i=!0))}(o>-1||n)&&(o>-1&&this.view.docView.markDirty(o,r),this.handleDOMChange(o,r,i),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||xe(this.view))}},He.prototype.registerMutation=function(e){var t=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(t==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!t||t.ignoreMutation(e))return null;if("childList"==e.type){var n=e.previousSibling,o=e.nextSibling;if(s.ie&&s.ie_version<=11&&e.addedNodes.length)for(var r=0;r<e.addedNodes.length;r++){var i=e.addedNodes[r],a=i.previousSibling,l=i.nextSibling;(!a||Array.prototype.indexOf.call(e.addedNodes,a)<0)&&(n=a),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l)}var c=n&&n.parentNode==e.target?h(n)+1:0,d=t.localPosFromDOM(e.target,c,-1),u=o&&o.parentNode==e.target?h(o):e.target.childNodes.length;return{from:d,to:t.localPosFromDOM(e.target,u,1)}}return"attributes"==e.type?{from:t.posAtStart-t.border,to:t.posAtEnd+t.border}:{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Ue={},We={};function qe(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Je(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.eventHandlers[n]||e.dom.addEventListener(n,e.eventHandlers[n]=function(t){return Ke(e,t)})}))}function Ke(e,t){return e.someProp("handleDOMEvents",(function(n){var o=n[t.type];return!!o&&(o(e,t)||t.defaultPrevented)}))}function Ge(e){return{left:e.clientX,top:e.clientY}}function Xe(e,t,n,o,r){if(-1==o)return!1;for(var i=e.state.doc.resolve(o),s=function(o){if(e.someProp(t,(function(t){return o>i.depth?t(e,n,i.nodeAfter,i.before(o),r,!0):t(e,n,i.node(o),i.before(o),r,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function Ye(e,t,n){e.focused||e.focus();var o=e.state.tr.setSelection(t);"pointer"==n&&o.setMeta("pointer",!0),e.dispatch(o)}function Ze(e,t,n,r,i){return Xe(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(i?function(e,t){if(-1==t)return!1;var n,r,i=e.state.selection;i instanceof o.NodeSelection&&(n=i.node);for(var s=e.state.doc.resolve(t),a=s.depth+1;a>0;a--){var l=a>s.depth?s.nodeAfter:s.node(a);if(o.NodeSelection.isSelectable(l)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&(Ye(e,o.NodeSelection.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&o.NodeSelection.isSelectable(r))&&(Ye(e,new o.NodeSelection(n),"pointer"),!0)}(e,n))}function Qe(e,t,n,o){return Xe(e,"handleDoubleClickOn",t,n,o)||e.someProp("handleDoubleClick",(function(n){return n(e,t,o)}))}function et(e,t,n,r){return Xe(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||function(e,t){var n=e.state.doc;if(-1==t)return!!n.inlineContent&&(Ye(e,o.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(t),i=r.depth+1;i>0;i--){var s=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(s.inlineContent)Ye(e,o.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!o.NodeSelection.isSelectable(s))continue;Ye(e,o.NodeSelection.create(n,a),"pointer")}return!0}}(e,n)}function tt(e){return at(e)}We.keydown=function(e,t){e.shiftKey=16==t.keyCode||t.shiftKey,rt(e,t)||(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",(function(n){return n(e,t)}))||be(e,t)?t.preventDefault():qe(e,"key"))},We.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},We.keypress=function(e,t){if(!(rt(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(n){return n(e,t)})))t.preventDefault();else{var n=e.state.selection;if(!(n instanceof o.TextSelection&&n.$from.sameParent(n.$to))){var r=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,n.$from.pos,n.$to.pos,r)}))||e.dispatch(e.state.tr.insertText(r).scrollIntoView()),t.preventDefault()}}};var nt=s.mac?"metaKey":"ctrlKey";Ue.mousedown=function(e,t){e.shiftKey=t.shiftKey;var n=tt(e),o=Date.now(),r="singleClick";o-e.lastClick.time<500&&function(e,t){var n=t.x-e.clientX,o=t.y-e.clientY;return n*n+o*o<100}(t,e.lastClick)&&!t[nt]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:o,x:t.clientX,y:t.clientY,type:r};var i=e.posAtCoords(Ge(t));i&&("singleClick"==r?e.mouseDown=new ot(e,i,t,n):("doubleClick"==r?Qe:et)(e,i.pos,i.inside,t)?t.preventDefault():qe(e,"pointer"))};var ot=function(e,t,n,r){var i,a,l=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=n,this.flushed=r,this.selectNode=n[nt],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),a=t.inside;else{var c=e.state.doc.resolve(t.pos);i=c.parent,a=c.depth?c.before():0}this.mightDrag=null;var d=r?null:n.target,u=d?e.docView.nearestDesc(d,!0):null;this.target=u?u.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||e.state.selection instanceof o.NodeSelection&&a==e.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return l.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),qe(e,"pointer")};function rt(e,t){return!!e.composing||!!(s.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}ot.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},ot.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Ge(e))),this.allowDefault||!t?qe(this.view,"pointer"):Ze(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():!this.flushed&&(!s.chrome||this.view.state.selection instanceof o.TextSelection||t.pos!=this.view.state.selection.from&&t.pos!=this.view.state.selection.to)?qe(this.view,"pointer"):(Ye(this.view,o.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault())}},ot.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),qe(this.view,"pointer")},Ue.touchdown=function(e){tt(e),qe(e,"pointer")},Ue.contextmenu=function(e){return tt(e)};var it=s.android?5e3:-1;function st(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return at(e)}),t))}function at(e,t){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();return!(!t&&!e.docView.dirty)&&(e.updateState(e.state),!0)}We.compositionstart=We.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),at(e,!0),e.markCursor=null;else if(at(e),s.gecko&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var o=e.root.getSelection(),r=o.focusNode,i=o.focusOffset;r&&1==r.nodeType&&0!=i;){var a=i<0?r.lastChild:r.childNodes[i-1];if(3==a.nodeType){o.collapse(a,a.nodeValue.length);break}r=a,i=-1}e.composing=!0}st(e,it)},We.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,st(e,20))};var lt=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function ct(e,t,n,o){var i=Ie(e,t,n,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,o,i||r.Slice.empty)}))||!i)return!0;var s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(i),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ue.copy=We.cut=function(e,t){var n=e.state.selection,o="cut"==t.type;if(!n.empty){var r=lt?null:t.clipboardData,i=Ne(e,n.content()),s=i.dom,a=i.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):function(e,t){var n=e.dom.ownerDocument,o=n.body.appendChild(n.createElement("div"));o.appendChild(t),o.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=n.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.body.removeChild(o),e.focus()}),50)}(e,s),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},We.paste=function(e,t){var n=lt?null:t.clipboardData;n&&(ct(e,n.getData("text/plain"),n.getData("text/html"),t)||n.files.length>0)?t.preventDefault():function(e,t){var n=e.dom.ownerDocument,o=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=n.body.appendChild(n.createElement(o?"textarea":"div"));o||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){e.focus(),n.body.removeChild(r),o?ct(e,r.value,null,t):ct(e,r.textContent,r.innerHTML,t)}),50)}(e,t)};var dt=function(e,t){this.slice=e,this.move=t},ut=s.mac?"altKey":"ctrlKey";for(var ht in Ue.dragstart=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r=e.state.selection,i=r.empty?null:e.posAtCoords(Ge(t));if(i&&i.pos>=r.from&&i.pos<=(r instanceof o.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var s=e.docView.nearestDesc(t.target,!0);if(!s||!s.node.type.spec.draggable||s==e.docView)return;e.dispatch(e.state.tr.setSelection(o.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),l=Ne(e,a),c=l.dom,d=l.text;t.dataTransfer.clearData(),t.dataTransfer.setData(lt?"Text":"text/html",c.innerHTML),lt||t.dataTransfer.setData("text/plain",d),e.dragging=new dt(a,!t[ut])}},Ue.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)},We.dragover=We.dragenter=function(e,t){return t.preventDefault()},We.drop=function(e,t){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(Ge(t));if(r){var s=e.state.doc.resolve(r.pos);if(s){var a=n&&n.slice||Ie(e,t.dataTransfer.getData(lt?"Text":"text/plain"),lt?null:t.dataTransfer.getData("text/html"),!1,s);if(a&&(t.preventDefault(),!e.someProp("handleDrop",(function(o){return o(e,t,a,n&&n.move)})))){var l=a?i.dropPoint(e.state.doc,s.pos,a):s.pos;null==l&&(l=s.pos);var c=e.state.tr;n&&n.move&&c.deleteSelection();var d=c.mapping.map(l),u=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,h=c.doc;if(u?c.replaceRangeWith(d,d,a.content.firstChild):c.replaceRange(d,d,a),!c.doc.eq(h)){var p=c.doc.resolve(d);u&&o.NodeSelection.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild)?c.setSelection(new o.NodeSelection(p)):c.setSelection(Ce(e,p,c.doc.resolve(c.mapping.map(l)))),e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}}},Ue.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0)},Ue.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.focused=!1)},Ue.beforeinput=function(e,t){if(s.chrome&&s.android&&"deleteContentBackward"==t.inputType){var n=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==n&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,w(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},We)Ue[ht]=We[ht];function pt(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var o in t)if(!(o in e))return!1;return!0}var ft=function(e,t){this.spec=t||xt,this.side=this.spec.side||0,this.toDOM=e};ft.prototype.map=function(e,t,n,o){var r=e.mapResult(t.from+o,this.side<0?-1:1),i=r.pos;return r.deleted?null:new vt(i-n,i-n,this)},ft.prototype.valid=function(){return!0},ft.prototype.eq=function(e){return this==e||e instanceof ft&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&pt(this.spec,e.spec))};var mt=function(e,t){this.spec=t||xt,this.attrs=e};mt.prototype.map=function(e,t,n,o){var r=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-n;return r>=i?null:new vt(r,i,this)},mt.prototype.valid=function(e,t){return t.from<t.to},mt.prototype.eq=function(e){return this==e||e instanceof mt&&pt(this.attrs,e.attrs)&&pt(this.spec,e.spec)},mt.is=function(e){return e.type instanceof mt};var gt=function(e,t){this.spec=t||xt,this.attrs=e};gt.prototype.map=function(e,t,n,o){var r=e.mapResult(t.from+o,1);if(r.deleted)return null;var i=e.mapResult(t.to+o,-1);return i.deleted||i.pos<=r.pos?null:new vt(r.pos-n,i.pos-n,this)},gt.prototype.valid=function(e,t){var n=e.content.findIndex(t.from),o=n.index,r=n.offset;return r==t.from&&r+e.child(o).nodeSize==t.to},gt.prototype.eq=function(e){return this==e||e instanceof gt&&pt(this.attrs,e.attrs)&&pt(this.spec,e.spec)};var vt=function(e,t,n){this.from=e,this.to=t,this.type=n},yt={spec:{}};vt.prototype.copy=function(e,t){return new vt(e,t,this.type)},vt.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},vt.prototype.map=function(e,t,n){return this.type.map(e,this,t,n)},vt.widget=function(e,t,n){return new vt(e,e,new ft(t,n))},vt.inline=function(e,t,n,o){return new vt(e,t,new mt(n,o))},vt.node=function(e,t,n,o){return new vt(e,t,new gt(n,o))},yt.spec.get=function(){return this.type.spec},Object.defineProperties(vt.prototype,yt);var bt=[],xt={},wt=function(e,t){this.local=e&&e.length?e:bt,this.children=t&&t.length?t:bt};wt.create=function(e,t){return t.length?Tt(t,e,0,xt):kt},wt.prototype.find=function(e,t,n){var o=[];return this.findInner(null==e?0:e,null==t?1e9:t,o,0,n),o},wt.prototype.findInner=function(e,t,n,o,r){for(var i=this,s=0;s<this.local.length;s++){var a=i.local[s];a.from<=t&&a.to>=e&&(!r||r(a.spec))&&n.push(a.copy(a.from+o,a.to+o))}for(var l=0;l<this.children.length;l+=3)if(i.children[l]<t&&i.children[l+1]>e){var c=i.children[l]+1;i.children[l+2].findInner(e-c,t-c,n,o+c,r)}},wt.prototype.map=function(e,t,n){return this==kt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||xt)},wt.prototype.mapInner=function(e,t,n,o,r){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,n,o);a&&a.type.valid(t,a)?(i||(i=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,o,r,i,s){for(var a=e.slice(),l=function(e,t,n,o){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||e>l+i||(t>=a[s]+i?a[s+1]=-1:(c=o-n-(t-e)+(i-r))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<n.maps.length;c++)n.maps[c].forEach(l);for(var d=!1,u=0;u<a.length;u+=3)if(-1==a[u+1]){var h=n.map(a[u]+i),p=h-r;if(p<0||p>=o.content.size){d=!0;continue}var f=n.map(e[u+1]+i,-1)-r,m=o.content.findIndex(p),g=m.index,v=m.offset,y=o.maybeChild(g);if(y&&v==p&&v+y.nodeSize==f){var b=a[u+2].mapInner(n,y,h+1,a[u]+i+1,s);b!=kt?(a[u]=p,a[u+1]=f,a[u+2]=b):(a[u+1]=-2,d=!0)}else d=!0}if(d){var x=Tt(function(e,t,n,o,r,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(o,r,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}(a,e,t||[],n,r,i,s),o,0,s);t=x.local;for(var w=0;w<a.length;w+=3)a[w+1]<0&&(a.splice(w,3),w-=3);for(var k=0,S=0;k<x.children.length;k+=3){for(var M=x.children[k];S<a.length&&a[S]<M;)S+=3;a.splice(S,0,x.children[k],x.children[k+1],x.children[k+2])}}return new wt(t&&t.sort(Ot),a)}(this.children,i,e,t,n,o,r):i?new wt(i.sort(Ot)):kt},wt.prototype.add=function(e,t){return t.length?this==kt?wt.create(e,t):this.addInner(e,t,0):this},wt.prototype.addInner=function(e,t,n){var o,r=this,i=0;e.forEach((function(e,s){var a,l=s+n;if(a=Ct(t,e,l)){for(o||(o=r.children.slice());i<o.length&&o[i]<s;)i+=3;o[i]==s?o[i+2]=o[i+2].addInner(e,a,l+1):o.splice(i,0,s,s+e.nodeSize,Tt(a,e,l+1,xt)),i+=3}}));var s=Mt(i?Et(t):t,-n);return new wt(s.length?this.local.concat(s).sort(Ot):this.local,o||this.children)},wt.prototype.remove=function(e){return 0==e.length||this==kt?this:this.removeInner(e,0)},wt.prototype.removeInner=function(e,t){for(var n=this,o=this.children,r=this.local,i=0;i<o.length;i+=3){for(var s=void 0,a=o[i]+t,l=o[i+1]+t,c=0,d=void 0;c<e.length;c++)(d=e[c])&&d.from>a&&d.to<l&&(e[c]=null,(s||(s=[])).push(d));if(s){o==n.children&&(o=n.children.slice());var u=o[i+2].removeInner(s,a+1);u!=kt?o[i+2]=u:(o.splice(i,3),i-=3)}}if(r.length)for(var h=0,p=void 0;h<e.length;h++)if(p=e[h])for(var f=0;f<r.length;f++)r[f].type.eq(p.type)&&(r==n.local&&(r=n.local.slice()),r.splice(f--,1));return o==this.children&&r==this.local?this:r.length||o.length?new wt(r,o):kt},wt.prototype.forChild=function(e,t){var n,o,r=this;if(this==kt)return this;if(t.isLeaf)return wt.empty;for(var i=0;i<this.children.length;i+=3)if(r.children[i]>=e){r.children[i]==e&&(n=r.children[i+2]);break}for(var s=e+1,a=s+t.content.size,l=0;l<this.local.length;l++){var c=r.local[l];if(c.from<a&&c.to>s&&c.type instanceof mt){var d=Math.max(s,c.from)-s,u=Math.min(a,c.to)-s;d<u&&(o||(o=[])).push(c.copy(d,u))}}if(o){var h=new wt(o.sort(Ot));return n?new St([h,n]):h}return n||kt},wt.prototype.eq=function(e){var t=this;if(this==e)return!0;if(!(e instanceof wt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!t.local[n].eq(e.local[n]))return!1;for(var o=0;o<this.children.length;o+=3)if(t.children[o]!=e.children[o]||t.children[o+1]!=e.children[o+1]||!t.children[o+2].eq(e.children[o+2]))return!1;return!0},wt.prototype.locals=function(e){return At(this.localsInner(e))},wt.prototype.localsInner=function(e){if(this==kt)return bt;if(e.inlineContent||!this.local.some(mt.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof mt||t.push(this.local[n]);return t};var kt=new wt;wt.empty=kt,wt.removeOverlap=At;var St=function(e){this.members=e};function Mt(e,t){if(!t||!e.length)return e;for(var n=[],o=0;o<e.length;o++){var r=e[o];n.push(new vt(r.from+t,r.to+t,r.type))}return n}function Ct(e,t,n){if(t.isLeaf)return null;for(var o=n+t.nodeSize,r=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>n&&s.to<o&&((r||(r=[])).push(s),e[i]=null);return r}function Et(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Tt(e,t,n,o){var r=[],i=!1;t.forEach((function(t,s){var a=Ct(e,t,s+n);if(a){i=!0;var l=Tt(a,t,n+s+1,o);l!=kt&&r.push(s,s+t.nodeSize,l)}}));for(var s=Mt(i?Et(e):e,-n).sort(Ot),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(o.onRemove&&o.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new wt(s,r):kt}function Ot(e,t){return e.from-t.from||e.to-t.to}function At(e){for(var t=e,n=0;n<t.length-1;n++){var o=t[n];if(o.from!=o.to)for(var r=n+1;r<t.length;r++){var i=t[r];if(i.from!=o.from){i.from<o.to&&(t==e&&(t=e.slice()),t[n]=o.copy(o.from,i.from),Rt(t,r,o.copy(i.from,o.to)));break}i.to!=o.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,o.to),Rt(t,r+1,i.copy(o.to,i.to)))}}return t}function Rt(e,t,n){for(;t<e.length&&Ot(n,e[t])>0;)t++;e.splice(t,0,n)}function Nt(e){var t=[];return e.someProp("decorations",(function(n){var o=n(e.state);o&&o!=kt&&t.push(o)})),e.cursorWrapper&&t.push(wt.create(e.state.doc,[e.cursorWrapper.deco])),St.from(t)}St.prototype.forChild=function(e,t){if(t.isLeaf)return wt.empty;for(var n=[],o=0;o<this.members.length;o++){var r=this.members[o].forChild(e,t);r!=kt&&(r instanceof St?n=n.concat(r.members):n.push(r))}return St.from(n)},St.prototype.eq=function(e){if(!(e instanceof St)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},St.prototype.locals=function(e){for(var t,n=!0,o=0;o<this.members.length;o++){var r=this.members[o].localsInner(e);if(r.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<r.length;i++)t.push(r[i])}else t=r}return t?At(n?t:t.sort(Ot)):bt},St.from=function(e){switch(e.length){case 0:return kt;case 1:return e[0];default:return new St(e)}};var It=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Dt(this),this.markCursor=null,this.cursorWrapper=null,jt(this),this.nodeViews=Bt(this),this.docView=W(this.state.doc,Pt(this),Nt(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new He(e,(function(t,n,o){return Oe(e,t,n,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var n=Ue[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||Ke(e,t)||!e.editable&&t.type in We||n(e,t)})};for(var n in Ue)t(n);s.safari&&e.dom.addEventListener("input",(function(){return null})),Je(e)}(this),this.pluginViews=[],this.updatePluginViews()},_t={props:{},root:{}};function Pt(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var o in n)"class"==o?t.class+=" "+n[o]:t[o]||"contenteditable"==o||"nodeName"==o||(t[o]=String(n[o]))})),[vt.node(0,e.state.doc.content.size,t)]}function jt(e){var t=e.state.selection,n=t.$head,o=t.$anchor,r=t.visible;if(e.markCursor){var i=document.createElement("img");i.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:i,deco:vt.widget(n.pos,i,{raw:!0,marks:e.markCursor})}}else if(r||n.pos!=o.pos)e.cursorWrapper=null;else{var s;!e.cursorWrapper||e.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):e.cursorWrapper.deco.pos!=n.pos&&(s=e.cursorWrapper.dom),s&&(e.cursorWrapper={dom:s,deco:vt.widget(n.pos,s,{raw:!0})})}}function Dt(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function zt(e){var t=e.getSelection(),n=t.focusOffset,o=t.focusNode;return o&&3!=o.nodeType?[o,n,1==o.nodeType?o.childNodes[n-1]:null,1==o.nodeType?o.childNodes[n]:null]:null}function Bt(e){var t={};return e.someProp("nodeViews",(function(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])})),t}_t.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},It.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Je(this),this._props=e,this.updateStateInner(e.state,!0)},It.prototype.setProps=function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var o in t.state=this.state,e)t[o]=e[o];this.update(t)},It.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},It.prototype.updateStateInner=function(e,t){var n=this,r=this.state,i=!1;if(this.state=e,t){var a=Bt(this);(function(e,t){var n=0,o=0;for(var r in e){if(e[r]!=t[r])return!0;n++}for(var i in t)o++;return n!=o})(a,this.nodeViews)&&(this.nodeViews=a,i=!0),Je(this)}this.editable=Dt(this),jt(this);var l,c,d,u=Nt(this),h=Pt(this),f=t?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",g=i||!this.docView.matchesNode(e.doc,h,u),v=g||!e.selection.eq(r.selection),y="preserve"==f&&v&&null==this.dom.style.overflowAnchor&&function(e){for(var t,n,o=e.dom.getBoundingClientRect(),r=Math.max(0,o.top),i=e.dom.ownerDocument,s=(o.left+o.right)/2,a=r+1;a<Math.min(innerHeight,o.bottom);a+=5){var l=e.root.elementFromPoint(s,a);if(l!=e.dom&&e.dom.contains(l)){var c=l.getBoundingClientRect();if(c.top>=r-20){t=l,n=c.top;break}}}for(var d=[],u=e.dom;u&&(d.push({dom:u,top:u.scrollTop,left:u.scrollLeft}),u!=i.body);u=p(u));return{refDOM:t,refTop:n,stack:d}}(this);if(v){this.domObserver.stop();var b=!1;if(g){var x=s.chrome&&zt(this.root);!i&&this.docView.update(e.doc,h,u,this)||(this.docView.destroy(),this.docView=W(e.doc,h,u,this.dom,this)),x&&(b=!this.composing&&function(e,t){var n=zt(t);if(!n||3==n[0].nodeType)return!1;for(var o=0;o<e.length;o++)if(n[o]!=e[o])return!0;return!1}(x,this.root)),s.ie&&s.ie_version<=11&&!r.selection.empty&&e.selection.empty&&e.doc.content.size<r.doc.content.size&&(b=!0)}b||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(l=this,c=l.docView.domFromPos(l.state.selection.anchor),d=l.root.getSelection(),m(c.node,c.offset,d.anchorNode,d.anchorOffset)))?xe(this,!1,b):(Se(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==f)this.dom.scrollTop=0;else if("to selection"==f){var w=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(n)}))||(e.selection instanceof o.NodeSelection?M(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),w):M(this,this.coordsAtPos(e.selection.head),w))}else y&&function(e){for(var t=e.refDOM,n=e.refTop,o=e.stack,r=t?t.getBoundingClientRect().top:0,i=0==r?0:r-n,s=0;s<o.length;s++){var a=o[s],l=a.dom,c=a.top,d=a.left;l.scrollTop!=c+i&&(l.scrollTop=c+i),l.scrollLeft!=d&&(l.scrollLeft=d)}}(y)},It.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},It.prototype.updatePluginViews=function(e){var t=this;if(e&&e.plugins==this.state.plugins)for(var n=0;n<this.pluginViews.length;n++){var o=t.pluginViews[n];o.update&&o.update(t,e)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=t.state.plugins[r];i.spec.view&&t.pluginViews.push(i.spec.view(t))}}},It.prototype.someProp=function(e,t){var n,o=this._props&&this._props[e];if(null!=o&&(n=t?t(o):o))return n;var r=this.state.plugins;if(r)for(var i=0;i<r.length;i++){var s=r[i].props[e];if(null!=s&&(n=t?t(s):s))return n}},It.prototype.hasFocus=function(){return this.root.activeElement==this.dom},It.prototype.focus=function(){this.domObserver.stop(),xe(this,!0),this.editable&&(this.dom.setActive?this.dom.setActive():this.dom.focus({preventScroll:!0})),this.domObserver.start()},_t.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},It.prototype.posAtCoords=function(e){return O(this,e)},It.prototype.coordsAtPos=function(e){return R(this,e)},It.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},It.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},It.prototype.posAtDOM=function(e,t,n){void 0===n&&(n=-1);var o=this.docView.posFromDOM(e,t,n);if(null==o)throw new RangeError("DOM position not inside the editor");return o},It.prototype.endOfTextblock=function(e,t){return z(this,t||this.state,e)},It.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Nt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},It.prototype.dispatchEvent=function(e){return function(e,t){Ke(e,t)||!Ue[t.type]||!e.editable&&t.type in We||Ue[t.type](e,t)}(this,e)},It.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(It.prototype,_t),t.EditorView=It,t.Decoration=vt,t.DecorationSet=wt,t.__serializeForClipboard=Ne,t.__parseFromClipboard=Ie,t.__endComposition=at},"./node_modules/rope-sequence/dist/index.js":e=>{"use strict";var t=200,n=function(){};n.prototype.append=function(e){return e.length?(e=n.from(e),!this.length&&e||e.length<t&&this.leafAppend(e)||this.length<t&&e.leafPrepend(this)||this.appendInner(e)):this},n.prototype.prepend=function(e){return e.length?n.from(e).append(this):this},n.prototype.appendInner=function(e){return new r(this,e)},n.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?n.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},n.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},n.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},n.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var o=[];return this.forEach((function(t,n){return o.push(e(t,n))}),t,n),o},n.from=function(e){return e instanceof n?e:e&&e.length?new o(e):n.empty};var o=function(e){function n(t){e.call(this),this.values=t}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var o={length:{configurable:!0},depth:{configurable:!0}};return n.prototype.flatten=function(){return this.values},n.prototype.sliceInner=function(e,t){return 0==e&&t==this.length?this:new n(this.values.slice(e,t))},n.prototype.getInner=function(e){return this.values[e]},n.prototype.forEachInner=function(e,t,n,o){for(var r=t;r<n;r++)if(!1===e(this.values[r],o+r))return!1},n.prototype.forEachInvertedInner=function(e,t,n,o){for(var r=t-1;r>=n;r--)if(!1===e(this.values[r],o+r))return!1},n.prototype.leafAppend=function(e){if(this.length+e.length<=t)return new n(this.values.concat(e.flatten()))},n.prototype.leafPrepend=function(e){if(this.length+e.length<=t)return new n(e.flatten().concat(this.values))},o.length.get=function(){return this.values.length},o.depth.get=function(){return 0},Object.defineProperties(n.prototype,o),n}(n);n.empty=new o([]);var r=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,o){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(n,r),o))&&(!(n>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,n)-r,o+r))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,o){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(n,r)-r,o+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),n,o))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(n),i=n;e.exports=i},"./node_modules/tiptap-commands/dist/commands.esm.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{autoJoin:()=>o.autoJoin,baseKeymap:()=>o.baseKeymap,chainCommands:()=>o.chainCommands,createParagraphNear:()=>o.createParagraphNear,deleteSelection:()=>o.deleteSelection,exitCode:()=>o.exitCode,joinBackward:()=>o.joinBackward,joinDown:()=>o.joinDown,joinForward:()=>o.joinForward,joinUp:()=>o.joinUp,lift:()=>o.lift,liftEmptyBlock:()=>o.liftEmptyBlock,macBaseKeymap:()=>o.macBaseKeymap,newlineInCode:()=>o.newlineInCode,pcBaseKeymap:()=>o.pcBaseKeymap,selectAll:()=>o.selectAll,selectNodeBackward:()=>o.selectNodeBackward,selectNodeForward:()=>o.selectNodeForward,selectParentNode:()=>o.selectParentNode,setBlockType:()=>o.setBlockType,splitBlock:()=>o.splitBlock,splitBlockKeepMarks:()=>o.splitBlockKeepMarks,toggleMark:()=>o.toggleMark,wrapIn:()=>o.wrapIn,addListNodes:()=>r.addListNodes,liftListItem:()=>r.liftListItem,sinkListItem:()=>r.sinkListItem,splitListItem:()=>r.splitListItem,wrapInList:()=>r.wrapInList,textblockTypeInputRule:()=>i.textblockTypeInputRule,wrappingInputRule:()=>i.wrappingInputRule,insertText:()=>c,markInputRule:()=>d,markPasteRule:()=>p,nodeInputRule:()=>u,pasteRule:()=>h,removeMark:()=>f,replaceText:()=>m,setInlineBlockType:()=>g,splitToDefaultListItem:()=>v,toggleBlockType:()=>y,toggleList:()=>x,toggleWrap:()=>w,updateMark:()=>k});var o=n("./node_modules/prosemirror-commands/dist/commands.js"),r=n("./node_modules/prosemirror-schema-list/dist/schema-list.js"),i=n("./node_modules/prosemirror-inputrules/dist/index.js"),s=n("./node_modules/prosemirror-state/dist/index.js"),a=n("./node_modules/prosemirror-model/dist/index.js"),l=n("./node_modules/tiptap-utils/dist/utils.esm.js");
/*!
    * tiptap-commands v1.17.0
    * (c) 2021 berdosis GbR (limited liability)
    * @license MIT
    */
function c(e=""){return(t,n)=>{const{$from:o}=t.selection,{pos:r}=o.pos;return n(t.tr.insertText(e,r)),!0}}function d(e,t,n){return new i.InputRule(e,((e,o,r,i)=>{const s=n instanceof Function?n(o):n,{tr:a}=e,l=o.length-1;let c=i,d=r;if(o[l]){const n=r+o[0].indexOf(o[l-1]),s=n+o[l-1].length-1,u=n+o[l-1].lastIndexOf(o[l]),h=u+o[l].length;if(function(e,t,n){let o=[];return n.doc.nodesBetween(e,t,((e,t)=>{o=[...o,...e.marks.map((n=>({start:t,end:t+e.nodeSize,mark:n})))]})),o}(r,i,e).filter((e=>{const{excluded:n}=e.mark.type;return n.find((e=>e.name===t.name))})).filter((e=>e.end>n)).length)return!1;h<s&&a.delete(h,s),u>n&&a.delete(n,u),d=n,c=d+o[l].length}return a.addMark(d,c,t.create(s)),a.removeStoredMark(t),a}))}function u(e,t,n){return new i.InputRule(e,((e,o,r,i)=>{const s=n instanceof Function?n(o):n,{tr:a}=e;return o[0]&&a.replaceWith(r-1,i,t.create(s)),a}))}function h(e,t,n){const o=r=>{const i=[];return r.forEach((r=>{if(r.isText){const{text:o}=r;let s,a=0;do{if(s=e.exec(o),s){const e=s.index,o=e+s[0].length,l=n instanceof Function?n(s[0]):n;e>0&&i.push(r.cut(a,e)),i.push(r.cut(e,o).mark(t.create(l).addToSet(r.marks))),a=o}}while(s);a<o.length&&i.push(r.cut(a))}else i.push(r.copy(o(r.content)))})),a.Fragment.fromArray(i)};return new s.Plugin({props:{transformPasted:e=>new a.Slice(o(e.content),e.openStart,e.openEnd)}})}function p(e,t,n){const o=(r,i)=>{const s=[];return r.forEach((r=>{if(r.isText){const{text:o,marks:a}=r;let l,c=0;const d=!!a.filter((e=>"link"===e.type.name))[0];for(;!d&&null!==(l=e.exec(o));)if(i&&i.type.allowsMarkType(t)&&l[1]){const e=l.index,o=e+l[0].length,i=e+l[0].indexOf(l[1]),a=i+l[1].length,d=n instanceof Function?n(l):n;e>0&&s.push(r.cut(c,e)),s.push(r.cut(i,a).mark(t.create(d).addToSet(r.marks))),c=o}c<o.length&&s.push(r.cut(c))}else s.push(r.copy(o(r.content,r)))})),a.Fragment.fromArray(s)};return new s.Plugin({props:{transformPasted:e=>new a.Slice(o(e.content),e.openStart,e.openEnd)}})}function f(e){return(t,n)=>{const{tr:o,selection:r}=t;let{from:i,to:s}=r;const{$from:a,empty:c}=r;if(c){const t=(0,l.getMarkRange)(a,e);i=t.from,s=t.to}return o.removeMark(i,s,e),n(o)}}function m(e=null,t,n={},o=a.Fragment.empty){return(r,i)=>{const{$from:s,$to:a}=r.selection,l=s.index(),c=e?e.from:s.pos,d=e?e.to:a.pos;return!!s.parent.canReplaceWith(l,l,t)&&(i&&i(r.tr.replaceWith(c,d,t.create(n,o))),!0)}}function g(e,t={}){return(n,o)=>{const{$from:r}=n.selection,i=r.index();return!!r.parent.canReplaceWith(i,i,e)&&(o&&o(n.tr.replaceSelectionWith(e.create(t))),!0)}}function v(e){return function(t,n){const{$from:o,$to:r,node:i}=t.selection;if(i&&i.isBlock||o.depth<2||!o.sameParent(r))return!1;const s=o.node(-1);if(s.type!=e)return!1;if(0==o.parent.content.size){if(2==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){let r=a.Fragment.empty;const i=o.index(-1)>0;for(let e=o.depth-(i?1:2);e>=o.depth-3;e--)r=a.Fragment.from(o.node(e).copy(r));r=r.append(a.Fragment.from(e.createAndFill()));const s=t.tr.replace(o.before(i?null:-1),o.after(-3),new a.Slice(r,i?3:2,2));s.setSelection(t.selection.constructor.near(s.doc.resolve(o.pos+(i?3:2)))),n(s.scrollIntoView())}return!0}const l=r.pos==o.end()?s.contentMatchAt(o.indexAfter(-1)).defaultType:null,c=t.tr.delete(o.pos,r.pos);let d=l&&[{type:e},{type:l}];return d||(d=[{type:e},null]),!!function(e,t,n=1,o){const r=e.resolve(t),i=r.depth-n,s=o&&o[o.length-1]||r.parent;if(i<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let e=r.depth-1,t=n-2;e>i;e--,t--){const n=r.node(e),i=r.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(i,n.childCount);const a=o&&o[t]||n;if(a!=n&&(s=s.replaceChild(0,a.type.create(a.attrs))),!n.canReplace(i+1,n.childCount))return!1}const a=r.indexAfter(i),l=o&&o[0];return r.node(i).canReplaceWith(a,a,l?l.type:r.node(i+1).type)}(c.doc,o.pos,2,d)&&(n&&n(c.split(o.pos,2,d).scrollIntoView()),!0)}}function y(e,t,n={}){return(r,i,s)=>(0,l.nodeIsActive)(r,e,n)?(0,o.setBlockType)(t)(r,i,s):(0,o.setBlockType)(e,n)(r,i,s)}function b(e,t){return e.type===t.nodes.bullet_list||e.type===t.nodes.ordered_list||e.type===t.nodes.todo_list}function x(e,t){return(n,o,i)=>{const{schema:s,selection:a}=n,{$from:c,$to:d}=a,u=c.blockRange(d);if(!u)return!1;const h=(0,l.findParentNode)((e=>b(e,s)))(a);if(u.depth>=1&&h&&u.depth-h.depth<=1){if(h.node.type===e)return(0,r.liftListItem)(t)(n,o,i);if(b(h.node,s)&&e.validContent(h.node.content)){const{tr:t}=n;return t.setNodeMarkup(h.pos,e),o&&o(t),!1}}return(0,r.wrapInList)(e)(n,o,i)}}function w(e,t={}){return(n,r,i)=>(0,l.nodeIsActive)(n,e,t)?(0,o.lift)(n,r):(0,o.wrapIn)(e,t)(n,r,i)}function k(e,t){return(n,o)=>{const{tr:r,selection:i,doc:s}=n,{ranges:a,empty:c}=i;if(c){const{from:n,to:o}=(0,l.getMarkRange)(i.$from,e);s.rangeHasMark(n,o,e)&&r.removeMark(n,o,e),r.addMark(n,o,e.create(t))}else a.forEach((n=>{const{$to:o,$from:i}=n;s.rangeHasMark(i.pos,o.pos,e)&&r.removeMark(i.pos,o.pos,e),r.addMark(i.pos,o.pos,e.create(t))}));return o(r)}}},"./node_modules/tiptap-extensions/dist/extensions.esm.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Blockquote:()=>E,Bold:()=>K,BulletList:()=>T,Code:()=>G,CodeBlock:()=>O,CodeBlockHighlight:()=>N,Collaboration:()=>ee,Focus:()=>te,HardBreak:()=>I,Heading:()=>_,Highlight:()=>R,History:()=>ne,HorizontalRule:()=>P,Image:()=>D,Italic:()=>X,Link:()=>Y,ListItem:()=>z,Mention:()=>L,OrderedList:()=>$,Placeholder:()=>oe,Search:()=>re,Strike:()=>Z,Suggestions:()=>B,Table:()=>V,TableCell:()=>U,TableHeader:()=>H,TableRow:()=>W,TodoItem:()=>q,TodoList:()=>J,TrailingNode:()=>ie,Underline:()=>Q});var o=n("./node_modules/tiptap/dist/tiptap.esm.js"),r=n("./node_modules/tiptap-commands/dist/commands.esm.js"),i=n("./node_modules/lowlight/lib/core.js"),s=n("./node_modules/prosemirror-view/dist/index.js"),a=n("./node_modules/prosemirror-utils/dist/index.js"),l=n("./node_modules/prosemirror-state/dist/index.js"),c=n("./node_modules/prosemirror-tables/dist/index.js"),d=n("./node_modules/tiptap-utils/dist/utils.esm.js"),u=n("./node_modules/prosemirror-transform/dist/index.js"),h=n("./node_modules/prosemirror-collab/dist/collab.js"),p=n("./node_modules/prosemirror-history/dist/history.js");
/*!
    * tiptap-extensions v1.28.3
    * (c) 2019 Scrumpy UG (limited liability)
    * @license MIT
    */
function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var E=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return(0,r.toggleWrap)(t,n.nodes.paragraph)}}},{key:"keys",value:function(e){var t=e.type;return{"Ctrl->":(0,r.toggleWrap)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.wrappingInputRule)(/^\s*>\s$/,t)]}},{key:"name",get:function(){return"blockquote"}},{key:"schema",get:function(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}}}}]),t}(o.Node),T=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return(0,r.toggleList)(t,n.nodes.list_item)}}},{key:"keys",value:function(e){var t=e.type,n=e.schema;return{"Shift-Ctrl-8":(0,r.toggleList)(t,n.nodes.list_item)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.wrappingInputRule)(/^\s*([-+*])\s$/,t)]}},{key:"name",get:function(){return"bullet_list"}},{key:"schema",get:function(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}}}}]),t}(o.Node),O=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return(0,r.toggleBlockType)(t,n.nodes.paragraph)}}},{key:"keys",value:function(e){var t=e.type;return{"Shift-Ctrl-\\":(0,r.setBlockType)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.textblockTypeInputRule)(/^```$/,t)]}},{key:"name",get:function(){return"code_block"}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}}}}]),t}(o.Node);function A(e){var t=e.doc,n=e.name,o=[],r=(0,a.findBlockNodes)(t).filter((function(e){return e.node.type.name===n})),l=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map((function(e){var n=[].concat(C(t),C(e.properties?e.properties.className:[]));return e.children?c(e.children,n):{text:e.value,classes:n}}))}return r.forEach((function(e){var t=e.pos+1,n=i.highlightAuto(e.node.textContent).value;l(c(n)).map((function(e){var n=t,o=n+e.text.length;return t=o,b({},e,{from:n,to:o})})).forEach((function(e){var t=s.Decoration.inline(e.from,e.to,{class:e.classes.join(" ")});o.push(t)}))})),s.DecorationSet.create(t,o)}function R(e){var t=e.name;return new o.Plugin({name:new o.PluginKey("highlight"),state:{init:function(e,n){return A({doc:n.doc,name:t})},apply:function(e,n,o,r){var i=r.selection.$head.parent.type.name,s=o.selection.$head.parent.type.name;return e.docChanged&&[i,s].includes(t)?A({doc:e.doc,name:t}):n.map(e.mapping,e.doc)}},props:{decorations:function(e){return this.getState(e)}}})}var N=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,t),e=S(this,w(t).call(this,n));try{Object.entries(e.options.languages).forEach((function(e){var t=M(e,2),n=t[0],o=t[1];i.registerLanguage(n,o)}))}catch(e){throw new Error("Invalid syntax highlight definitions: define at least one highlight.js language mapping")}return e}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return(0,r.toggleBlockType)(t,n.nodes.paragraph)}}},{key:"keys",value:function(e){var t=e.type;return{"Shift-Ctrl-\\":(0,r.setBlockType)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.textblockTypeInputRule)(/^```$/,t)]}},{key:"name",get:function(){return"code_block"}},{key:"defaultOptions",get:function(){return{languages:{}}}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}}}},{key:"plugins",get:function(){return[R({name:this.name})]}}]),t}(o.Node),I=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type,n=(0,r.chainCommands)(r.exitCode,(function(e,n){return n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0}));return{"Mod-Enter":n,"Shift-Enter":n}}},{key:"name",get:function(){return"hard_break"}},{key:"schema",get:function(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}}}]),t}(o.Node),_=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(e){return(0,r.toggleBlockType)(t,n.nodes.paragraph,e)}}},{key:"keys",value:function(e){var t=e.type;return this.options.levels.reduce((function(e,n){return b({},e,{},v({},"Shift-Ctrl-".concat(n),(0,r.setBlockType)(t,{level:n})))}),{})}},{key:"inputRules",value:function(e){var t=e.type;return this.options.levels.map((function(e){return(0,r.textblockTypeInputRule)(new RegExp("^(#{1,".concat(e,"})\\s$")),t,(function(){return{level:e}}))}))}},{key:"name",get:function(){return"heading"}},{key:"defaultOptions",get:function(){return{levels:[1,2,3,4,5,6]}}},{key:"schema",get:function(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(e){return{tag:"h".concat(e),attrs:{level:e}}})),toDOM:function(e){return["h".concat(e.attrs.level),0]}}}}]),t}(o.Node),P=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type;return function(){return function(e,n){return n(e.tr.replaceSelectionWith(t.create()))}}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.nodeInputRule)(/^(?:---|___\s|\*\*\*\s)$/,t)]}},{key:"name",get:function(){return"horizontal_rule"}},{key:"schema",get:function(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}}}]),t}(o.Node),j=/!\[(.+|:?)\]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,D=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type;return function(e){return function(n,o){var r=n.selection,i=r.$cursor?r.$cursor.pos:r.$to.pos,s=t.create(e);o(n.tr.insert(i,s))}}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.nodeInputRule)(j,t,(function(e){var t=M(e,4),n=t[1];return{src:t[2],alt:n,title:t[3]}}))]}},{key:"name",get:function(){return"image"}},{key:"schema",get:function(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}}}},{key:"plugins",get:function(){return[new o.Plugin({props:{handleDOMEvents:{drop:function(e,t){if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){var n=Array.from(t.dataTransfer.files).filter((function(e){return/image/i.test(e.type)}));if(0!==n.length){t.preventDefault();var o=e.state.schema,r=e.posAtCoords({left:t.clientX,top:t.clientY});n.forEach((function(t){var n=new FileReader;n.onload=function(t){var n=o.nodes.image.create({src:t.target.result}),i=e.state.tr.insert(r.pos,n);e.dispatch(i)},n.readAsDataURL(t)}))}}}}}})]}}]),t}(o.Node),z=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type;return{Enter:(0,r.splitListItem)(t),Tab:(0,r.sinkListItem)(t),"Shift-Tab":(0,r.liftListItem)(t)}}},{key:"name",get:function(){return"list_item"}},{key:"schema",get:function(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}}}}]),t}(o.Node);function B(e){var t=e.matcher,n=void 0===t?{char:"@",allowSpaces:!1,startOfLine:!1}:t,o=e.appendText,i=void 0===o?null:o,a=e.suggestionClass,c=void 0===a?"suggestion":a,d=e.command,u=void 0===d?function(){return!1}:d,h=e.items,p=void 0===h?[]:h,f=e.onEnter,m=void 0===f?function(){return!1}:f,g=e.onChange,v=void 0===g?function(){return!1}:g,y=e.onExit,x=void 0===y?function(){return!1}:y,w=e.onKeyDown,k=void 0===w?function(){return!1}:w,S=e.onFilter,M=void 0===S?function(e,t){return t?e.filter((function(e){return JSON.stringify(e).toLowerCase().includes(t.toLowerCase())})):e}:S;return new l.Plugin({key:new l.PluginKey("suggestions"),view:function(){var e=this;return{update:function(t,n){var o=e.key.getState(n),s=e.key.getState(t.state),a=o.active&&s.active&&o.range.from!==s.range.from,l=!o.active&&s.active,c=o.active&&!s.active,d=l||a,h=!l&&!c&&o.query!==s.query&&!a,f=c||a;if(d||h||f){var g=f?o:s,y=document.querySelector('[data-decoration-id="'.concat(g.decorationId,'"]')),b=y?{getBoundingClientRect:function(){return y.getBoundingClientRect()},clientWidth:y.clientWidth,clientHeight:y.clientHeight}:null,w={view:t,range:g.range,query:g.query,text:g.text,decorationNode:y,virtualNode:b,items:M(Array.isArray(p)?p:p(),g.query),command:function(e){var n=e.range,o=e.attrs;u({range:n,attrs:o,schema:t.state.schema})(t.state,t.dispatch,t),i&&(0,r.insertText)(i)(t.state,t.dispatch,t)}};f&&x(w),h&&v(w),d&&m(w)}}}},state:{init:function(){return{active:!1,range:{},query:null,text:null}},apply:function(e,t){var o,r,i,s,a,l,c,d=e.selection,u=b({},t);if(d.from===d.to){(d.from<t.range.from||d.from>t.range.to)&&(u.active=!1);var h=d.$from,p=(r=(o=n).char,i=void 0===r?"@":r,s=o.allowSpaces,a=void 0!==s&&s,l=o.startOfLine,c=void 0!==l&&l,function(e){if(e.depth<=0)return!1;for(var t,n="\\".concat(i),o=new RegExp("\\s".concat(n,"$")),r=c?"^":"",s=a?new RegExp("".concat(r).concat(n,".*?(?=\\s").concat(n,"|$)"),"gm"):new RegExp("".concat(r,"(?:^)?").concat(n,"[^\\s").concat(n,"]*"),"gm"),l=e.before(),d=e.end(),u=e.doc.textBetween(l,d,"\0","\0"),h=s.exec(u);null!==h;){var p=h.input.slice(Math.max(0,h.index-1),h.index);if(/^[\s\0]?$/.test(p)){var f=h.index+e.start(),m=f+h[0].length;a&&o.test(u.slice(m-1,m+1))&&(h[0]+=" ",m+=1),f<e.pos&&m>=e.pos&&(t={range:{from:f,to:m},query:h[0].slice(i.length),text:h[0]})}h=s.exec(u)}return t})(h),f=(Math.random()+1).toString(36).substr(2,5);p?(u.active=!0,u.decorationId=t.decorationId?t.decorationId:f,u.range=p.range,u.query=p.query,u.text=p.text):u.active=!1}else u.active=!1;return u.active||(u.decorationId=null,u.range={},u.query=null,u.text=null),u}},props:{handleKeyDown:function(e,t){var n=this.getState(e.state),o=n.active,r=n.range;return!!o&&k({view:e,event:t,range:r})},decorations:function(e){var t=this.getState(e),n=t.active,o=t.range,r=t.decorationId;return n?s.DecorationSet.create(e.doc,[s.Decoration.inline(o.from,o.to,{nodeName:"span",class:c,"data-decoration-id":r})]):null}}})}var L=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=this,n=e.schema;return function(e){return(0,r.replaceText)(null,n.nodes[t.name],e)}}},{key:"name",get:function(){return"mention"}},{key:"defaultOptions",get:function(){return{matcher:{char:"@",allowSpaces:!1,startOfLine:!1},mentionClass:"mention",suggestionClass:"mention-suggestion"}}},{key:"schema",get:function(){var e=this;return{attrs:{id:{},label:{}},group:"inline",inline:!0,selectable:!1,atom:!0,toDOM:function(t){return["span",{class:e.options.mentionClass,"data-mention-id":t.attrs.id},"".concat(e.options.matcher.char).concat(t.attrs.label)]},parseDOM:[{tag:"span[data-mention-id]",getAttrs:function(t){return{id:t.getAttribute("data-mention-id"),label:t.innerText.split(e.options.matcher.char).join("")}}}]}}},{key:"plugins",get:function(){var e=this;return[B({command:function(t){var n=t.range,o=t.attrs,i=t.schema;return(0,r.replaceText)(n,i.nodes[e.name],o)},appendText:" ",matcher:this.options.matcher,items:this.options.items,onEnter:this.options.onEnter,onChange:this.options.onChange,onExit:this.options.onExit,onKeyDown:this.options.onKeyDown,onFilter:this.options.onFilter,suggestionClass:this.options.suggestionClass})]}}]),t}(o.Node),$=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return(0,r.toggleList)(t,n.nodes.list_item)}}},{key:"keys",value:function(e){var t=e.type,n=e.schema;return{"Shift-Ctrl-9":(0,r.toggleList)(t,n.nodes.list_item)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.wrappingInputRule)(/^(\d+)\.\s$/,t,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]}))]}},{key:"name",get:function(){return"ordered_list"}},{key:"schema",get:function(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}}}}]),t}(o.Node),F=(0,c.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function(e){return e.style.backgroundColor||null},setDOMAttr:function(e,t){if(e){var n={style:"".concat(t.style||"","background-color: ").concat(e,";")};Object.assign(t,n)}}}}}),V=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.schema;return{createTable:function(e){var n=e.rowsCount,o=e.colsCount,r=e.withHeaderRow;return function(e,i){var s=e.tr.selection.anchor+1,c=(0,a.createTable)(t,n,o,r),d=e.tr.replaceSelectionWith(c).scrollIntoView(),u=d.doc.resolve(s);d.setSelection(l.TextSelection.near(u)),i(d)}},addColumnBefore:function(){return c.addColumnBefore},addColumnAfter:function(){return c.addColumnAfter},deleteColumn:function(){return c.deleteColumn},addRowBefore:function(){return c.addRowBefore},addRowAfter:function(){return c.addRowAfter},deleteRow:function(){return c.deleteRow},deleteTable:function(){return c.deleteTable},toggleCellMerge:function(){return function(e,t){(0,c.mergeCells)(e,t)||(0,c.splitCell)(e,t)}},mergeCells:function(){return c.mergeCells},splitCell:function(){return c.splitCell},toggleHeaderColumn:function(){return c.toggleHeaderColumn},toggleHeaderRow:function(){return c.toggleHeaderRow},toggleHeaderCell:function(){return c.toggleHeaderCell},setCellAttr:function(){return c.setCellAttr},fixTables:function(){return c.fixTables}}}},{key:"keys",value:function(){return{Tab:(0,c.goToNextCell)(1),"Shift-Tab":(0,c.goToNextCell)(-1)}}},{key:"name",get:function(){return"table"}},{key:"defaultOptions",get:function(){return{resizable:!1}}},{key:"schema",get:function(){return F.table}},{key:"plugins",get:function(){return[].concat(C(this.options.resizable?[(0,c.columnResizing)()]:[]),[(0,c.tableEditing)()])}}]),t}(o.Node),H=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"name",get:function(){return"table_header"}},{key:"schema",get:function(){return F.table_header}}]),t}(o.Node),U=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"name",get:function(){return"table_cell"}},{key:"schema",get:function(){return F.table_cell}}]),t}(o.Node),W=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"name",get:function(){return"table_row"}},{key:"schema",get:function(){return F.table_row}}]),t}(o.Node),q=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type;return{Enter:(0,r.splitToDefaultListItem)(t),Tab:this.options.nested?(0,r.sinkListItem)(t):function(){},"Shift-Tab":(0,r.liftListItem)(t)}}},{key:"name",get:function(){return"todo_item"}},{key:"defaultOptions",get:function(){return{nested:!1}}},{key:"view",get:function(){return{props:["node","updateAttrs","view"],methods:{onChange:function(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}},{key:"schema",get:function(){var e=this;return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:function(t){var n=t.attrs.done;return["li",{"data-type":e.name,"data-done":n.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:function(e){return{done:"true"===e.getAttribute("data-done")}}}]}}}]),t}(o.Node),J=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type,n=e.schema;return function(){return(0,r.toggleList)(t,n.nodes.todo_item)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.wrappingInputRule)(/^\s*(\[ \])\s$/,t)]}},{key:"name",get:function(){return"todo_list"}},{key:"schema",get:function(){var e=this;return{group:"block",content:"todo_item+",toDOM:function(){return["ul",{"data-type":e.name},0]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}}]),t}(o.Node),K=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-b":(0,r.toggleMark)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return(0,r.toggleMark)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.markInputRule)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[(0,r.markPasteRule)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}},{key:"name",get:function(){return"bold"}},{key:"schema",get:function(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}}}}]),t}(o.Mark),G=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-`":(0,r.toggleMark)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return(0,r.toggleMark)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.markInputRule)(/(?:`)([^`]+)(?:`)$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[(0,r.markPasteRule)(/(?:`)([^`]+)(?:`)/g,t)]}},{key:"name",get:function(){return"code"}},{key:"schema",get:function(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}}}}]),t}(o.Mark),X=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-i":(0,r.toggleMark)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return(0,r.toggleMark)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.markInputRule)(/(?:^|[^_])(_([^_]+)_)$/,t),(0,r.markInputRule)(/(?:^|[^*])(\*([^*]+)\*)$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[(0,r.markPasteRule)(/_([^_]+)_/g,t),(0,r.markPasteRule)(/\*([^*]+)\*/g,t)]}},{key:"name",get:function(){return"italic"}},{key:"schema",get:function(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}}}}]),t}(o.Mark),Y=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"commands",value:function(e){var t=e.type;return function(e){return e.href?(0,r.updateMark)(t,e):(0,r.removeMark)(t)}}},{key:"pasteRules",value:function(e){var t=e.type;return[(0,r.pasteRule)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,t,(function(e){return{href:e}}))]}},{key:"name",get:function(){return"link"}},{key:"defaultOptions",get:function(){return{openOnClick:!0}}},{key:"schema",get:function(){return{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href")}}}],toDOM:function(e){return["a",b({},e.attrs,{rel:"noopener noreferrer nofollow"}),0]}}}},{key:"plugins",get:function(){return this.options.openOnClick?[new o.Plugin({props:{handleClick:function(e,t,n){var o=e.state.schema,r=(0,d.getMarkAttrs)(e.state,o.marks.link);r.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(r.href))}}})]:[]}}]),t}(o.Mark),Z=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-d":(0,r.toggleMark)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return(0,r.toggleMark)(t)}}},{key:"inputRules",value:function(e){var t=e.type;return[(0,r.markInputRule)(/~([^~]+)~$/,t)]}},{key:"pasteRules",value:function(e){var t=e.type;return[(0,r.markPasteRule)(/~([^~]+)~/g,t)]}},{key:"name",get:function(){return"strike"}},{key:"schema",get:function(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(e){return"line-through"===e}}],toDOM:function(){return["s",0]}}}}]),t}(o.Mark),Q=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(e){var t=e.type;return{"Mod-u":(0,r.toggleMark)(t)}}},{key:"commands",value:function(e){var t=e.type;return function(){return(0,r.toggleMark)(t)}}},{key:"name",get:function(){return"underline"}},{key:"schema",get:function(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function(e){return"underline"===e}}],toDOM:function(){return["u",0]}}}}]),t}(o.Mark),ee=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"init",value:function(){var e=this;this.getSendableSteps=this.debounce((function(t){var n=(0,h.sendableSteps)(t);n&&e.options.onSendable({editor:e.editor,sendable:{version:n.version,steps:n.steps.map((function(e){return e.toJSON()})),clientID:n.clientID}})}),this.options.debounce),this.editor.on("transaction",(function(t){var n=t.state;e.getSendableSteps(n)}))}},{key:"debounce",value:function(e,t){var n;return function(){for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];n&&clearTimeout(n),n=setTimeout((function(){e.apply(void 0,r),n=null}),t)}}},{key:"name",get:function(){return"collaboration"}},{key:"defaultOptions",get:function(){var e=this;return{version:0,clientID:Math.floor(4294967295*Math.random()),debounce:250,onSendable:function(){},update:function(t){var n=t.steps,o=t.version,r=e.editor,i=r.state,s=r.view,a=r.schema;(0,h.getVersion)(i)>o||s.dispatch((0,h.receiveTransaction)(i,n.map((function(e){return u.Step.fromJSON(a,e.step)})),n.map((function(e){return e.clientID}))))}}}},{key:"plugins",get:function(){return[(0,h.collab)({version:this.options.version,clientID:this.options.clientID})]}}]),t}(o.Extension),te=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"name",get:function(){return"focus"}},{key:"defaultOptions",get:function(){return{className:"has-focus",nested:!1}}},{key:"plugins",get:function(){var e=this;return[new o.Plugin({props:{decorations:function(t){var n=t.doc,o=t.plugins,r=t.selection,i=o.find((function(e){return e.key.startsWith("editable$")})).props.editable()&&e.options.className,a=e.editor.focused,l=r.anchor,c=[];return!(!i||!a)&&(n.descendants((function(t,n){if(l>=n&&l<=n+t.nodeSize&&!t.isText){var o=s.Decoration.node(n,n+t.nodeSize,{class:e.options.className});c.push(o)}return e.options.nested})),s.DecorationSet.create(n,c))}}})]}}]),t}(o.Extension),ne=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"keys",value:function(){return{"Mod-z":p.undo,"Mod-y":p.redo,"Shift-Mod-z":p.redo}}},{key:"commands",value:function(){return{undo:function(){return p.undo},redo:function(){return p.redo}}}},{key:"name",get:function(){return"history"}},{key:"defaultOptions",get:function(){return{depth:"",newGroupDelay:""}}},{key:"plugins",get:function(){return[(0,p.history)({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}}]),t}(o.Extension),oe=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"name",get:function(){return"placeholder"}},{key:"defaultOptions",get:function(){return{emptyNodeClass:"is-empty",emptyNodeText:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0}}},{key:"update",get:function(){return function(e){e.updateState(e.state)}}},{key:"plugins",get:function(){var e=this;return[new o.Plugin({props:{decorations:function(t){var n=t.doc,o=t.plugins,r=t.selection,i=o.find((function(e){return e.key.startsWith("editable$")})).props.editable()||!e.options.showOnlyWhenEditable,a=r.anchor,l=[];return!!i&&(n.descendants((function(t,n){var o=a>=n&&a<=n+t.nodeSize,r=0===t.content.size;if((o||!e.options.showOnlyCurrent)&&r){var i=s.Decoration.node(n,n+t.nodeSize,{class:e.options.emptyNodeClass,"data-empty-text":"function"==typeof e.options.emptyNodeText?e.options.emptyNodeText(t):e.options.emptyNodeText});l.push(i)}return!1})),s.DecorationSet.create(n,l))}}})]}}]),t}(o.Extension),re=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(this,t),(e=S(this,w(t).call(this,n))).results=[],e.searchTerm=null,e._updating=!1,e}return x(t,e),g(t,[{key:"commands",value:function(){var e=this;return{find:function(t){return e.find(t)},replace:function(t){return e.replace(t)},replaceAll:function(t){return e.replaceAll(t)},clearSearch:function(){return e.clear()}}}},{key:"_search",value:function(e){var t=this;this.results=[];var n=[],o=0;this.searchTerm&&(e.descendants((function(e,t){e.isText?n[o]?n[o]={text:n[o].text+e.text,pos:n[o].pos}:n[o]={text:e.text,pos:t}:o+=1})),n.forEach((function(e){for(var n,o=e.text,r=e.pos,i=t.findRegExp;(n=i.exec(o))&&""!==n[0];)t.results.push({from:r+n.index,to:r+n.index+n[0].length})})))}},{key:"replace",value:function(e){var t=this;return function(n,o){if(t.results[0]){var r=t.results[0],i=r.from,s=r.to;o(n.tr.insertText(e,i,s)),t.editor.commands.find(t.searchTerm)}}}},{key:"rebaseNextResult",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t+1;if(!this.results[o])return null;var r=this.results[t],i=r.from,s=r.to,a=s-i-e.length+n,l=this.results[o],c=l.from,d=l.to;return this.results[o]={to:d-a,from:c-a},a}},{key:"replaceAll",value:function(e){var t=this;return function(n,o){var r,i=n.tr;t.results.length&&(t.results.forEach((function(n,o){var s=n.from,a=n.to;i.insertText(e,s,a),r=t.rebaseNextResult(e,o,r)})),o(i),t.editor.commands.find(t.searchTerm))}}},{key:"find",value:function(e){var t=this;return function(n,o){t.searchTerm=t.options.disableRegex?e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"):e,t.updateView(n,o)}}},{key:"clear",value:function(){var e=this;return function(t,n){e.searchTerm=null,e.updateView(t,n)}}},{key:"updateView",value:function(e,t){var n=e.tr;this._updating=!0,t(n),this._updating=!1}},{key:"createDeco",value:function(e){return this._search(e),this.decorations?s.DecorationSet.create(e,this.decorations):[]}},{key:"name",get:function(){return"search"}},{key:"defaultOptions",get:function(){return{autoSelectNext:!0,findClass:"find",searching:!1,caseSensitive:!1,disableRegex:!0,alwaysSearch:!1}}},{key:"findRegExp",get:function(){return RegExp(this.searchTerm,this.options.caseSensitive?"gu":"gui")}},{key:"decorations",get:function(){var e=this;return this.results.map((function(t){return s.Decoration.inline(t.from,t.to,{class:e.options.findClass})}))}},{key:"plugins",get:function(){var e=this;return[new o.Plugin({state:{init:function(){return s.DecorationSet.empty},apply:function(t,n){return e._updating||e.options.searching||t.docChanged&&e.options.alwaysSearch?e.createDeco(t.doc):t.docChanged?n.map(t.mapping,t.doc):n}},props:{decorations:function(e){return this.getState(e)}}})]}}]),t}(o.Extension),ie=function(e){function t(){return f(this,t),S(this,w(t).apply(this,arguments))}return x(t,e),g(t,[{key:"name",get:function(){return"trailing_node"}},{key:"defaultOptions",get:function(){return{node:"paragraph",notAfter:["paragraph"]}}},{key:"plugins",get:function(){var e=this,t=new o.PluginKey(this.name),n=Object.entries(this.editor.schema.nodes).map((function(e){return M(e,2)[1]})).filter((function(t){return e.options.notAfter.includes(t.name)}));return[new o.Plugin({key:t,view:function(){return{update:function(n){var o=n.state;if(t.getState(o)){var r=o.doc,i=o.schema,s=o.tr,a=i.nodes[e.options.node],l=s.insert(r.content.size,a.create());n.dispatch(l)}}}},state:{init:function(e,t){var o=t.tr.doc.lastChild;return!(0,d.nodeEqualsType)({node:o,types:n})},apply:function(e,t){if(!e.docChanged)return t;var o=e.doc.lastChild;return!(0,d.nodeEqualsType)({node:o,types:n})}}})]}}]),t}(o.Extension)},"./node_modules/tiptap-utils/dist/utils.esm.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{createCell:()=>r,createTable:()=>s,equalNodeType:()=>a,findBlockNodes:()=>d,findChildren:()=>c,findParentNode:()=>h,findParentNodeClosestToPos:()=>u,findSelectedNodeOfType:()=>f,flatten:()=>l,getMarkAttrs:()=>m,getMarkRange:()=>g,getNodeAttrs:()=>v,getTableNodeTypes:()=>i,isNodeSelection:()=>p,markIsActive:()=>y,nodeEqualsType:()=>b,nodeIsActive:()=>x});var o=n("./node_modules/prosemirror-state/dist/index.js");
/*!
    * tiptap-utils v1.13.0
    * (c) 2021 berdosis GbR (limited liability)
    * @license MIT
    */function r(e,t){return t?e.createChecked(null,t):e.createAndFill()}function i(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach((n=>{const o=e.nodes[n];o.spec.tableRole&&(t[o.spec.tableRole]=o)})),e.cached.tableNodeTypes=t,t}function s(e,t,n,o,s){const a=i(e),l=[],c=[];for(let e=0;e<n;e+=1){const e=r(a.cell,s);if(e&&c.push(e),o){const e=r(a.header_cell,s);e&&l.push(e)}}const d=[];for(let e=0;e<t;e+=1)d.push(a.row.createChecked(null,o&&0===e?l:c));return a.table.createChecked(null,d)}function a(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e}function l(e){const t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');const n=[];return e.descendants(((e,o)=>{if(n.push({node:e,pos:o}),!t)return!1})),n}function c(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return l(e,n).filter((e=>t(e.node)))}function d(e,t){return c(e,(e=>e.isBlock),t)}function u(e,t){for(let n=e.depth;n>0;n-=1){const o=e.node(n);if(t(o))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:o}}}function h(e){return t=>u(t.$from,e)}function p(e){return e instanceof o.NodeSelection}function f(e){return function(t){if(p(t)){const{node:n}=t,{$from:o}=t;if(a(e,n))return{node:n,pos:o.pos,depth:o.depth}}}}function m(e,t){const{from:n,to:o}=e.selection;let r=[];e.doc.nodesBetween(n,o,(e=>{r=[...r,...e.marks]}));const i=r.find((e=>e.type.name===t.name));return i?i.attrs:{}}function g(e=null,t=null){if(!e||!t)return!1;const n=e.parent.childAfter(e.parentOffset);if(!n.node)return!1;const o=n.node.marks.find((e=>e.type===t));if(!o)return!1;let r=e.index(),i=e.start()+n.offset,s=r+1,a=i+n.node.nodeSize;for(;r>0&&o.isInSet(e.parent.child(r-1).marks);)r-=1,i-=e.parent.child(r).nodeSize;for(;s<e.parent.childCount&&o.isInSet(e.parent.child(s).marks);)a+=e.parent.child(s).nodeSize,s+=1;return{from:i,to:a}}function v(e,t){const{from:n,to:o}=e.selection;let r=[];e.doc.nodesBetween(n,o,(e=>{r=[...r,e]}));const i=r.reverse().find((e=>e.type.name===t.name));return i?i.attrs:{}}function y(e,t){const{from:n,$from:o,to:r,empty:i}=e.selection;return i?!!t.isInSet(e.storedMarks||o.marks()):!!e.doc.rangeHasMark(n,r,t)}function b({types:e,node:t}){return Array.isArray(e)&&e.includes(t.type)||t.type===e}function x(e,t,n={}){const o=f(t)(e.selection)||h((e=>e.type===t))(e.selection);return Object.keys(n).length&&o?o.node.hasMarkup(t,{...o.node.attrs,...n}):!!o}},"./node_modules/tiptap/dist/tiptap.esm.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{NodeSelection:()=>o.NodeSelection,Plugin:()=>o.Plugin,PluginKey:()=>o.PluginKey,TextSelection:()=>o.TextSelection,Doc:()=>D,Editor:()=>$,EditorContent:()=>F,EditorFloatingMenu:()=>X,EditorMenuBar:()=>H,EditorMenuBubble:()=>K,Extension:()=>R,Mark:()=>_,Node:()=>j,Paragraph:()=>z,Text:()=>B});var o=n("./node_modules/prosemirror-state/dist/index.js"),r=n("./node_modules/prosemirror-view/dist/index.js"),i=n("./node_modules/prosemirror-model/dist/index.js"),s=n("./node_modules/prosemirror-dropcursor/dist/dropcursor.js"),a=n("./node_modules/prosemirror-gapcursor/dist/index.js"),l=n("./node_modules/prosemirror-keymap/dist/keymap.js"),c=n("./node_modules/prosemirror-commands/dist/commands.js"),d=n("./node_modules/prosemirror-inputrules/dist/index.js"),u=n("./node_modules/tiptap-utils/dist/utils.esm.js"),h=n("./node_modules/vue/dist/vue.esm.js"),p=n("./node_modules/tiptap-commands/dist/commands.esm.js");
/*!
    * tiptap v1.26.3
    * (c) 2019 Scrumpy UG (limited liability)
    * @license MIT
    */
function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e))&&"[object Arguments]"!==Object.prototype.toString.call(e))return;var n=[],o=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")}var O=function(){function e(t,n){var o=n.editor,r=n.extension,i=n.parent,s=n.node,a=n.view,l=n.decorations,c=n.getPos;m(this,e),this.component=t,this.editor=o,this.extension=r,this.parent=i,this.node=s,this.view=a,this.decorations=l,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:c,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}return v(e,[{key:"createDOM",value:function(){var e=this,t=h.default.extend(this.component),n={editor:this.editor,node:this.node,view:this.view,getPos:function(){return e.getPos()},decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:function(t){return e.updateAttrs(t)}};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),this.vm=new t({parent:this.parent,propsData:n}).$mount(),this.vm.$el}},{key:"update",value:function(e,t){return e.type===this.node.type&&(e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,this.updateComponentProps({node:e,decorations:t})),!0)}},{key:"updateComponentProps",value:function(e){var t=this;if(this.vm._props){var n=h.default.config.silent;h.default.config.silent=!0,Object.entries(e).forEach((function(e){var n=C(e,2),o=n[0],r=n[1];t.vm._props[o]=r})),h.default.config.silent=n}}},{key:"updateAttrs",value:function(e){if(this.view.editable){var t=this.view.state,n=this.node.type,o=this.getPos(),r=x({},this.node.attrs,{},e),i=this.isMark?t.tr.removeMark(o.from,o.to,n).addMark(o.from,o.to,n.create(r)):t.tr.setNodeMarkup(o,null,r);this.view.dispatch(i)}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM||!this.contentDOM.contains(e.target)}},{key:"stopEvent",value:function(e){var t=this;if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(e);var n=!!this.extension.schema.draggable;if(n&&"mousedown"===e.type){var o=e.target.closest&&e.target.closest("[data-drag-handle]");o&&(this.dom===o||this.dom.contains(o))&&(this.captureEvents=!1,document.addEventListener("dragend",(function(){t.captureEvents=!0}),{once:!0}))}var r="copy"===e.type,i="paste"===e.type,s="cut"===e.type,a=e.type.startsWith("drag")||"drop"===e.type;return!(n&&a||r||i||s)&&this.captureEvents}},{key:"selectNode",value:function(){this.updateComponentProps({selected:!0})}},{key:"deselectNode",value:function(){this.updateComponentProps({selected:!1})}},{key:"getMarkPos",value:function(){var e=this.view.posAtDOM(this.dom),t=this.view.state.doc.resolve(e);return(0,u.getMarkRange)(t,this.node.type)}},{key:"destroy",value:function(){this.vm.$destroy()}}]),e}(),A=function(){function e(){m(this,e)}return v(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];this._callbacks=this._callbacks||{};var i=this._callbacks[e];return i&&i.forEach((function(e){return e.apply(t,o)})),this}},{key:"off",value:function(e,t){if(arguments.length){var n=this._callbacks?this._callbacks[e]:null;n&&(t?this._callbacks[e]=n.filter((function(e){return e!==t})):delete this._callbacks[e])}else this._callbacks={};return this}}]),e}(),R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e),this.options=x({},this.defaultOptions,{},t)}return v(e,[{key:"init",value:function(){return null}},{key:"bindEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.editor=e}},{key:"inputRules",value:function(){return[]}},{key:"pasteRules",value:function(){return[]}},{key:"keys",value:function(){return{}}},{key:"name",get:function(){return null}},{key:"type",get:function(){return"extension"}},{key:"update",get:function(){return function(){}}},{key:"defaultOptions",get:function(){return{}}},{key:"plugins",get:function(){return[]}}]),e}(),N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;m(this,e),t.forEach((function(e){e.bindEditor(n),e.init()})),this.extensions=t}return v(e,[{key:"keymaps",value:function(e){var t=e.schema,n=this.extensions.filter((function(e){return["extension"].includes(e.type)})).filter((function(e){return e.keys})).map((function(e){return e.keys({schema:t})})),o=this.extensions.filter((function(e){return["node","mark"].includes(e.type)})).filter((function(e){return e.keys})).map((function(e){return e.keys({type:t["".concat(e.type,"s")][e.name],schema:t})}));return[].concat(E(n),E(o)).map((function(e){return(0,l.keymap)(e)}))}},{key:"inputRules",value:function(e){var t=e.schema,n=e.excludedExtensions;if(!(n instanceof Array)&&n)return[];var o=n instanceof Array?this.extensions.filter((function(e){return!n.includes(e.name)})):this.extensions,r=o.filter((function(e){return["extension"].includes(e.type)})).filter((function(e){return e.inputRules})).map((function(e){return e.inputRules({schema:t})})),i=o.filter((function(e){return["node","mark"].includes(e.type)})).filter((function(e){return e.inputRules})).map((function(e){return e.inputRules({type:t["".concat(e.type,"s")][e.name],schema:t})}));return[].concat(E(r),E(i)).reduce((function(e,t){return[].concat(E(e),E(t))}),[])}},{key:"pasteRules",value:function(e){var t=e.schema,n=e.excludedExtensions;if(!(n instanceof Array)&&n)return[];var o=n instanceof Array?this.extensions.filter((function(e){return!n.includes(e.name)})):this.extensions,r=o.filter((function(e){return["extension"].includes(e.type)})).filter((function(e){return e.pasteRules})).map((function(e){return e.pasteRules({schema:t})})),i=o.filter((function(e){return["node","mark"].includes(e.type)})).filter((function(e){return e.pasteRules})).map((function(e){return e.pasteRules({type:t["".concat(e.type,"s")][e.name],schema:t})}));return[].concat(E(r),E(i)).reduce((function(e,t){return[].concat(E(e),E(t))}),[])}},{key:"commands",value:function(e){var t=e.schema,n=e.view;return this.extensions.filter((function(e){return e.commands})).reduce((function(e,o){var r=o.name,i=o.type,s={},a=o.commands(x({schema:t},["node","mark"].includes(i)?{type:t["".concat(i,"s")][r]}:{})),l=function(e,t){return!!n.editable&&(n.focus(),e(t)(n.state,n.dispatch,n))},c=function(e,t){Array.isArray(t)?s[e]=function(e){return t.forEach((function(t){return l(t,e)}))}:"function"==typeof t&&(s[e]=function(e){return l(t,e)})};return"object"===f(a)?Object.entries(a).forEach((function(e){var t=C(e,2),n=t[0],o=t[1];c(n,o)})):c(r,a),x({},e,{},s)}),{})}},{key:"nodes",get:function(){return this.extensions.filter((function(e){return"node"===e.type})).reduce((function(e,t){return x({},e,y({},t.name,t.schema))}),{})}},{key:"options",get:function(){var e=this.view;return this.extensions.reduce((function(t,n){return x({},t,y({},n.name,new Proxy(n.options,{set:function(t,o,r){var i=t[o]!==r;return Object.assign(t,y({},o,r)),i&&n.update(e),!0}})))}),{})}},{key:"marks",get:function(){return this.extensions.filter((function(e){return"mark"===e.type})).reduce((function(e,t){return x({},e,y({},t.name,t.schema))}),{})}},{key:"plugins",get:function(){return this.extensions.filter((function(e){return e.plugins})).reduce((function(e,t){var n=t.plugins;return[].concat(E(e),E(n))}),[])}}]),e}();function I(e){var t=document.createElement("style");t.type="text/css",t.textContent=e;var n=document.head,o=n.firstChild;o?n.insertBefore(t,o):n.appendChild(t)}var _=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(this,t),M(this,k(t).call(this,e))}return w(t,e),v(t,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"mark"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),t}(R);function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(parseInt(e,10),t),n)}var j=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(this,t),M(this,k(t).call(this,e))}return w(t,e),v(t,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"node"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),t}(R),D=function(e){function t(){return m(this,t),M(this,k(t).apply(this,arguments))}return w(t,e),v(t,[{key:"name",get:function(){return"doc"}},{key:"schema",get:function(){return{content:"block+"}}}]),t}(j),z=function(e){function t(){return m(this,t),M(this,k(t).apply(this,arguments))}return w(t,e),v(t,[{key:"commands",value:function(e){var t=e.type;return function(){return(0,p.setBlockType)(t)}}},{key:"name",get:function(){return"paragraph"}},{key:"schema",get:function(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}}}}]),t}(j),B=function(e){function t(){return m(this,t),M(this,k(t).apply(this,arguments))}return w(t,e),v(t,[{key:"name",get:function(){return"text"}},{key:"schema",get:function(){return{group:"inline"}}}]),t}(j),L='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n',$=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(this,t),(e=M(this,k(t).call(this))).defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},parseOptions:{},injectCSS:!0,onInit:function(){},onTransaction:function(){},onUpdate:function(){},onFocus:function(){},onBlur:function(){},onPaste:function(){},onDrop:function(){}},e.events=["init","transaction","update","focus","blur","paste","drop"],e.init(n),e}return w(t,e),v(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setOptions(x({},this.defaultOptions,{},t)),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&I(L),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((function(t){e.on(t,e.options[T("on ".concat(t))]||function(){})})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}},{key:"setOptions",value:function(e){this.options=x({},this.options,{},e),this.view&&this.state&&this.view.updateState(this.state)}},{key:"createExtensions",value:function(){return new N([].concat(E(this.builtInExtensions),E(this.options.extensions)),this)}},{key:"createPlugins",value:function(){return this.extensions.plugins}},{key:"createKeymaps",value:function(){return this.extensions.keymaps({schema:this.schema})}},{key:"createInputRules",value:function(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}},{key:"createPasteRules",value:function(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}},{key:"createCommands",value:function(){return this.extensions.commands({schema:this.schema,view:this.view})}},{key:"createNodes",value:function(){return this.extensions.nodes}},{key:"createMarks",value:function(){return this.extensions.marks}},{key:"createSchema",value:function(){return new i.Schema({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}},{key:"createState",value:function(){var e=this;return o.EditorState.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[].concat(E(this.plugins),[(0,d.inputRules)({rules:this.inputRules})],E(this.pasteRules),E(this.keymaps),[(0,l.keymap)({Backspace:d.undoInputRule}),(0,l.keymap)(c.baseKeymap),(0,s.dropCursor)(this.options.dropCursor),(0,a.gapCursor)(),new o.Plugin({key:new o.PluginKey("editable"),props:{editable:function(){return e.options.editable}}}),new o.Plugin({props:{attributes:{tabindex:0},handleDOMEvents:{focus:function(t,n){e.focused=!0,e.emit("focus",{event:n,state:t.state,view:t});var o=e.state.tr.setMeta("focused",!0);e.view.dispatch(o)},blur:function(t,n){e.focused=!1,e.emit("blur",{event:n,state:t.state,view:t});var o=e.state.tr.setMeta("focused",!1);e.view.dispatch(o)}}}}),new o.Plugin({props:this.options.editorProps})])})}},{key:"createDocument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.parseOptions;if(null===e)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"===f(e))try{return this.schema.nodeFromJSON(e)}catch(t){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",t),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof e){var n=document.createElement("div");return n.innerHTML=e.trim(),i.DOMParser.fromSchema(this.schema).parse(n,t)}return!1}},{key:"createView",value:function(){var e=this;return new r.EditorView(this.element,{state:this.createState(),handlePaste:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.emit.apply(e,["paste"].concat(n))},handleDrop:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.emit.apply(e,["drop"].concat(n))},dispatchTransaction:this.dispatchTransaction.bind(this)})}},{key:"setParentComponent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&this.view.setProps({nodeViews:this.initNodeViews({parent:e,extensions:[].concat(E(this.builtInExtensions),E(this.options.extensions))})})}},{key:"initNodeViews",value:function(e){var t=this,n=e.parent;return e.extensions.filter((function(e){return["node","mark"].includes(e.type)})).filter((function(e){return e.view})).reduce((function(e,o){return x({},e,y({},o.name,(function(e,r,i,s){var a=o.view;return new O(a,{editor:t,extension:o,parent:n,node:e,view:r,getPos:i,decorations:s})})))}),{})}},{key:"dispatchTransaction",value:function(e){var t=this.state.apply(e);this.view.updateState(t),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emitUpdate(e)}},{key:"emitUpdate",value:function(e){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e})}},{key:"resolveSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.selection&&null===e)return this.selection;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){var t=this.state.doc;return{from:t.content.size,to:t.content.size}}return{from:e,to:e}}},{key:"focus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!(this.view.focused&&null===t||!1===t)){var n=this.resolveSelection(t),o=n.from,r=n.to;this.setSelection(o,r),setTimeout((function(){return e.view.focus()}),10)}}},{key:"setSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.state,r=n.doc,i=n.tr,s=P(e,0,r.content.size),a=P(t,0,r.content.size),l=o.TextSelection.create(r,s,a),c=i.setSelection(l);this.view.dispatch(c)}},{key:"blur",value:function(){this.view.dom.blur()}},{key:"getSchemaJSON",value:function(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}},{key:"getHTML",value:function(){var e=document.createElement("div"),t=i.DOMSerializer.fromSchema(this.schema).serializeFragment(this.state.doc.content);return e.appendChild(t),e.innerHTML}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"setContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.state,i=r.doc,s=r.tr,a=this.createDocument(e,n),l=o.TextSelection.create(i,0,i.content.size),c=s.setSelection(l).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t);this.view.dispatch(c)}},{key:"clearContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setContent(this.options.emptyDocument,e)}},{key:"setActiveNodesAndMarks",value:function(){var e=this;this.activeMarks=Object.entries(this.schema.marks).reduce((function(t,n){var o=C(n,2),r=o[0],i=o[1];return x({},t,y({},r,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.markIsActive)(e.state,i,t)})))}),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce((function(t,n){var o=C(n,2),r=o[0],i=o[1];return x({},t,y({},r,(0,u.getMarkAttrs)(e.state,i)))}),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce((function(t,n){var o=C(n,2),r=o[0],i=o[1];return x({},t,y({},r,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.nodeIsActive)(e.state,i,t)})))}),{})}},{key:"getMarkAttrs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.activeMarkAttrs[e]}},{key:"registerPlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=this.state.reconfigure({plugins:this.state.plugins.concat([e])});this.view.updateState(t)}}},{key:"unregisterPlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&this.view.docView){var t=this.state.reconfigure({plugins:this.state.plugins.filter((function(t){return!t.key.startsWith("".concat(e,"$"))}))});this.view.updateState(t)}}},{key:"destroy",value:function(){this.view&&this.view.destroy()}},{key:"builtInExtensions",get:function(){return this.options.useBuiltInExtensions?[new D,new B,new z]:[]}},{key:"state",get:function(){return this.view?this.view.state:null}},{key:"isActive",get:function(){return Object.entries(x({},this.activeMarks,{},this.activeNodes)).reduce((function(e,t){var n=C(t,2),o=n[0],r=n[1];return x({},e,y({},o,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e)})))}),{})}}]),t}(A),F={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&e.element&&this.$nextTick((function(){t.$el.appendChild(e.element.firstChild),e.setParentComponent(t)}))}}},render:function(e){return e("div")},beforeDestroy:function(){this.editor.element=this.$el}},V=function(){function e(t){var n=this,o=t.options;m(this,e),this.options=o,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("blur",(function(){n.preventHide?n.preventHide=!1:n.options.editor.emit("menubar:focusUpdate",!1)}))}return v(e,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler)}}]),e}();var H={props:{editor:{default:null,type:Object}},data:function(){return{focused:!1}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&this.$nextTick((function(){var n;e.registerPlugin((n={editor:e,element:t.$el},new o.Plugin({key:new o.PluginKey("menu_bar"),view:function(e){return new V({editorView:e,options:n})}}))),t.focused=e.focused,e.on("focus",(function(){t.focused=!0})),e.on("menubar:focusUpdate",(function(e){t.focused=e}))}))}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor)}):null}};function U(e,t,n){var o=document.createRange();return o.setEnd(e,null==n?e.nodeValue.length:n),o.setStart(e,t||0),o}function W(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function q(e,t){var n,o,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.docView.domFromPos(t),s=i.node,a=i.offset;if(3===s.nodeType)r&&a<s.nodeValue.length?(o=W(U(s,a-1,a),-1),n="right"):a<s.nodeValue.length&&(o=W(U(s,a,a+1),-1),n="left");else if(s.firstChild){if(a<s.childNodes.length){var l=s.childNodes[a];o=W(3===l.nodeType?U(l):l,-1),n="left"}if((!o||o.top===o.bottom)&&a){var c=s.childNodes[a-1];o=W(3===c.nodeType?U(c):c,1),n="right"}}else o=s.getBoundingClientRect(),n="left";var d=o[n];return{top:o.top,bottom:o.bottom,left:d,right:d}}var J=function(){function e(t){var n=this,o=t.options,r=t.editorView;m(this,e),this.options=x({},{element:null,keepInBounds:!0,onUpdate:function(){return!1}},{},o),this.editorView=r,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("focus",(function(e){var t=e.view;n.update(t)})),this.options.editor.on("blur",(function(e){var t=e.event;n.preventHide?n.preventHide=!1:n.hide(t)}))}return v(e,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"update",value:function(e,t){var n=e.state;if(!(e.composing||t&&t.doc.eq(n.doc)&&t.selection.eq(n.selection)))if(n.selection.empty)this.hide();else{var o=n.selection,r=o.from,i=o.to,s=q(e,r),a=q(e,i,!0),l=this.options.element.offsetParent;if(l){var c=l.getBoundingClientRect(),d=this.options.element.getBoundingClientRect(),u=(s.left+a.left)/2-c.left;this.left=Math.round(this.options.keepInBounds?Math.min(c.width-d.width/2,Math.max(u,d.width/2)):u),this.bottom=Math.round(c.bottom-s.top),this.top=Math.round(a.bottom-c.top),this.isActive=!0,this.sendUpdate()}else this.hide()}}},{key:"sendUpdate",value:function(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}},{key:"hide",value:function(e){e&&e.relatedTarget&&this.options.element.parentNode.contains(e.relatedTarget)||(this.isActive=!1,this.sendUpdate())}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler)}}]),e}();var K={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:function(){return{menu:{isActive:!1,left:0,bottom:0}}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&this.$nextTick((function(){var n;e.registerPlugin((n={editor:e,element:t.$el,keepInBounds:t.keepInBounds,onUpdate:function(e){e.isActive&&!1===t.menu.isActive?t.$emit("show",e):e.isActive||!0!==t.menu.isActive||t.$emit("hide",e),t.menu=e}},new o.Plugin({key:new o.PluginKey("menu_bubble"),view:function(e){return new J({editorView:e,options:n})}})))}))}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy:function(){this.editor.unregisterPlugin("menu_bubble")}},G=function(){function e(t){var n=this,o=t.options,r=t.editorView;m(this,e),this.options=x({},{resizeObserver:!0,element:null,onUpdate:function(){return!1}},{},o),this.preventHide=!1,this.editorView=r,this.isActive=!1,this.top=0,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("focus",(function(e){var t=e.view;n.update(t)})),this.options.editor.on("blur",(function(e){var t=e.event;n.preventHide?n.preventHide=!1:n.hide(t)})),this.options.resizeObserver&&window.ResizeObserver&&(this.resizeObserver=new ResizeObserver((function(){n.isActive&&n.update(n.editorView)})),this.resizeObserver.observe(this.editorView.dom))}return v(e,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"update",value:function(e,t){var n=e.state;if(!(t&&t.doc.eq(n.doc)&&t.selection.eq(n.selection)))if(n.selection.empty){var o=e.domAtPos(n.selection.anchor);if("<br>"===o.node.innerHTML&&"P"===o.node.tagName&&o.node.parentNode===e.dom){var r=this.options.element.offsetParent;if(r){var i=r.getBoundingClientRect(),s=e.coordsAtPos(n.selection.anchor).top-i.top;this.isActive=!0,this.top=s,this.sendUpdate()}else this.hide()}else this.hide()}else this.hide()}},{key:"sendUpdate",value:function(){this.options.onUpdate({isActive:this.isActive,top:this.top})}},{key:"hide",value:function(e){e&&e.relatedTarget&&this.options.element.parentNode.contains(e.relatedTarget)||(this.isActive=!1,this.sendUpdate())}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.resizeObserver&&this.resizeObserver.unobserve(this.editorView.dom)}}]),e}();var X={props:{editor:{default:null,type:Object}},data:function(){return{menu:{isActive:!1,left:0,bottom:0}}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&this.$nextTick((function(){var n;e.registerPlugin((n={editor:e,element:t.$el,onUpdate:function(e){e.isActive&&!1===t.menu.isActive?t.$emit("show",e):e.isActive||!0!==t.menu.isActive||t.$emit("hide",e),t.menu=e}},new o.Plugin({key:new o.PluginKey("floating_menu"),view:function(e){return new G({editorView:e,options:n})}})))}))}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy:function(){this.editor.unregisterPlugin("floating_menu")}}},"./node_modules/vue/dist/vue.esm.js":(e,t,n)=>{e.exports=n("dll-reference omniavendor")("./node_modules/vue/dist/vue.esm.js")},"dll-reference omniavendor":e=>{"use strict";e.exports=omniaVendor},"./node_modules/w3c-keyname/index.es.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{base:()=>o,shift:()=>r,keyName:()=>p});for(var o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),l="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),c="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),d=i&&(l||+i[1]<57)||a&&l,u=0;u<10;u++)o[48+u]=o[96+u]=String(u);for(u=1;u<=24;u++)o[u+111]="F"+u;for(u=65;u<=90;u++)o[u]=String.fromCharCode(u+32),r[u]=String.fromCharCode(u);for(var h in o)r.hasOwnProperty(h)||(r[h]=o[h]);function p(e){var t=!(d&&(e.ctrlKey||e.altKey||e.metaKey)||(s||c)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?r:o)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}}};if("undefined"==typeof omniaWebpackJsonp&&(window.omniaWebpackJsonp={}),omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e32e367c-d09c-4088-90a8-fd6a1e0352c7"])throw new Error("Error, already loaded manifest e32e367c-d09c-4088-90a8-fd6a1e0352c7 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e32e367c-d09c-4088-90a8-fd6a1e0352c7"]=n;var t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n("./node_modules/tiptap/dist/tiptap.esm.js"),n("./node_modules/tiptap-extensions/dist/extensions.esm.js"),n("./node_modules/tiptap-utils/dist/utils.esm.js"),n("./node_modules/tiptap-commands/dist/commands.esm.js"),n("./node_modules/prosemirror-state/dist/index.js"),n("./node_modules/prosemirror-collab/dist/collab.js"),n("./node_modules/prosemirror-model/dist/index.js"),n("./node_modules/prosemirror-tables/dist/index.js"),n("./node_modules/prosemirror-utils/dist/index.js"),n("./node_modules/prosemirror-view/dist/index.js"),n("./node_modules/prosemirror-history/dist/history.js"),n("./node_modules/prosemirror-commands/dist/commands.js"),n("./node_modules/prosemirror-transform/dist/index.js"),n("./node_modules/prosemirror-dropcursor/dist/dropcursor.js"),n("./node_modules/prosemirror-gapcursor/dist/index.js"),n("./node_modules/prosemirror-keymap/dist/keymap.js"),n("./node_modules/prosemirror-inputrules/dist/index.js");n("./node_modules/prosemirror-schema-list/dist/schema-list.js")})()}},"./client/fx/ux/dialog/index.js":(e,t,n)=>{e.exports=n("dll-reference md66")("./client/fx/ux/dialog/index.js")},"./client/fx/ux/messaging/internaltopics.js":(e,t,n)=>{e.exports=n("dll-reference md66")("./client/fx/ux/messaging/internaltopics.js")},"./client/fx/ux/models/index.js":(e,t,n)=>{e.exports=n("dll-reference md66")("./client/fx/ux/models/index.js")},"./client/fx/ux/omniatheming.js":(e,t,n)=>{e.exports=n("dll-reference md66")("./client/fx/ux/omniatheming.js")},"./client/fx/ux/styleflow.js":(e,t,n)=>{e.exports=n("dll-reference md66")("./client/fx/ux/styleflow.js")},"./client/fx/ux/uxdefaultrichtextstyle.js":(e,t,n)=>{e.exports=n("dll-reference md66")("./client/fx/ux/uxdefaultrichtextstyle.js")},"./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js":(e,t,n)=>{e.exports=n("dll-reference md2")("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,n)=>{e.exports=n("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/csx/lib.es2015/index.js":(e,t,n)=>{e.exports=n("dll-reference md2")("./node_modules/csx/lib.es2015/index.js")},"./node_modules/prosemirror-collab/dist/collab.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-collab/dist/collab.js")},"./node_modules/prosemirror-commands/dist/commands.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-commands/dist/commands.js")},"./node_modules/prosemirror-dropcursor/dist/dropcursor.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-dropcursor/dist/dropcursor.js")},"./node_modules/prosemirror-gapcursor/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-gapcursor/dist/index.js")},"./node_modules/prosemirror-history/dist/history.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-history/dist/history.js")},"./node_modules/prosemirror-inputrules/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-inputrules/dist/index.js")},"./node_modules/prosemirror-keymap/dist/keymap.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-keymap/dist/keymap.js")},"./node_modules/prosemirror-model/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-model/dist/index.js")},"./node_modules/prosemirror-schema-list/dist/schema-list.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-schema-list/dist/schema-list.js")},"./node_modules/prosemirror-state/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-state/dist/index.js")},"./node_modules/prosemirror-tables/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-tables/dist/index.js")},"./node_modules/prosemirror-transform/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-transform/dist/index.js")},"./node_modules/prosemirror-utils/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-utils/dist/index.js")},"./node_modules/prosemirror-view/dist/index.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/prosemirror-view/dist/index.js")},"./node_modules/tiptap-commands/dist/commands.esm.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/tiptap-commands/dist/commands.esm.js")},"./node_modules/tiptap-extensions/dist/extensions.esm.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/tiptap-extensions/dist/extensions.esm.js")},"./node_modules/tiptap-utils/dist/utils.esm.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/tiptap-utils/dist/utils.esm.js")},"./node_modules/tiptap/dist/tiptap.esm.js":(e,t,n)=>{e.exports=n("dll-reference md6")("./node_modules/tiptap/dist/tiptap.esm.js")},"./node_modules/typestyle/umd/typestyle.js":(e,t,n)=>{e.exports=n("dll-reference md2")("./node_modules/typestyle/umd/typestyle.js")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,n)=>{e.exports=n("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,n)=>{e.exports=n("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,n)=>{e.exports=n("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,n)=>{e.exports=n("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"8610c059-395a-45c2-804a-8c236f4d60d9":(e,t,n)=>{e.exports=n("dll-reference md66")("8610c059-395a-45c2-804a-8c236f4d60d9")},"97786ea9-4861-48bd-8a57-eae9bbdb4892":(e,t,n)=>{e.exports=n("dll-reference md9")("97786ea9-4861-48bd-8a57-eae9bbdb4892")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,n)=>{e.exports=n("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,n)=>{e.exports=n("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac":(e,t,n)=>{e.exports=n("dll-reference md10")("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]},"dll-reference md6":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e32e367c-d09c-4088-90a8-fd6a1e0352c7"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["b46f7161-e941-4240-b573-a9cd83e9d132"])throw new Error("Error, already loaded manifest b46f7161-e941-4240-b573-a9cd83e9d132 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["b46f7161-e941-4240-b573-a9cd83e9d132"]=n;var t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n("./wwwroot/scripts/tiptap/omfx.packages.tiptap_e32e367c-d09c-4088-90a8-fd6a1e0352c7.js"),n("./client/fx/ux/richtexteditor/extensions/index.js"),n("./client/fx/ux/richtexteditor/extensions/mediapicker/mediapickerstyle.css"),n("f37916a5-b801-4e3a-a1be-30a009bd2df2"),n("./node_modules/tiptap/dist/tiptap.esm.js"),n("./node_modules/tiptap-extensions/dist/extensions.esm.js"),n("./node_modules/tiptap-utils/dist/utils.esm.js"),n("./node_modules/tiptap-commands/dist/commands.esm.js"),n("./node_modules/prosemirror-state/dist/index.js"),n("./node_modules/prosemirror-collab/dist/collab.js"),n("./node_modules/prosemirror-model/dist/index.js"),n("./node_modules/prosemirror-tables/dist/index.js"),n("./node_modules/prosemirror-utils/dist/index.js"),n("./node_modules/prosemirror-view/dist/index.js"),n("./node_modules/prosemirror-history/dist/history.js"),n("./node_modules/prosemirror-commands/dist/commands.js"),n("./node_modules/prosemirror-transform/dist/index.js"),n("./node_modules/prosemirror-dropcursor/dist/dropcursor.js"),n("./node_modules/prosemirror-gapcursor/dist/index.js"),n("./node_modules/prosemirror-keymap/dist/keymap.js"),n("./node_modules/prosemirror-inputrules/dist/index.js");n("./node_modules/prosemirror-schema-list/dist/schema-list.js")})()};